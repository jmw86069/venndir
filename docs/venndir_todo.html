<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>todo on venndir • venndir</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script>




<meta property="og:title" content="todo on venndir" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-title-body">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">venndir</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.12.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="articles/venndir_gene_expression.html">Venndir with Gene Expression Data</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="http://github.com/jmw86069/venndir/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="contents col-md-9">
    <div class="page-header">
      <h1>todo on venndir</h1>
    </div>

<div id="todo-on-venndir" class="section level1">

<div id="enhancements" class="section level2">
<h2 class="hasAnchor">
<a href="#enhancements" class="anchor"></a>enhancements</h2>
<div id="bugs" class="section level3">
<h3 class="hasAnchor">
<a href="#bugs" class="anchor"></a>bugs</h3>
<ul>
<li>
<code><a href="reference/render_venndir.html">render_venndir()</a></code> argument <code>max_items</code> is being ignored. For overlaps with too many items, desired behavior is to display the counts instead of item labels.</li>
<li>
<code><a href="reference/polygon_label_outside.html">polygon_label_outside()</a></code> is glitchy for weird proportional cases, for example 4 sets and <code>shape="ellipse"</code> might warrant different default settings. Alternative method would involve taking boundary point, expanding the boundary, find nearest point on that boundary, then proceeding with <code><a href="reference/spread_degrees.html">spread_degrees()</a></code>.</li>
</ul>
</div>
<div id="performance" class="section level3">
<h3 class="hasAnchor">
<a href="#performance" class="anchor"></a>performance</h3>
<ul>
<li>Showing a few hundred item labels is still painfully slow. Consider <code><a href="https://rdrr.io/r/graphics/text.html">text()</a></code> as an alternative. Or test options that remove the dither options for color/degrees/cex in case that somehow triggers non-vectorized rendering.</li>
<li>
<code><a href="reference/polygon_label_outside.html">polygon_label_outside()</a></code> for 5-way Venn overlaps sometimes moves labels to weird positions. Workaround with <code>min_degrees=8</code> but not sure why.</li>
</ul>
</div>
<div id="miscellaneous" class="section level3">
<h3 class="hasAnchor">
<a href="#miscellaneous" class="anchor"></a>miscellaneous</h3>
<ul>
<li>Option to display concordance score below the signed values.</li>
<li>For <code>overlap_type="agreement"</code> hide the signed values for single-set overlaps, they always “agree” and are not informative.</li>
</ul>
</div>
<div id="prepare-for-r-shiny" class="section level3">
<h3 class="hasAnchor">
<a href="#prepare-for-r-shiny" class="anchor"></a>prepare for R-shiny</h3>
<ul>
<li>
<p>make <code><a href="https://wilkelab.org/ggtext/reference/geom_textbox.html">ggtext::geom_textbox()</a></code> and <code><a href="https://wilkelab.org/ggtext/reference/geom_richtext.html">ggtext::geom_richtext()</a></code> work for <code><a href="https://rdrr.io/pkg/plotly/man/ggplotly.html">plotly::ggplotly()</a></code>, by adding <code>to_basic.*()</code> functions. For example, in the package <code>splicejam</code> to make <code><a href="https://ggforce.data-imaginist.com/reference/geom_shape.html">ggforce::geom_shape()</a></code> work, I added the function <code>to_basic.GeomShape()</code>.</p>
<ul>
<li><code><a href="reference/to_basic.GeomRichText.html">to_basic.GeomRichText()</a></code></li>
<li><code><a href="reference/to_basic.GeomTextBox.html">to_basic.GeomTextBox()</a></code></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="fixed-bugs-version-00119000" class="section level2">
<h2 class="hasAnchor">
<a href="#fixed-bugs-version-00119000" class="anchor"></a>fixed bugs version 0.0.11.9000</h2>
<ul>
<li><p>FIXED: <code><a href="reference/im2list.html">im2list()</a></code> with logical matrix input was incorrectly assigning all values. The <code>empty</code> argument will match the class of the input <code>x</code> to account for this mismatch.</p></li>
<li><p>FIXED: <code>show_zero=TRUE</code> is not working properly, it is always hidden.</p></li>
<li><p>FIXED: <code>alpha_by_counts</code> appears to be mis-aligned.</p></li>
<li><p>FIXED: Fix issue where directional label colors apply <code><a href="reference/make_color_contrast.html">make_color_contrast()</a></code> without using the correct <code>alpha</code> value. See with <code><a href="reference/venndir.html">venndir(make_venn_test(100, 3), poly_alpha=0)</a></code></p></li>
<li><p>DONE: Add warning message to ggplot2 output in <code><a href="reference/render_venndir.html">render_venndir()</a></code>.</p></li>
</ul>
</div>
<div id="vignettes" class="section level2">
<h2 class="hasAnchor">
<a href="#vignettes" class="anchor"></a>vignettes</h2>
<div id="interfacing-with-venndetail" class="section level3">
<h3 class="hasAnchor">
<a href="#interfacing-with-venndetail" class="anchor"></a>interfacing with VennDetail</h3>
<ul>
<li>follow VennDetail vignette, show alternative with directional changes</li>
</ul>
</div>
<div id="interfacing-with-deseq2edger" class="section level3">
<h3 class="hasAnchor">
<a href="#interfacing-with-deseq2edger" class="anchor"></a>interfacing with DESeq2/edgeR</h3>
</div>
<div id="add-vignette-showing-more-visual-options" class="section level3">
<h3 class="hasAnchor">
<a href="#add-vignette-showing-more-visual-options" class="anchor"></a>add vignette showing more visual options</h3>
<ul>
<li>how to change Venn set colors</li>
<li>how to nudge a Venn circle</li>
<li>how to rotate the whole Venn diagram</li>
<li>how to adjust item label buffer, and view the buffer size</li>
<li>how to create custom curations with <code>curate_df</code>
</li>
<li>how to handle gene data in a dataset with multiple probes per gene</li>
</ul>
</div>
<div id="make-displaying-items-labels-easier" class="section level3">
<h3 class="hasAnchor">
<a href="#make-displaying-items-labels-easier" class="anchor"></a>make displaying items labels easier</h3>
<ul>
<li>make it “one step” to display items, when <code>show_items</code> is enabled in <code><a href="reference/venndir.html">venndir()</a></code> the default <code>label_preset</code> should include items.</li>
<li>Option to allow “one column” of labels inside the polygon, which could be useful for things like a list of pathways between two experiments.</li>
</ul>
</div>
<div id="polish-label-coordinates-insideoutside" class="section level3">
<h3 class="hasAnchor">
<a href="#polish-label-coordinates-insideoutside" class="anchor"></a>polish label coordinates inside/outside</h3>
<ul>
<li>coordinates for inside/outside should really just be in <code>venn_spdf</code> then used by <code>label_df</code> when needed</li>
<li>label styles need polishing. If overlap label is outside and count label is inside, how can they have two different styles?</li>
</ul>
</div>
<div id="combine-individual-labels-into-one-cohesive-label" class="section level3">
<h3 class="hasAnchor">
<a href="#combine-individual-labels-into-one-cohesive-label" class="anchor"></a>Combine individual labels into one cohesive label</h3>
<p>COMPLETE for base R plots.</p>
<ul>
<li><p>TODO: for any label associated with a line segment, use <code>degree_to_adj()</code> to help place the label at the correct edge of the line segment.</p></li>
<li><p>one option is simply to create one label, but text alignment for two column output would be difficult.</p></li>
<li>
<p>prototype using one label for fill/border, and expand the buffer size so it includes the other labels.</p>
<ul>
<li>calculate label width/height (<code><a href="https://rdrr.io/r/grid/widthDetails.html">grid::ascentDetails()</a></code>, <code><a href="https://rdrr.io/r/grid/widthDetails.html">grid::widthDetails()</a></code>
</li>
<li>also use grid graphics logic to use rescalable operations</li>
<li>requires knowledge about grid graphics I don’t currently have and was not yet easy to grok from online guides. I was able to proof-of-concept a method that used grob dimensions of a left label, to produce a right label with border and padding sufficient to encompass both sides. When trying to automate, it stopped working. Something in the circular logic, that a grob does not have a size until placed, so adjusting by size before placement has no usable value?</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="done-update-rmarkdown-readmermd-and-venndir_gene_expressionrmd" class="section level2">
<h2 class="hasAnchor">
<a href="#done-update-rmarkdown-readmermd-and-venndir_gene_expressionrmd" class="anchor"></a>DONE: Update Rmarkdown README.Rmd and venndir_gene_expression.Rmd</h2>
<ul>
<li>Use new recommended workflow and function arguments.</li>
<li>Beware errors in <code>venndir_gene_expression.Rmd</code> with unique errors related to <code>ragg_png</code>, see details and workaround suggested here: <a href="https://www.jumpingrivers.com/blog/r-knitr-markdown-png-pdf-graphics/" class="uri">https://www.jumpingrivers.com/blog/r-knitr-markdown-png-pdf-graphics/</a>
</li>
</ul>
</div>
<div id="done-small-features-for-version-0099000" class="section level2">
<h2 class="hasAnchor">
<a href="#done-small-features-for-version-0099000" class="anchor"></a>DONE: small features for version 0.0.9.9000</h2>
<ul>
<li>
<p>DONE: Some importer for signed overlaps. Given a known directional Venn, have a method to import to use venndir.</p>
<ul>
<li><code><a href="reference/signed_counts2setlist.html">signed_counts2setlist()</a></code></li>
</ul>
</li>
<li><p>DONE: Bug: Fix <code><a href="https://jolars.github.io/polylabelr//reference/poi.html">polylabelr::poi()</a></code> when there is one or more holes inside a polygon.</p></li>
<li><p>DONE: change all arguments with <code>angle</code> to use <code>degrees</code> for consistency, and to make clear the type of angle.</p></li>
<li>
<p>DONE: Refactor to handle <code>"set name"</code> separate from <code>"main count"</code> in the count label, so the <code>"set name"</code> can be moved, for example to perimeter or outside the polygon, leaving the numeric count inside as needed.</p>
<ul>
<li>DONE: Proportional diagram with one circle fully inside another does not have set name displayed – it must be. Consider choosing one internal polygon with fewest set overlaps with the largest area.</li>
<li>DONE: need idea for where to store the set label coordinates, since the Venn circle/ellipse shape does not have its own row.</li>
<li>DONE: maybe venn shapes need to be stored in another <code>list</code> element returned by <code><a href="reference/venndir.html">venndir()</a></code>? It makes that output a bit too heavy imo.</li>
</ul>
</li>
<li><p>Maybe: new function <code>venndir_bender()</code> to modify a <code>venndir</code> result. resize, move, rotate venndir circles/ellipses.</p></li>
<li><p>DONE: change default to <code>return_items=TRUE</code> for <code><a href="reference/venndir.html">venndir()</a></code> and <code><a href="reference/signed_overlaps.html">signed_overlaps()</a></code>.</p></li>
</ul>
<div id="done-refactor-label-position" class="section level3">
<h3 class="hasAnchor">
<a href="#done-refactor-label-position" class="anchor"></a>DONE: refactor label position</h3>
<p>Design idea: Four label types: set, overlap, count, items</p>
<ul>
<li>
<p>set</p>
<ul>
<li>inside</li>
<li>outside</li>
<li>none</li>
<li>ifhidden</li>
</ul>
</li>
<li>
<p>overlap</p>
<ul>
<li>none</li>
<li>inside</li>
<li>outside</li>
</ul>
</li>
<li>
<p>count</p>
<ul>
<li>inside</li>
<li>outside</li>
<li>none</li>
</ul>
</li>
<li>
<p>items</p>
<ul>
<li>none</li>
<li>inside</li>
</ul>
</li>
</ul>
<p>Data storage:</p>
<ul>
<li>
<p>venn_spdf</p>
<ul>
<li>contains each Venn circle</li>
<li>contains each Venn overlap polygon</li>
</ul>
</li>
<li>
<p>label_df</p>
<ul>
<li>contains each overlap count label</li>
</ul>
</li>
</ul>
<p>Progress:</p>
<ul>
<li>COMPLETE for base R plots.</li>
<li>COMPLETE for ggplot.</li>
</ul>
</div>
<div id="done-update-polygon_label_outside-for-multiple-labels" class="section level3">
<h3 class="hasAnchor">
<a href="#done-update-polygon_label_outside-for-multiple-labels" class="anchor"></a>DONE: update <code>polygon_label_outside()</code> for multiple labels</h3>
<ul>
<li>DONE: The idea is to position labels by angle relative to the same central point, detect labels “too close” to one another, then spread them out evenly to assist with spacing between labels.</li>
<li>Labels would be defined mainly by center point and angle in degrees.</li>
<li>“Too close” would be defined by user-configurable minimum degrees, with some suitable default value.</li>
<li>return the point of label, and the point at the polygon so a line segment can be drawn</li>
<li>return the text adjust (<code>adj</code>) value so a text label can be placed at an appropriate side relative to the incoming line segment.</li>
</ul>
</div>
</div>
<div id="features-for-wider-roll-out" class="section level2">
<h2 class="hasAnchor">
<a href="#features-for-wider-roll-out" class="anchor"></a>features for wider roll-out</h2>
<div id="make-render_venndir-work-for-ggplot2-output" class="section level3">
<h3 class="hasAnchor">
<a href="#make-render_venndir-work-for-ggplot2-output" class="anchor"></a>make render_venndir() work for ggplot2 output</h3>
<ul>
<li>Essentially roll <code>ggrender_venndir()</code> into <code><a href="reference/render_venndir.html">render_venndir()</a></code> then remove <code>ggrender_venndir()</code> (or make it a silent alias.)</li>
<li>Add missing counts text label to ggplot2 output. Plan to use <code><a href="https://wilkelab.org/ggtext/reference/geom_textbox.html">ggtext::geom_textbox()</a></code> for a wider label in ggplot2.</li>
</ul>
</div>
</div>
<div id="miscellaneous-items" class="section level2">
<h2 class="hasAnchor">
<a href="#miscellaneous-items" class="anchor"></a>Miscellaneous items</h2>
<div id="option-to-place-set-names-at-periphery-of-venn-circles" class="section level3">
<h3 class="hasAnchor">
<a href="#option-to-place-set-names-at-periphery-of-venn-circles" class="anchor"></a>option to place set names at periphery of Venn circles</h3>
<ul>
<li>This change could be most relevant with proportional Venn diagrams especially when one circle is fully enclosed inside another circle.</li>
<li>outer label placement will be necessary when displaying items inside each polygon. Even if I could determine the count label size inside the polygon to place labels around it, it seems non-ideal</li>
<li>this process is different for proportional circles which may be placed at various locations</li>
<li>for Venn circles and ellipses the coordinates could be pre-defined</li>
</ul>
</div>
<div id="improve-item-label-efficiency" class="section level3">
<h3 class="hasAnchor">
<a href="#improve-item-label-efficiency" class="anchor"></a>improve item label efficiency</h3>
<ul>
<li>large number of labels makes it very inefficient – find a way to make it faster.</li>
<li>one idea: instead of calling <code>gridtext</code> for each polygon, aggregate them into a <code>data.frame</code> then display them in one call. Doubtful this change will be much faster.</li>
<li>another idea: the <code><a href="https://rdrr.io/pkg/sp/man/spsample.html">sp::spsample()</a></code> function success rate is fairly low, requiring iterating with higher <code>n + i</code> labels in order to get <code>n</code> coordinates inside the polygon area. This iteration might be rate-limiting with large <code>n</code>.</li>
</ul>
</div>
<div id="make-output-compatible-with-plotly-or-something-interactive" class="section level3">
<h3 class="hasAnchor">
<a href="#make-output-compatible-with-plotly-or-something-interactive" class="anchor"></a>make output compatible with plotly (or something interactive)</h3>
<ul>
<li>Currently <code><a href="https://wilkelab.org/ggtext/reference/geom_richtext.html">ggtext::geom_richtext()</a></code> is not compatible with <code><a href="https://rdrr.io/pkg/plotly/man/ggplotly.html">plotly::ggplotly()</a></code> but probably just lacks the <code>to_basic</code> wrapper function. (See <code><a href="https://rdrr.io/pkg/splicejam/man/to_basic.GeomShape.html">splicejam::to_basic.GeomShape()</a></code> for an example workaround.)</li>
<li>This feature may require text labels at 0 or 90 degrees.</li>
</ul>
</div>
<div id="venn-meme-function" class="section level3">
<h3 class="hasAnchor">
<a href="#venn-meme-function" class="anchor"></a>venn meme function</h3>
<ul>
<li>basic idea is to make it “easy” to create a Venn meme when needed. The ability is already in place, but seems to have very consistently different default values than other Venn styles.</li>
</ul>
</div>
<div id="example-of-displaying-items-in-large-label-box-beside-the-venn-diagram" class="section level3">
<h3 class="hasAnchor">
<a href="#example-of-displaying-items-in-large-label-box-beside-the-venn-diagram" class="anchor"></a>example of displaying items in large label box beside the Venn diagram</h3>
<ul>
<li>manual placement of a larger label block where it handles word-wrapping itself, done by <code>gridtext</code>.</li>
</ul>
</div>
<div id="display-fully-closed-venn-counts" class="section level3">
<h3 class="hasAnchor">
<a href="#display-fully-closed-venn-counts" class="anchor"></a>display fully “closed” Venn counts</h3>
<ul>
<li>
<p>“Closed” includes the universe of each input list which is not represented in the Venn circles. For example:</p>
<ul>
<li>genes tested in set_A that are not hits</li>
<li>genes tested in set_B that are not hits</li>
</ul>
</li>
<li><p>This option is based upon <code>limma</code> package display of total genes in each set, displayed outside the main Venn circles.</p></li>
</ul>
</div>
<div id="item-labels" class="section level3">
<h3 class="hasAnchor">
<a href="#item-labels" class="anchor"></a>item labels</h3>
<ul>
<li>
<p>It still sometimes fails to find enough labels inside the polygon, usually for large number of labels. Workaround might be for the user to change layout type to something like <code>"regular"</code> or <code>"nonaligned"</code> which could improve the search success rate.</p>
<ul>
<li>Add example to help text, and to Rmarkdown vignette.</li>
</ul>
</li>
<li>
<p>DONE: When there is only one item, consider using the center label instead of choosing a location inside the polygon, which sometimes chooses something away from the center.</p>
<ul>
<li>Note that sometimes the <code><a href="https://jolars.github.io/polylabelr//reference/poi.html">polylabelr::poi()</a></code> point is outside the polygon, which happens sometimes when the polygon has a hole or otherwise “weird” shape. The method checks for that and uses the buffer polygon <code><a href="https://rdrr.io/pkg/sp/man/spsample.html">sp::spsample()</a></code> approach if the <code><a href="https://jolars.github.io/polylabelr//reference/poi.html">polylabelr::poi()</a></code> point is not contained in the source polygon.</li>
</ul>
</li>
</ul>
</div>
<div id="label_polygon_fill-with-relative-buffer-scale_width" class="section level3">
<h3 class="hasAnchor">
<a href="#label_polygon_fill-with-relative-buffer-scale_width" class="anchor"></a><code>label_polygon_fill()</code> with relative buffer scale_width</h3>
<ul>
<li>
<p>add option for scale_width to be relative to the object size instead of absolute dimensions. For example:</p>
<ul>
<li>
<code>scale_width=-1</code> would produce no output polygon, because <code>-1</code> is interpreted <code>-100%</code>,</li>
<li>
<code>scale_width=-0.99</code> would produce an extremely small polygon, roughly 1% the original width,</li>
<li>
<code>scale_width=-0.5</code> would produce a polygon with roughly half width buffer.</li>
</ul>
</li>
<li><p>The test example should use a relatively tall-thin ellipse, rotated to 45 degrees. The bounding box would be quite large, but the actual width of the polygon would be relatively small.</p></li>
</ul>
</div>
<div id="label_polygon_fill-extra-features" class="section level3">
<h3 class="hasAnchor">
<a href="#label_polygon_fill-extra-features" class="anchor"></a><code>label_polygon_fill()</code> extra features</h3>
<ul>
<li>DONE: dither_cex,dither_color,dither_angle to adjust each text label slightly in three ways: <code>cex</code> to make label font slightly larger or smaller; <code>color</code> to make label color slightly lighter or darker; <code>angle</code> to adjust the angle of text slightly more or less than the original <code>angle</code> value. These effects can help visibly distinguish large number of labels packed into a relatively small polygon area.</li>
</ul>
</div>
<div id="missing-counts-warning" class="section level3">
<h3 class="hasAnchor">
<a href="#missing-counts-warning" class="anchor"></a>missing counts warning</h3>
<ul>
<li>DONE: The warning needs to check both <code>show_label</code> and <code>show_items</code> for each overlap set before deciding that a set is not displayed.</li>
</ul>
</div>
<div id="consider-refactoring-base-r-plot-to-use-grid-graphics" class="section level3">
<h3 class="hasAnchor">
<a href="#consider-refactoring-base-r-plot-to-use-grid-graphics" class="anchor"></a>consider refactoring “base R plot” to use “grid graphics”</h3>
<ul>
<li>Lower priority evaluation.</li>
<li>Requires learning grid graphics in much more detail.</li>
<li>The main benefit would be compatibility with <code><a href="https://wilkelab.org/gridtext/reference/richtext_grob.html">gridtext::richtext_grob()</a></code> which uses grid graphics. Currently using <code>gridBase</code> to combine <code>grid</code> and base R plotting works in interactive R sessions, but in Rmarkdown it is sometimes glitchy, because Rmarkdown now calls <code><a href="https://ragg.r-lib.org/reference/agg_png.html">ragg::agg_png()</a></code> and I’m almost sure this use would not be recommended or supported. “Pick one method” is a reasonable thing to ask of me.</li>
<li>Another benefit is potential to calculate label width in a way to detect overlaps, and/or resize font size to fit relative to other labels.</li>
<li>Another possibility is to re-position labels using relative units, for example move main/signed labels to the left by 1.2x main label width.</li>
</ul>
</div>
<div id="refactor-venn-count-label-styling" class="section level3">
<h3 class="hasAnchor">
<a href="#refactor-venn-count-label-styling" class="anchor"></a>refactor venn count label styling</h3>
<ul>
<li>
<p>DONE: <code><a href="reference/venndir_label_style.html">venndir_label_style()</a></code></p>
<ul>
<li>currently resides inside <code><a href="reference/venndir.html">venndir()</a></code> which makes it hard to change the style in <code><a href="reference/render_venndir.html">render_venndir()</a></code>. I guess ideally the count label style can be updated by a separate function to make it easy to change styles.</li>
</ul>
</li>
</ul>
</div>
<div id="calculate-concordance-coefficient" class="section level3">
<h3 class="hasAnchor">
<a href="#calculate-concordance-coefficient" class="anchor"></a>calculate concordance coefficient</h3>
<ul>
<li>Kruskal concordance: (agree - disagree) / (agree + disagree)</li>
<li>Return concordance for each overlap set</li>
</ul>
</div>
</div>
<div id="completed-items" class="section level2">
<h2 class="hasAnchor">
<a href="#completed-items" class="anchor"></a>Completed items</h2>
<div id="done-option-to-move-count-labels-outside-the-polygon" class="section level3">
<h3 class="hasAnchor">
<a href="#done-option-to-move-count-labels-outside-the-polygon" class="anchor"></a>DONE: option to move count labels outside the polygon</h3>
<ul>
<li>
<p>DONE: implement <code>x_offset,y_offset</code> for count labels</p>
<ul>
<li>Draw a line to polygon border if needed (<code><a href="reference/polygon_label_segment.html">polygon_label_segment()</a></code>)</li>
</ul>
</li>
</ul>
</div>
<div id="done-refactor-venndir-output" class="section level3">
<h3 class="hasAnchor">
<a href="#done-refactor-venndir-output" class="anchor"></a>DONE: refactor venndir output</h3>
<p>The changes below are DONE.</p>
<ul>
<li>
<p>each polygon is represented per row in <code>venn_spdf</code></p>
<ul>
<li>label (set overlap)</li>
<li>venn_counts</li>
<li>count label x,y coordinates</li>
<li>count label x_offset,y_offset to displace a label outside the polygon (actually the offset will be stored in <code>label_df</code> for each label)</li>
<li>polygon fill, border</li>
<li>alpha, lwd, lty</li>
</ul>
</li>
<li>
<p>each label is represented in label_df, sometimes multiple labels per polygon</p>
<ul>
<li><p>venn_counts</p></li>
<li><p>text (visible label)</p></li>
<li><p>overlap_set (matches venn_spdf$label)</p></li>
<li><p>type (main for total counts, signed for directional counts)</p></li>
<li><p>x,y coordinates for each label (they should move together but not required)</p></li>
<li><p>x_offset,y_offset for each label (make sure to draw each unique line only once)</p></li>
<li><p>col (label text color), fill (label box fill), border (label box border)</p></li>
<li><p>fontsize, vjust, hjust, halign, rot</p></li>
<li><p>show_label - whether to display <code>text</code> for this polygon</p></li>
<li><p>show_items - whether to display <code>items</code> for this polygon</p></li>
<li>
<p>show_label and show_items are intended to be mutually exclusive per polygon, default behavior:</p>
<ul>
<li>default <code>show_label=NA</code> and <code>show_items=NA</code> each row of <code>label_df</code>
</li>
<li>function argument decides behavior for rows with <code>NA</code>.</li>
<li>if any <code>show_label=TRUE</code> for a polygon in <code>label_df</code> then set <code>show_items=FALSE</code>, or in future move the label outside the polygon.</li>
<li>if <code>show_items=TRUE</code> then if <code>length(items) &gt; max_items</code> then set <code>show_items=FALSE</code> and <code>show_label=TRUE</code>.</li>
<li>if both <code>show_labels=TRUE</code> and <code>show_items=TRUE</code> then display both, trust the user to adjust coordinates as needed.</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>

</div>



      <footer>
      <div class="copyright">
  <p>Developed by James M. Ward.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


