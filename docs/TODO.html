<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>TODO for venndir • venndir</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css"><script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet"><script src="pkgdown.js"></script><meta property="og:title" content="TODO for venndir"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-title-body">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">venndir</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.31.900</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="articles/venndir_gene_expression.html">Venndir with Gene Expression Data</a>
    </li>
  </ul></li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="http://github.com/jmw86069/venndir/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
    <div class="page-header">
      <h1>TODO for venndir</h1>
    </div>

<div id="todo-for-venndir" class="section level1">

<div class="section level2">
<h2 id="id_12jun2024">12jun2024<a class="anchor" aria-label="anchor" href="#id_12jun2024"></a></h2>
<ul><li>
<p><code><a href="reference/venn_meme.html">venn_meme()</a></code> - some visual adjustments are needed</p>
<ul><li>Fix regression in <code>gridtext</code> for item labels, not recognizing <code>&lt;br&gt;</code>
</li>
<li>When one item label is present, use proper center position instead of patterned fill. Or change the default fill pattern being used. Current state: item label is placed near edges and not in the center.</li>
</ul></li>
</ul></div>
<div class="section level2">
<h2 id="id_11jun2024">11jun2024<a class="anchor" aria-label="anchor" href="#id_11jun2024"></a></h2>
<ul><li>
<p>DONE. <code><a href="reference/venndir.html">venndir()</a></code> error</p>
<ul><li>Error is caused when two sets do not overlap, and <code>proportional=TRUE</code>. See <code><a href="reference/find_venn_overlaps_JamPolygon.html">find_venn_overlaps_JamPolygon()</a></code> in venndir-base-polyclip.R#428 <code><a href="reference/intersect_JamPolygon.html">intersect_JamPolygon()</a></code> in venndir-polyclip.R#245.</li>
</ul></li>
</ul></div>
<div class="section level2">
<h2 id="id_02may2024">02may2024<a class="anchor" aria-label="anchor" href="#id_02may2024"></a></h2>
<ul><li>
<p><code><a href="reference/venndir_legender.html">venndir_legender()</a></code></p>
<ul><li>Use “Set” and “Size” capitalized.</li>
<li>Left-align text in “Set” column; right-align numbers in “Size”.</li>
<li>Consider option not to colorize the table rows.</li>
<li>Consider adding a column “Color” with filled cell. Bonus points for having the color be a perfect square (not rectangular).</li>
<li>Apply contrasting color, when rows are filled with <code>set_colors</code>, currently text is always black.</li>
</ul></li>
</ul></div>
<div class="section level2">
<h2 id="id_23apr2024">23apr2024<a class="anchor" aria-label="anchor" href="#id_23apr2024"></a></h2>
<ul><li>
<p><code><a href="reference/plot.JamPolygon.html">plot.JamPolygon()</a></code>, <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code> (JamPolygon)</p>
<ul><li>Allow and document how to create a multi-panel plot. For example, how can it be used with <code>patchwork</code> to assemble a Venn diagram beside a heatmap, or beside output from <code>plot_sedesign()</code>?</li>
</ul></li>
</ul></div>
<div class="section level2">
<h2 id="id_22apr2024">22apr2024<a class="anchor" aria-label="anchor" href="#id_22apr2024"></a></h2>
<ul><li>
<p><code><a href="reference/render_venndir.html">render_venndir()</a></code> throws font-related warnings when the output PNG or PDF font library is not found, and sometimes substitutes Unicode characters with <code>"."</code>. It seems to happen uniquely to PDF output, might be platform- and device-dependent. Some suggested workarounds include:</p>
<ul><li>Use <code>extrafonts</code> package to import the desired fonts. Not tested.</li>
<li>Use specific <code>fontfamily</code> which is recognized for the requested output, however in RMarkdown when creating PNG and PDF files for the same chunk, it appears that the PNG and PDF recognized fonts are not consistent.</li>
</ul></li>
</ul></div>
<div class="section level2">
<h2 id="id_22mar2024">22mar2024<a class="anchor" aria-label="anchor" href="#id_22mar2024"></a></h2>
<ul><li><p>Remove all “sp”,<code>sf</code>,“rgeos” functions</p></li>
<li>
<p>Remove all portions of remaining functions that call “sp”,<code>sf</code>,“rgeos”</p>
<ul><li>
<code>polygon_label_segment()</code> - still uses a hybrid approach, accepting sp and jp objects.</li>
</ul></li>
<li>
<p>Verify the new <code><a href="reference/venndir.html">venndir()</a></code> returns equivalent data as <code>venndir_OLD()</code> even if it is returned in different manner.</p>
<ul><li>Clean up output data format</li>
</ul></li>
<li><p>Verify <code>render_venndir_polyclip()</code> accepts equivalent input data.</p></li>
<li><p>Consider making <code><a href="reference/venndir.html">venndir()</a></code> output equivalent to previous versions, so that methods that expect specific output might still work?</p></li>
<li>
<p>Consider S4 <code>Venndir</code> object, with slot names:</p>
<ul><li>
<p>slots:</p>
<ul><li>
<code>jp</code> - set polygons, name, label, color</li>
<li>
<code>jps</code> - set/overlap polygons, name, label, type, overlap</li>
<li>
<code>label_df</code> - overlap count, signed count, count label, items (optional)</li>
<li>
<code>setlist</code> - the input <code>setlist</code> for easy reference</li>
</ul></li>
<li>
<p>methods:</p>
<ul><li>
<p><code>validate()</code> - check internal consistency, set names, overlaps, label xy</p>
<ul><li>names(setlist) matches names(jp), are found in names(jps)</li>
<li>jps overlap names -&gt; set names -&gt; found in names(setlist), names(jp)</li>
<li>label_df overlap names all present in jps overlap names</li>
<li>label_df specific overlap count sum equals jps overlap count</li>
</ul></li>
<li><p><code>setlist()</code> - accessor for <code>setlist</code> slot</p></li>
<li><p><code>im()</code> - calls <code><a href="reference/list2im_opt.html">list2im_opt()</a></code></p></li>
<li><p><code>im_signed()</code> (or <code>im_value()</code>) - calls <code><a href="reference/list2im_value.html">list2im_value()</a></code></p></li>
<li><p><code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code> - calls <code><a href="reference/render_venndir.html">render_venndir()</a></code></p></li>
</ul></li>
</ul></li>
<li>
<p>label positioning shorthand: NOCPSI</p>
<ul><li>Set _N_ame, _O_verlap Name, _C_ount, _P_ercentage, _S_igned, _I_tems</li>
<li>uppercase is “outside”, lowercase is “inside” the relevant polygon</li>
<li>Default: Ncps: set _N_ame outside; _c_ount/_s_igned inside, others hidden</li>
<li>To show items: NCSi: _N_ame/_C_ount/_S_igned outside; items inside</li>
</ul></li>
<li>
<p>consider table item display inside/outside</p>
<ul><li>
<code><a href="https://rdrr.io/pkg/gridExtra/man/tableGrob.html" class="external-link">gridExtra::tableGrob()</a></code> with 1 to 3 columns, which could be positioned beneath other name/count labels. Seen in published Venn diagram figure. Probably only works well for a small number of items.</li>
</ul></li>
</ul></div>
<div class="section level2">
<h2 id="id_13mar2024">13mar2024<a class="anchor" aria-label="anchor" href="#id_13mar2024"></a></h2>
<ul><li><p>Optionally display overall percentage below main count label.</p></li>
<li>
<p>Consider <code>JamPolygon</code> which is a <code>data.frame</code>:</p>
<ul><li>
<p><code>data.frame</code> details:</p>
<ul><li><p>Each row is strictly one polygon, multipart polygons are still one row.</p></li>
<li><p><code>x</code>: <code>list</code> column with one or more <code>numeric</code> vectors.</p></li>
<li><p><code>y</code>: <code>list</code> column with one or more <code>numeric</code> vectors.</p></li>
<li><p><code>name</code> - unique entry, essentially <code><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames()</a></code></p></li>
<li>
<p><code>label</code> - by default uses <code>name</code> but can be anything including <code>NA</code>, also it can contain the same label as another polygon.</p>
<ul><li>Unclear whether it can store <code><a href="https://wilkelab.org/gridtext/reference/richtext_grob.html" class="external-link">gridtext::richtext_grob()</a></code>?</li>
</ul></li>
<li><p><code>labels</code> - optional, label each multipart polygon - not implemented yet</p></li>
<li><p><code>fill</code> - internal polygon fill color</p></li>
<li>
<p><code>border</code>, <code>border.lwd</code>, <code>border.lty</code> - outer border</p>
<ul><li>Consider R package <code>vwline</code> for variable width lines, part of which enables rendering the outer/inner portion of a line.</li>
</ul></li>
<li><p><code>innerborder</code>, <code>innerborder.lwd</code>, <code>innerborder.lty</code> - inner border</p></li>
<li><p><code>family</code>, <code>fontsize</code> - <code><a href="https://rdrr.io/r/grid/gpar.html" class="external-link">grid::gpar()</a></code> for the label.</p></li>
<li><p><code>label_x</code>, <code>label_y</code> - to position the label inside the polygon</p></li>
<li><p><code>outerlabel_x</code>, <code>outerlabel_y</code> - to position the label outside the polygon?</p></li>
</ul></li>
<li>
<p><code><a href="reference/plot.JamPolygon.html">plot.JamPolygon()</a></code></p>
<ul><li>Wrapper to render <code>JamPolygon</code> likely using <code>grid</code> methods.</li>
</ul></li>
<li>
<p><code>print.JamPolygon()</code>, <code>summary.JamPolygon()</code></p>
<ul><li>summary function to print contents, probably using <code>print.data.frame</code>
</li>
</ul></li>
</ul></li>
</ul></div>
<div class="section level2">
<h2 id="id_12feb2024">12feb2024<a class="anchor" aria-label="anchor" href="#id_12feb2024"></a></h2>
<ul><li><p>Idea: Consider reporting “overlaps not shown” using <code><a href="https://rdrr.io/pkg/gridExtra/man/tableGrob.html" class="external-link">gridExtra::grid.table()</a></code></p></li>
<li>
<p>Related: Could <code><a href="https://rdrr.io/pkg/gridExtra/man/tableGrob.html" class="external-link">gridExtra::grid.table()</a></code> be used for Venn labels?</p>
<ul><li>It would need to be rendered with <code>textGrob()</code> then replaced with <code><a href="https://wilkelab.org/gridtext/reference/richtext_grob.html" class="external-link">gridtext::richtext_grob()</a></code>
</li>
</ul></li>
<li>
<p>Marry <code>gridtext</code> and <code>ggrepel</code> for non-overlapping labels.</p>
<ul><li>Follow: <a href="https://github.com/wilkelab/gridtext/issues/33" class="external-link uri">https://github.com/wilkelab/gridtext/issues/33</a> There is a working pull request in <code>gridtext</code>, pending changes in <code>ggrepel</code>. Just awaiting each package author approval.</li>
</ul></li>
<li>
<p><code>venndir_legendir()</code></p>
<ul><li>Consider option to display “Total” unique items as the bottom row.</li>
</ul></li>
<li>
<p>Fix issue with Venn numeric label coloring when background color is dark.</p>
<ul><li>The <code>venndir_legendir()</code> label shows light text correctly, the signed labels appear to be adjusted correctly, but the count label appears not to be adjusted correctly. Some cells are correct, others are not, suggesting this is a mismatched ordering issue. Observed with 4-way Venn, it appears only the overlap regions adjust text, not the unique-set regions.</li>
</ul></li>
</ul></div>
<div class="section level2">
<h2 id="id_27nov2023">27nov2023<a class="anchor" aria-label="anchor" href="#id_27nov2023"></a></h2>
<ul><li>
<p>DONE. Urgent: Transition from “sp” and “rgeos” to <code>polyclip</code> since “rgeos” has been removed from CRAN. Ugh.</p>
<ul><li>
<p>Current status:</p>
<ul><li>Most individual functions are ported with equivalent functions provided by <code><a href="https://rdrr.io/pkg/polyclip/man/polyclip.html" class="external-link">polyclip::polyclip()</a></code>.</li>
<li>There are still edge cases with polygons having holes, nested polygons (multi-part polygons) which are not handled consistently.</li>
</ul></li>
</ul></li>
</ul></div>
<div class="section level2">
<h2 id="id_04oct2023">04oct2023<a class="anchor" aria-label="anchor" href="#id_04oct2023"></a></h2>
<ul><li>
<p>debug issue when LOCALE is “C” the labels are not shown, and error is generating saying <code>gridtext</code> does not recognize characters, referencing some simple unicode characters (up/down arrows, etc.)</p>
<ul><li>workaround is to change LOCALE to <code>"en_US.UTF-8"</code> with: <code>Sys.setlocale("LC_ALL", "en_US.UTF-8")</code> but unclear why it’s a problem? This workaround does not seem portable for other actual locales.</li>
</ul></li>
<li><p>Optionally display overall percentage below main count label</p></li>
</ul></div>
<div class="section level2">
<h2 id="id_21sep2023">21sep2023<a class="anchor" aria-label="anchor" href="#id_21sep2023"></a></h2>
<ul><li>
<p><code><a href="reference/venndir_legender.html">venndir_legender()</a></code></p>
<ul><li>For signed data, include direction labels, colorized properly. <code>"size"</code> <code>"direction"</code> <code>"579"</code> <code>"(↑: 123, ↓: 456)"</code>
</li>
<li>It should call <code><a href="reference/curate_venn_labels.html">curate_venn_labels()</a></code> which means it needs the arguments <code>curate_df</code>,<code>unicode</code> to allow customization.</li>
</ul></li>
<li>
<p>DONE. Migrate from “sp” to <code>polyclip</code></p>
<ul><li><p>“sp” is being retired October 2023. Decided not to use <code>sf</code> due to heavy dependencies focused on geographical map software libraries which are not relevant here.</p></li>
<li><p><code>polyclip</code> provides the basic manipulations required: intersect, union, subtract, rotate, buffer.</p></li>
<li>
<p>Does <code>venndir</code> need to accept past object formats with “sp” objects?</p>
<ul><li>Migration function to convert old “sp” to new <code>polyclip</code> object.</li>
</ul></li>
<li><p>Replace <code>venn_spdf</code> with <code>data.frame</code> equivalent format.</p></li>
<li>
<p>Functions to port:</p>
<ul><li>
<code>find_vennpoly_overlaps()</code> - input <code>SpatialPolygons</code>, output <code>SpatialDataFrame</code>
</li>
<li>
<code>eulerr2polys()</code> - output <code>SpatialPolygons</code>
</li>
<li>
<code>intersect_polygons()</code> - input/output <code>SpatialPolygons</code>
</li>
<li>
<code>union_polygons()</code> - input/output <code>SpatialPolygons</code>
</li>
<li>
<code>get_largest_polygon()</code> - input/output <code>SpatialPolygons</code>
</li>
<li>
<code>sp_circles()</code>,<code>sp_ellipses()</code> - output <code>SpatialPolygons</code>
</li>
<li>
<code>nudge_sp()</code> - input/output <code>SpatialPolygons</code>
</li>
<li>
<code>rescale_sp()</code>,<code>rescale_ps()</code>,<code>rescale_p()</code>,<code><a href="reference/rescale_coordinates.html">rescale_coordinates()</a></code> - ?</li>
<li><code>polygon_label_segment()</code></li>
<li><code>sp_polylabelr()</code></li>
<li><code>sp_percent_area()</code></li>
<li><code>get_sp_buffer()</code></li>
</ul></li>
</ul></li>
</ul></div>
<div class="section level2">
<h2 id="id_07jul2023">07jul2023<a class="anchor" aria-label="anchor" href="#id_07jul2023"></a></h2>
<ul><li>
<p><code><a href="reference/render_venndir.html">render_venndir()</a></code></p>
<ul><li>
<p>label positioning</p>
<ul><li>Count label placement should center the main counts at the target location, with signed counts offset to the right side.</li>
<li>When main label and count label are shown together, the x-center position should be the center of the combined set label, main count label.</li>
<li>The main goal is to have the main count positioned as well inside and centered within the Venn polygon as possible. The signed counts should be considered embellishments to the main count label, so they can be slightly outside the polygon as long as they are anchored to the main counts.</li>
<li>Currently, the whole label is centered in the polygon, which sometimes makes the main count label appear on the border between two polygons.</li>
<li>When set label and counts are shown together, consider placing the main label centered at the top, count label on the left, signed labels on the right, such that the signed labels are positioned at the middle relative to the count label on the left.</li>
</ul></li>
<li><p>Consider option to display percentage beside counts for each section, as seen in several other Venn diagram tools. It’s probably too much to include percentages with the signed counts.</p></li>
<li><p>Consider using <code>grid</code> coordinates for more rendering, specifically so labels might be positioned relative to other objects, seen when resizing a graphical window. Probably not a use case worth “solving” now that I write it out.</p></li>
<li><p>Line segments should more reliably point to “just inside” the polygon shape, where the overlap is more or less a fixed amount, and slightly more than the current defaults. Currently the line mostly points to the border, it’s hard to see that the line ends just inside.</p></li>
</ul></li>
<li>
<p>Consider new function <code><a href="reference/reposition_venn_gridtext_labels.html">reposition_venn_gridtext_labels()</a></code></p>
<ul><li>based upon <code><a href="reference/draw_gridtext_groups.html">draw_gridtext_groups()</a></code>
</li>
<li>Purpose would be to adjust label positions after grobs are defined, so the actual height/width is defined, but before rendering.</li>
<li>Currently there is a bug, when <code>group_labels=TRUE</code> for labels outside, the whole group of labels is adjusted to right/left side of the connecting line segment. When <code>group_labels=FALSE</code> this step does not occur.</li>
<li>This function should allow re-positioning labels within a label group, such as having the title at top-center, with count labels in one or two columns beneath it, properly aligned among themselves below the title.</li>
<li>This function could also therefore enable themes, with different types of layouts. Some themes could represent the style of popular Venn diagram packages, to facilitate using alongside those packages.</li>
</ul></li>
</ul></div>
<div class="section level2">
<h2 id="id_09may2023">09may2023<a class="anchor" aria-label="anchor" href="#id_09may2023"></a></h2>
<ul><li>
<p><code><a href="reference/venndir.html">venndir()</a></code> and <code><a href="reference/render_venndir.html">render_venndir()</a></code></p>
<ul><li>DONE: option to hide border around polygons/circles; or adjust line width</li>
</ul></li>
<li>
<p>Debug rare issue with incorrect text spacing within labels in Venn diagrams?</p>
<ul><li>appears to be some rare <code>grid</code> state where signed labels have too much visible spacing between arrows and numbers, for example <code>"^^: 12"</code> appears like <code>"^^:          12"</code> for most labels, but not all.</li>
<li>a fresh R session seems to resolve the problem. Using the same R object in another new R session, the venndir output is rendered normally.</li>
<li>
<code><a href="https://rdrr.io/r/grDevices/dev.html" class="external-link">dev.new()</a></code> does not resolve the problem in the new plot window.</li>
<li>the effect is exagerrated with <code>unicode=TRUE</code>, and diminished but still present with <code>unicode=FALSE</code>. Whitespace is still much wider than normal.</li>
</ul></li>
<li>
<p>Debug issue when <code>group_labels=FALSE</code>.</p>
<ul><li>The main set labels are no longer positioned to left or right of the incoming segment, they are positioned over center of the segment endpoint. This code might be errantly inside a conditional block.</li>
</ul></li>
<li><p>consider “normalizing” proportional polygon coordinates so the <code>x,y</code> ranges are roughly consistent with those used by fixed 3-way and 4-way Venns. Potential benefit with other functions that may use absolute or relative sizes for things like <code>segment_buffer</code> and <code>item_buffer</code>.</p></li>
<li>
<p>consider <code>venndir_output</code> object class?</p>
<ul><li><p>could be useful for re-use and editing</p></li>
<li>
<p>suggested slotNames</p>
<ul><li>
<p><code>venn_spdf</code>: soon to be using <code>sf</code> in form of <code>data.frame</code></p>
<ul><li>contains polygons for each main set (<code>spdf</code> will change to <code>sf</code>)</li>
<li>polygons for each individual Venn overlap</li>
<li>colors and alpha transparency assigned to main sets</li>
<li>
<code>x_label,y_label</code> coordinates of label inside each polygon center, however not used? the <code>label_df[,c("x","y")]</code> are slightly different.</li>
</ul></li>
<li>
<p><code>label_df</code>: <code>data.frame</code></p>
<ul><li>contains label information to be rendered: <code>text</code>, <code>venn_counts</code>, <code>overlap_set</code>, <code>type</code>
</li>
<li>
<code>x,y</code> coordinates of polygon center</li>
<li>
<code>x_offset,y_offset</code> to position label outside relative to <code>x,y</code>
</li>
<li>
<code>segment_buffer</code> used for segment depth into polygon</li>
<li>label positioning inside/outside; vjust/hjust/halign; padding</li>
<li>optionally contains items in each overlap</li>
<li>optional: <code>show_items</code>, <code>items</code>, <code>item_cex</code>, <code>item_degrees</code>
</li>
</ul></li>
<li><p><code>rv_label_df</code>: (optional?) adjusted <code>data.frame</code> from <code><a href="reference/render_venndir.html">render_venndir()</a></code></p></li>
<li><p><code>setlist</code>: new <code>list</code> representing the input data, for convenience</p></li>
</ul></li>
</ul></li>
<li><p>consider text output from <code><a href="reference/venndir_legender.html">venndir_legender()</a></code> for use by <code><a href="reference/textvenn.html">textvenn()</a></code></p></li>
<li>
<p>need convenient method to adjust set labels that are too wide</p>
<ul><li>
<p>current option is to edit <code>names(setlist)</code></p>
<ul><li>not convenient when using <code><a href="reference/venndir.html">venndir()</a></code> as a one-liner</li>
<li>in theory only the display should be affected, not actual names</li>
<li>the returned object names would also be affected</li>
</ul></li>
<li>
<p>option to “alias” the sets</p>
<ul><li>use something like A, B, C</li>
<li>DONE: show both the alias and full name in <code><a href="reference/venndir_legender.html">venndir_legender()</a></code> legend</li>
</ul></li>
<li>
<p>option to adjust labels on the fly</p>
<ul><li><p>custom adjustment function, rather than editing upfront in <code>setlist</code></p></li>
<li>
<p>could provide a few common adjustment functions</p>
<ul><li>word wrap: when label is too wide, it imposes word wrapping of whitespace</li>
<li>shortener: when label is too wide, it crops and makes labels unique</li>
<li>aliaser: assigns single values from <code>LETTERS</code> or <code><a href="https://rdrr.io/pkg/jamba/man/colNum2excelName.html" class="external-link">jamba::colNum2excelName()</a></code>
</li>
</ul></li>
</ul></li>
</ul></li>
</ul></div>
<div class="section level2">
<h2 id="id_02may2023">02may2023<a class="anchor" aria-label="anchor" href="#id_02may2023"></a></h2>
<ul><li>
<p>Overall: replace use of “sp” (SpatialPolygons) with <code>sf</code> (Simple Features)</p>
<ul><li><p>requires changing <code>venn_spdf</code> into the <code>sf</code> equivalent, which could be nearly drop-in replacement. The <code>sf</code> default object is based upon <code>data.frame</code> already.</p></li>
<li><p>requires converting sp-specific functions: <code>nudge_sp()</code>, <code>rescale_ps()</code>, <code>rescale_sp()</code>, <code>rescale_p()</code>, <code><a href="reference/rescale_coordinates.html">rescale_coordinates()</a></code>, <code>get_sp_buffer()</code>. Some functions like <code>get_sp_buffer()</code> may be built-in with <code>sf</code>.</p></li>
<li><p>remove dependencies “sp” and “rgeos”.</p></li>
<li>
<p>replace “rgeos” functions with with built-in <code>sf</code> equivalents:</p>
<ul><li>“rgeos” <code>gArea()</code> -&gt; <code><a href="https://r-spatial.github.io/sf/reference/geos_measures.html" class="external-link">sf::st_area()</a></code>
</li>
<li>“rgeos” <code>gDifference()</code> -&gt; <code><a href="https://r-spatial.github.io/sf/reference/geos_binary_ops.html" class="external-link">sf::st_difference()</a></code>
</li>
<li>“rgeos” <code>gBuffer()</code> -&gt; <code><a href="https://r-spatial.github.io/sf/reference/geos_unary.html" class="external-link">sf::st_buffer()</a></code>
</li>
<li>“rgeos” <code>gIntersects()</code> -&gt; <code><a href="https://r-spatial.github.io/sf/reference/geos_binary_pred.html" class="external-link">sf::st_intersects()</a></code>
</li>
<li>“rgeos” <code>gSimplify()</code> -&gt; <code><a href="https://r-spatial.github.io/sf/reference/geos_unary.html" class="external-link">sf::st_simplify()</a></code>
</li>
<li>“rgeos” <code>gUnaryUnion()</code> -&gt; <code>sf::st_union(x)</code>
</li>
<li>“rgeos” <code>gContains()</code> -&gt; <code><a href="https://r-spatial.github.io/sf/reference/geos_binary_pred.html" class="external-link">sf::st_contains()</a></code>
</li>
<li>“rgeos” <code>gUnion()</code> -&gt; <code>sf::st_union(x, y)</code>
</li>
</ul></li>
</ul></li>
<li>
<p><code><a href="reference/venndir.html">venndir()</a></code></p>
<ul><li>accept incidence matrix input, by calling <code><a href="reference/im_value2list.html">im_value2list()</a></code>
</li>
<li>properly convert newline <code>"\n"</code> characters to <code>&lt;br&gt;</code> internally, without having to encode this code at input.</li>
<li>properly detect when input data is not signed, to change <code>overlap_type="overlap"</code> and suppress the display of directional arrows.</li>
<li>consider calling <code>venndir_legend()</code>, perhaps as an option.</li>
</ul></li>
<li>
<p><code><a href="reference/venn_meme.html">venn_meme()</a></code></p>
<ul><li>Examples for <code>venn_meme(wtah, proportional=TRUE)</code> causes an error in <code>polygon_label_fill()</code> potentiallly trying to fill labels into a polygon overlap that does not exist in the object. It previously skipped those sections, however an error is thrown.</li>
<li>Consider renaming as <code>venndir_meme()</code>
</li>
</ul></li>
<li>
<p>For fun, consider renaming functions similar to <code><a href="reference/render_venndir.html">render_venndir()</a></code>. Some ideas:</p>
<ul><li>DONE: <code>venndir_legend()</code> -&gt; <code><a href="reference/venndir_legender.html">venndir_legender()</a></code>?</li>
<li>
<code>find_vennpoly_overlaps()</code> -&gt; <code>venndir_descender()</code>, it descends the polygon overlap combinations.</li>
<li>
<code><a href="reference/get_venn_shapes.html">get_venn_shapes()</a></code> -&gt; <code>venndir_attender()</code>
</li>
<li>
<code><a href="reference/curate_venn_labels.html">curate_venn_labels()</a></code> -&gt; <code>venndir_amender()</code>
</li>
<li>
<code><a href="reference/make_venn_test.html">make_venn_test()</a></code> -&gt; <code>venndir_extender()</code> (not sure this one is valid)</li>
<li>
<code><a href="reference/nudge_venndir_label.html">nudge_venndir_label()</a></code> -&gt; <code>venndir_bender()</code> - general purpose function to adjust, rotate, re-position the polygons and labels. Alternate ideas: <code>venndir_mender()</code>, <code>venndir_blender()</code>
</li>
<li>
<code><a href="reference/make_venn_combn_df.html">make_venn_combn_df()</a></code> -&gt; <code>venndir_blender()</code> since it combines the Venn sets into expected combinations of overlaps; or <code>venndir_sender()</code> since the function takes set names, “sends” them out to create a set of Venn overlap combinations.</li>
<li>
<code>venndir_sender()</code> new function to return setlist for <code><a href="reference/venndir.html">venndir()</a></code> output</li>
</ul></li>
</ul></div>
<div class="section level2">
<h2 id="id_01may2023">01may2023<a class="anchor" aria-label="anchor" href="#id_01may2023"></a></h2>
<ul><li><p>check build issues on R-4.2.3, dependency on <code>data.table</code></p></li>
<li>
<p>DONE: Add venndir legend, a simple list with the number of elements in each set.</p>
<ul><li>NOT YET: automate the legend for <code><a href="reference/venndir.html">venndir()</a></code> and <code><a href="reference/render_venndir.html">render_venndir()</a></code>
</li>
<li>NOT YET: optional breakdown by sign?</li>
<li>DONE: consider something like <code>grid.table()</code>, <code>grid::tableGrob()</code>; if that implementation is too slow, see custom <code>grid.ftable()</code> described here: <a href="https://cran.r-project.org/web/packages/gridExtra/vignettes/tableGrob.html" class="external-link uri">https://cran.r-project.org/web/packages/gridExtra/vignettes/tableGrob.html</a>
</li>
</ul></li>
<li>
<p>Add optional percentage to the Venn overlap counts.</p>
<ul><li>calculation appears to use the overall percentage items.</li>
<li>The default layout would place percentage velow the main counts:</li>
</ul></li>
</ul><table style="width:69%;" class="table"><colgroup><col width="29%"><col width="40%"></colgroup><thead><tr class="header"><th colspan="2" align="right"><div class="sourceCode" id="cb1"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>  set_name, overlap_name, or blank</span></code></pre></div></th>
</tr></thead><tbody><tr class="odd"><td align="right">overlap_count</td>
<td rowspan="2" align="left">
<p>^: up_counts</p>
<p>v: down_counts</p>
</td>
</tr><tr class="even"><td align="right">[overlap_percent%]</td>
</tr></tbody></table><ul><li>
<p>Consider organizing labels using template styling, with commony used presets</p>
<ul><li>See above for one example.</li>
</ul></li>
<li><p>When showing items, and there are more than <code>max_items</code>, use the appropriate label instead of only showing the overlap counts. Honor the argument <code>overlap_type</code> as if items were not enabled for this region.</p></li>
<li><p>consider using equivalent <code>data.table</code> implementation for <code><a href="reference/list2im_value.html">list2im_value()</a></code>, but only if this step appears to be too slow for routine use.</p></li>
<li><p>Migrate previous items that are still active from <code>venndir_todo.md</code>.</p></li>
</ul></div>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>

</div>



      <footer><div class="copyright">
  <p></p><p>Developed by James M. Ward.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

