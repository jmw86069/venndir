<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Changelog • venndir</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Changelog"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">venndir</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.54.900</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/venndir_gene_expression.html">Venndir with Gene Expression Data</a></li>
  </ul></li>
<li class="active nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/jmw86069/venndir/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-news">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Changelog</h1>
      <small>Source: <a href="https://github.com/jmw86069/venndir/blob/HEAD/NEWS.md" class="external-link"><code>NEWS.md</code></a></small>
    </div>

    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.54.900" id="venndir-0054900">venndir 0.0.54.900<a class="anchor" aria-label="anchor" href="#venndir-0054900"></a></h2>
<div class="section level3">
<h3 id="changes-to-existing-functions-0-0-54-900">changes to existing functions<a class="anchor" aria-label="anchor" href="#changes-to-existing-functions-0-0-54-900"></a></h3>
<ul><li><p><code><a href="https://rdrr.io/r/base/warnings.html" class="external-link">warnings()</a></code> generic function is now exported.</p></li>
<li><p><code><a href="../reference/check_systemfonts_family.html">check_systemfonts_family()</a></code> added argument <code>path</code> with optional full path to specific font file.</p></li>
<li><p>Added tests for <code><a href="https://rdrr.io/r/base/warnings.html" class="external-link">warnings()</a></code> on <code>Venndir</code> object.</p></li>
<li>
<p><code><a href="../reference/venndir.html">venndir()</a></code></p>
<ul><li>Fixed some issues with outside label placement with proportional output.</li>
<li>Improved logic for ref_polygon, used internally to label singlet sets which are fully enclosed in another set.</li>
<li>Removed slot names from print object summary, not necessary.</li>
</ul></li>
<li>
<p><code><a href="../reference/render_venndir.html">render_venndir()</a></code></p>
<ul><li>Improved label groupings by ref_polygon, edge cases. In future, set labels can be independent of the “overlap count set label” - possibly allowing set size to be displayed with the outer label, and have a separate label with unique counts for the same set. It is confusing visually, so for now the labels are intended to mean the “Venn overlap label”, therefore ‘set_A’ implies “items unique to set_A”.</li>
<li>Improved default center for 2-way Venn, biasing labels toward the top rather than left-right.</li>
<li>Make line segments slightly darker and wider to be more clearly visible.</li>
</ul></li>
<li>
<p><code><a href="../reference/label_outside_JamPolygon.html">label_outside_JamPolygon()</a></code></p>
<ul><li>New argument <code>do_plot</code> for optional visual summary of label positions.</li>
<li>New argument <code>snap_y_percent=5</code> will snap y-axis positions when multiple labels have a value within this percentage of the plot dimensions, used to align labels.</li>
<li>Added internal trick to ensure set labels sort top-to-bottom before overlap labels for the same set, instead of clockwise, improving the left-right symmetry.</li>
</ul></li>
<li><p><code><a href="../reference/subset_systemfonts.html">subset_systemfonts()</a></code> - added more help text.</p></li>
<li><p><code><a href="../reference/check_systemfonts_family.html">check_systemfonts_family()</a></code> new argument <code>debug</code> to print error when suppressed internally, new argument <code>path</code> for optional full filename.</p></li>
<li><p><code><a href="../reference/degrees_to_adj.html">degrees_to_adj()</a></code> - new argument <code>do_fractional=TRUE</code> with improved sliding placement of the label instead of snapping to the nearest 45 degree angle.</p></li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-0-0-54-900">Bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-0-0-54-900"></a></h3>
<ul><li>
<code><a href="../reference/spread_degrees.html">spread_degrees()</a></code> - Fixed conditional filter causing it to spread angles instead of using <code>min_degrees</code>. Fixed rare edge case with proportional labels appearing to be wrongly positioned.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.53.900" id="venndir-0053900">venndir 0.0.53.900<a class="anchor" aria-label="anchor" href="#venndir-0053900"></a></h2>
<ul><li>Added Enhances: hexSticker, ggplot2</li>
<li>Added Imports: withr</li>
<li>Added figure alt text to gene expression vignette.</li>
</ul><div class="section level3">
<h3 id="changes-to-existing-functions-0-0-53-900">changes to existing functions<a class="anchor" aria-label="anchor" href="#changes-to-existing-functions-0-0-53-900"></a></h3>
<ul><li>
<p><code><a href="../reference/textvenn.html">textvenn()</a></code></p>
<ul><li>Now hides values for singlet overlap counts as defined by <code><a href="../reference/curate_venn_labels.html">curate_venn_labels()</a></code>.</li>
<li>New argument <code>template</code> with options for “wide” and “tall”, consistent with <code><a href="../reference/venndir.html">venndir()</a></code>
</li>
<li>New argument <code>draw_legend=FALSE</code> to print text table legend.</li>
</ul></li>
<li>
<p><code><a href="../reference/make_venn_test.html">make_venn_test()</a></code></p>
<ul><li>New argument <code>set_names</code> to make it easier to define custom names.</li>
<li>Names are handled slightly differently, using <code>set_names</code> then <code>names(sizes)</code>, then assigning <code>"set_A"</code> using LETTERS.</li>
</ul></li>
<li>
<p><code><a href="../reference/curate_venn_labels.html">curate_venn_labels()</a></code></p>
<ul><li>New arg <code>type="all"</code> returns three columns: ‘sign’, ‘color’, ‘hide_singlet’</li>
</ul></li>
<li>
<p><code>Venndir-class</code></p>
<ul><li>
<code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code> method now includes “overlaps not shown” when applicable.</li>
<li>new generic <code><a href="https://rdrr.io/r/base/warnings.html" class="external-link">warnings()</a></code> to list “overlaps not shown” when applicable.</li>
<li>metadata entry <code>"warn_df"</code> contains a <code>data.frame</code> when there are overlap counts that cannot be shown on the venndir plot. It occurs sometimes with proportional Euler diagrams with 3 or more sets.</li>
<li>
<code>im()</code> generic method handles unsigned and signed data.</li>
</ul></li>
<li>
<p><code>JamPolygon-class</code></p>
<ul><li>
<code><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow()</a></code>, <code><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol()</a></code> more correctly defined without causing warning.</li>
</ul></li>
</ul></div>
<div class="section level3">
<h3 id="new-functions-0-0-53-900">New functions<a class="anchor" aria-label="anchor" href="#new-functions-0-0-53-900"></a></h3>
<p>Some helper functions to navigate fonts from systemfonts.</p>
<ul><li>
<code><a href="../reference/subset_systemfonts.html">subset_systemfonts()</a></code> convenience function to navigate the fonts available to systemfonts and therefore marquee. Adds option to display the search results. Also filters out “problem fonts” not recognized by the Freetype API used by ‘systemfonts’.</li>
<li>
<code><a href="../reference/check_systemfonts_family.html">check_systemfonts_family()</a></code> is the utility function that checks for ‘systemfonts’ Freetype compatibility.</li>
<li>
<code><a href="../reference/hexsticker_venndir.html">hexsticker_venndir()</a></code> simple utility function to create the hexsticker. It has a few preset ‘inspirations’ in development.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.52.900" id="venndir-0052900">venndir 0.0.52.900<a class="anchor" aria-label="anchor" href="#venndir-0052900"></a></h2>
<ul><li>Removed dependency: vwline</li>
</ul><div class="section level3">
<h3 id="changes-to-existing-functions-0-0-52-900">Changes to existing functions<a class="anchor" aria-label="anchor" href="#changes-to-existing-functions-0-0-52-900"></a></h3>
<ul><li>
<p><code><a href="../reference/venndir.html">venndir()</a></code></p>
<ul><li>Default <code>fontfamily="Arial"</code> to avoid invisible text with small font sizes with <code>"sans"</code> or <code>"Helvetica"</code> on Mac raster output.</li>
<li>Minor adjustment to color blending to use alpha upfront, overlaps tend to become more opaque which intuitively is what was expected.</li>
</ul></li>
<li>
<p><code><a href="../reference/render_venndir.html">render_venndir()</a></code></p>
<ul><li>By default, plot title uses marquee, not gridtext.</li>
</ul></li>
<li><p><code><a href="../reference/make_venn_test.html">make_venn_test()</a></code> uses 200 items and 3 sets, as better defaults.</p></li>
</ul></div>
<div class="section level3">
<h3 id="new-functions-0-0-52-900">New functions<a class="anchor" aria-label="anchor" href="#new-functions-0-0-52-900"></a></h3>
<ul><li>
<code><a href="../reference/collapse_im.html">collapse_im()</a></code> - convenient function to collapse probe-level, transcript-level, or peptide-level incidence matrix to gene-level. Useful for transcriptome (RNA-seq, microarray), proteomics (MS peptide), or other technologies that may have multiple assays for the same gene.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.51.900" id="venndir-0051900">venndir 0.0.51.900<a class="anchor" aria-label="anchor" href="#venndir-0051900"></a></h2>
<div class="section level3">
<h3 id="changes-to-existing-functions-0-0-51-900">Changes to existing functions<a class="anchor" aria-label="anchor" href="#changes-to-existing-functions-0-0-51-900"></a></h3>
<ul><li>
<p><code><a href="../reference/venndir.html">venndir()</a></code></p>
<ul><li>
<strong>Change of behavior</strong>:<br>
Now for <code>overlap_type="agreement"</code> the sign for ‘agreement’ is not shown for single-set overlaps since it has no meaning when only one set is involved.<br>
The exception is when displaying items with only the “sign”, in that case the sign is still shown.</li>
<li>
<strong>Change of default</strong>: <code>item_style="marquee"</code> will now use marquee for item label rendering.</li>
<li>Added some elements to Venndir metadata: <code>unicode</code>, <code>curate_df</code>
</li>
<li>Now calls <code><a href="../reference/get_venndir_curate_df.html">get_venndir_curate_df()</a></code> to define <code>curate_df</code> upfront.</li>
</ul></li>
<li><p><code><a href="../reference/venn_meme.html">venn_meme()</a></code> new default <code>item_style="default"</code> which thereby uses marquee, also <code>"marquee"</code> is added as a recognized option.</p></li>
</ul></div>
<div class="section level3">
<h3 id="new-functions-0-0-51-900">new functions<a class="anchor" aria-label="anchor" href="#new-functions-0-0-51-900"></a></h3>
<ul><li>
<p><code><a href="../reference/get_venndir_curate_df.html">get_venndir_curate_df()</a></code></p>
<ul><li>Convenient way to get the curate_df used to convert signed values to Unicode (or non-Unicode) symbols, and associated colors.</li>
<li>
<code><a href="../reference/curate_venn_labels.html">curate_venn_labels()</a></code> now calls this function to define <code>curate_df</code>.</li>
</ul></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.50.900" id="venndir-0050900">venndir 0.0.50.900<a class="anchor" aria-label="anchor" href="#venndir-0050900"></a></h2>
<div class="section level3">
<h3 id="changes-0-0-50-900">Changes<a class="anchor" aria-label="anchor" href="#changes-0-0-50-900"></a></h3>
<ul><li>Big change to labels, now the default uses marquee for consistent Unicode arrows. Spacing was adjusted in legends and count labels.</li>
<li>Moved marquee(&gt;= 1.0.0) to Imports, new version avoids potential crash on MacOS.</li>
<li>Moved gridtext to Enhances, it is now deprecated.</li>
<li>Added tests for <code><a href="https://marquee.r-lib.org/reference/marquee_grob.html" class="external-link">marquee::marquee_grob()</a></code> across fonts with Unicode arrows, with <code><a href="https://rdrr.io/r/grid/grid.text.html" class="external-link">grid::textGrob()</a></code> showing arrows consistently for marquee and not grid.</li>
</ul></div>
<div class="section level3">
<h3 id="changes-to-existing-functions-0-0-50-900">Changes to existing functions<a class="anchor" aria-label="anchor" href="#changes-to-existing-functions-0-0-50-900"></a></h3>
<ul><li><p><code><a href="../reference/venndir.html">venndir()</a></code> - Reduced default border width, it was too distracting.</p></li>
<li>
<p><code><a href="../reference/assemble_venndir_label.html">assemble_venndir_label()</a></code></p>
<ul><li>New default <code>text_grob_type="marquee"</code>
</li>
<li>Rounded rectangles are scaled to the smallest font size, previously they used a small, fixed radius.</li>
<li>Label padding is more consistently adjusted for font sizes.</li>
</ul></li>
<li>
<p><code><a href="../reference/venndir_legender.html">venndir_legender()</a></code></p>
<ul><li>New default uses marquee.</li>
<li>Padding is adjusted by font size, making the table smaller by default.</li>
</ul></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.49.900" id="venndir-0049900">venndir 0.0.49.900<a class="anchor" aria-label="anchor" href="#venndir-0049900"></a></h2>
<div class="section level3">
<h3 id="changes-0-0-49-900">Changes<a class="anchor" aria-label="anchor" href="#changes-0-0-49-900"></a></h3>
<ul><li><p>Now requires the CRAN jamba, version 1.0.0 or higher. Woot.</p></li>
<li>
<p><code><a href="../reference/venndir_legender.html">venndir_legender()</a></code></p>
<ul><li>New argument <code>legend_headers</code> allows custom legend header labels.</li>
<li>Output to <code>legend_style="data.frame"</code> is now consistent.</li>
<li>Added tests to cover most custom options.</li>
</ul></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.48.900" id="venndir-0048900">venndir 0.0.48.900<a class="anchor" aria-label="anchor" href="#venndir-0048900"></a></h2>
<ul><li>bumped <code>colorjam&gt;=0.0.30.900</code> to pick up new color blending for additive alpha blending, useful for repeating a transparent color and having the color become more intense with each overlap.</li>
</ul><div class="section level3">
<h3 id="bug-fixes-0-0-48-900">bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-0-0-48-900"></a></h3>
<ul><li>Fixed error in <code><a href="../reference/venndir_legender.html">venndir_legender()</a></code> with empty signed lists.</li>
</ul></div>
<div class="section level3">
<h3 id="changes-to-existing-functions-0-0-48-900">changes to existing functions<a class="anchor" aria-label="anchor" href="#changes-to-existing-functions-0-0-48-900"></a></h3>
<ul><li>
<p><code><a href="../reference/find_venn_overlaps_JamPolygon.html">find_venn_overlaps_JamPolygon()</a></code> called by <code><a href="../reference/venndir.html">venndir()</a></code></p>
<ul><li>Color blending uses an improved algorithm in colorjam for additive alpha blending. For example, transparent red used for three sets will become progressively less transparent with each overlap. It should probably be more dramatic, but it’s a good start.</li>
</ul></li>
<li>
<p><code><a href="../reference/venn_meme.html">venn_meme()</a></code></p>
<ul><li>changed order that default text labels are applied to 3-way and 4-way Venn, with special case of 4-way proportional Venn (Euler) coded so the overlaps are filled clockwise. Effort to make it easy to copy Venn memes observed in the wild.</li>
</ul></li>
<li><p><code><a href="../reference/label_fill_JamPolygon.html">label_fill_JamPolygon()</a></code> calls updated version of <code><a href="../reference/sample_JamPolygon.html">sample_JamPolygon()</a></code></p></li>
<li>
<p><code><a href="../reference/sample_JamPolygon.html">sample_JamPolygon()</a></code></p>
<ul><li>Added <code>pattern="columns"</code> layout option to enforce all points on the same row, an alternative to the default hexagonal/triangular.</li>
<li>Updated logic to choose appropriate subset of points when more than <code>n</code> are defined. Now takes all of the first row when <code>spread=FALSE</code>. When <code>spread=TRUE</code> it spreads points by column, then row, which somehow improves the visual result, resulting in fewer weird clusters of points.</li>
</ul></li>
<li>
<p><code><a href="../reference/assemble_venndir_label.html">assemble_venndir_label()</a></code></p>
<ul><li>Label assembly was adjusted to add customizable label line spacing, and label padding. Added graphical tests.</li>
</ul></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.47.900" id="venndir-0047900">venndir 0.0.47.900<a class="anchor" aria-label="anchor" href="#venndir-0047900"></a></h2>
<ul><li>Added to Imports: <code>eulerr</code>, <code>gtable</code> (lightweight, also used by ggplot2)</li>
<li>Added to Suggests: <code>gridtext</code>, <code>marquee</code>
</li>
<li>Count labels use <code><a href="https://rdrr.io/r/grid/grid.text.html" class="external-link">grid::textGrob()</a></code> by default, since <code>gridtext</code> (kerning) and <code>marquee</code> (R crash on MacOS) have “limitations”.</li>
<li>Major refactoring of label grouping: uses <code>gtable</code> instead of <code>gTree</code>. Faster and more accurate height/width. Fixed labels being slightly cropped.</li>
<li>Simplified the Venndir data model, columns no longer used for labels.</li>
</ul><div class="section level3">
<h3 id="new-functions-0-0-47-900">new functions<a class="anchor" aria-label="anchor" href="#new-functions-0-0-47-900"></a></h3>
<ul><li>
<p><code>assemble_venndir_labels()</code> - new workhorse function creates grobs, assembles them into <code>gtable</code> format.</p>
<ul><li>Reverts <code>text_grob_type="marquee"</code> to <code>text_grob_type="textGrob"</code> on MacOS using R-4.4.1 or older.</li>
<li>Applies fontfamily,fontface,fontsize,fontcolor to each type of label, and multiple labels, each in order.</li>
</ul></li>
</ul></div>
<div class="section level3">
<h3 id="changes-to-existing-functions-0-0-47-900">changes to existing functions<a class="anchor" aria-label="anchor" href="#changes-to-existing-functions-0-0-47-900"></a></h3>
<ul><li>
<p><code><a href="../reference/render_venndir.html">render_venndir()</a></code></p>
<ul><li>Changed default <code>fontfamily="sans"</code> to avoid “Arial” which may not be present for all graphics devices.</li>
<li>Help docs include useful <code>...</code> arguments passed to internal functions.</li>
<li>Now calls <code>assemble_venndir_labels()</code>, not <code>draw_gridtext_groups()</code>.</li>
<li>Argument <code>group_labels</code> is dropped, all labels are grouped.</li>
</ul></li>
<li>
<p><code><a href="../reference/venn_meme.html">venn_meme()</a></code></p>
<ul><li>Changed default <code>item_style="text"</code> to avoid kerning issues with gridtext.</li>
</ul></li>
<li>
<p><code><a href="../reference/venndir_legender.html">venndir_legender()</a></code></p>
<ul><li>New default shows up/down counts when shown in Venn diagram.</li>
<li>New default shows table borders.</li>
<li>New argument <code>legend_color_style</code> controls color fill and border.</li>
<li>The “Size” column is now left-aligned, previously right-aligned.</li>
<li>Added light grey shading to “Total” row.</li>
<li>Added leading/trailing whitespace to all columns.</li>
</ul></li>
</ul></div>
<div class="section level3">
<h3 id="deprecated-functions-internal-0-0-47-900">deprecated functions (internal)<a class="anchor" aria-label="anchor" href="#deprecated-functions-internal-0-0-47-900"></a></h3>
<ul><li>
<code>grobs_exts()</code>, <code>grobs_stack()</code>, <code>grobs_tile()</code>, <code>grobs_xalign()</code>, <code>grobs_yalign()</code>, <code>draw_gridtext_groups()</code>
</li>
<li>removed: <code>reposition_venn_gridtext_labels()</code>
</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.46.900" id="venndir-0046900">venndir 0.0.46.900<a class="anchor" aria-label="anchor" href="#venndir-0046900"></a></h2>
<p>Legend labels can include signed counts and percentage values.</p>
<div class="section level3">
<h3 id="changes-to-existing-functions-0-0-46-900">changes to existing functions<a class="anchor" aria-label="anchor" href="#changes-to-existing-functions-0-0-46-900"></a></h3>
<ul><li>
<p><code><a href="../reference/venndir_legender.html">venndir_legender()</a></code> can optionally include signed counts and percentage.</p>
<ul><li>Renamed argument <code>include_total=TRUE</code> to <code>legend_total=TRUE</code>, for consistency with the next two arguments, and to help distinguish these options specific to the legend.</li>
<li>New argument <code>legend_signed=FALSE</code> defines whether to show signed counts. When <code>NULL</code> or <code>TRUE</code> it will display signed counts only when present, for example when <code>overlap_type</code> is not “overlap”. <code>legend_signed=FALSE</code> will always hide signed counts.</li>
<li>New argument <code>legend_percentage=NULL</code> detects whether to display percent total items, and is only used when <code>legend_total=TRUE</code>. When <code>show_labels</code> includes percentage, it is <code>TRUE</code>, otherwise <code>FALSE</code>.</li>
</ul></li>
<li>
<p><code><a href="../reference/venndir.html">venndir()</a></code></p>
<ul><li>Changed default <code>segment_distance=0.05</code> previously <code>0.1</code>, to shrink the distance of outside labels from the Venn polygons. Outside labels are now always justified relative to the plot, and so the labels can be placed closer, and the Venn diagram can be drawn slightly larger.</li>
</ul></li>
<li>
<p><code><a href="../reference/render_venndir.html">render_venndir()</a></code></p>
<ul><li>Changed default <code>expand_fraction=NULL</code> from <code>expand_fraction=0</code> so it detects whether to adjust the default condition when <code>draw_legend=TRUE</code>, and <code>main</code> is supplied as a plot title. It expands the default location, and shifts it slightly upward.</li>
</ul></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.45.900" id="venndir-0045900">venndir 0.0.45.900<a class="anchor" aria-label="anchor" href="#venndir-0045900"></a></h2>
<div class="section level3">
<h3 id="changes-to-existing-functions-0-0-45-900">changes to existing functions<a class="anchor" aria-label="anchor" href="#changes-to-existing-functions-0-0-45-900"></a></h3>
<ul><li>
<p><code><a href="../reference/render_venndir.html">render_venndir()</a></code></p>
<ul><li>Updated <code>item_cex</code> logic again, solidifying the association of <code>item_cex</code> values to specific, named Venn overlaps, which are also stored in <code>metadata</code> for persistence, and editing.</li>
<li>Related, fixed a bug causing <code>item_cex</code> to be applied incorrectly when there were empty items. Now it is applied by overlap name to keep proper sync.</li>
</ul></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.45.900" id="venndir-0045900-1">venndir 0.0.45.900<a class="anchor" aria-label="anchor" href="#venndir-0045900-1"></a></h2>
<div class="section level3">
<h3 id="changes-to-existing-functions-0-0-45-900-1">changes to existing functions<a class="anchor" aria-label="anchor" href="#changes-to-existing-functions-0-0-45-900-1"></a></h3>
<ul><li>
<p><code><a href="../reference/render_venndir.html">render_venndir()</a></code></p>
<ul><li>Improved the <code>item_cex</code> calculations, accounting for relative area of each shape, and number of items, also imposing a floor to prevent microscopic font sizes.</li>
<li>Fixed minor bug causing <code>item_cex</code> to be applied incorrectly when there were missing/NA labels.</li>
</ul></li>
<li>
<p><code><a href="../reference/venndir.html">venndir()</a></code></p>
<ul><li>default argument change: <code>font_cex=c(1, 1, 0.7)</code>, 0.7 is down from 0.8.</li>
<li>All <code>font_cex</code> values are secretly multiplied by 1.2 as a slight adjustment for the default condition.</li>
</ul></li>
<li>
<p><code><a href="../reference/sample_JamPolygon.html">sample_JamPolygon()</a></code></p>
<ul><li>New algorithm to place points inside a polygon, now using adaptive step sizes. Substantially fewer steps, much more accurate, and markedly faster. By being more accurate, it is guaranteed to use the optimal pattern, which finds the closest match to the number of points requested.</li>
<li>For <code>spread=FALSE</code> it no longer takes the first <code>n</code> points, it now takes the middle <code>n</code> points. Most cases the effect will be minimal.</li>
</ul></li>
<li>
<p><code><a href="../reference/label_fill_JamPolygon.html">label_fill_JamPolygon()</a></code></p>
<ul><li>Now has better working examples, which plot the labels for review.</li>
</ul></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.44.900" id="venndir-0044900">venndir 0.0.44.900<a class="anchor" aria-label="anchor" href="#venndir-0044900"></a></h2>
<div class="section level3">
<h3 id="new-functions-0-0-44-900">new functions<a class="anchor" aria-label="anchor" href="#new-functions-0-0-44-900"></a></h3>
<ul><li>
<p><code>Venndir</code> has new methods:</p>
<ul><li>
<code>show()</code> to summarize the contents</li>
<li>
<code>metadata()</code> and <code>metadata&lt;-</code>
</li>
<li>
<code>setlist()</code> - returns the original setlist</li>
<li><code>overlaplist()</code></li>
<li>
<code>overlapdf()</code> - returns <code>data.frame</code> of overlap items</li>
<li><code>signed_counts()</code></li>
<li>
<code>im()</code> - return incidence matrix format</li>
</ul></li>
<li>
<p><code><a href="../reference/modify_venndir_overlap.html">modify_venndir_overlap()</a></code>, <code><a href="../reference/modify_venndir_overlap.html">highlight_venndir_overlap()</a></code></p>
<ul><li>Customize overlap set visual features, such as fill color, border, fontsize, font color.</li>
<li>The highlight function streamlines the options to draw a distinctive border around one or more overlap sets.</li>
</ul></li>
</ul></div>
<div class="section level3">
<h3 id="changes-to-existing-functions-0-0-44-900">changes to existing functions<a class="anchor" aria-label="anchor" href="#changes-to-existing-functions-0-0-44-900"></a></h3>
<ul><li><p>General changes to remove warnings, for example <code><a href="../reference/minus_JamPolygon.html">minus_JamPolygon()</a></code> was throwing warnings with empty polygon input or output.</p></li>
<li><p>Added tests for <code><a href="../reference/area_JamPolygon.html">area_JamPolygon()</a></code> and <code><a href="../reference/labelr_JamPolygon.html">labelr_JamPolygon()</a></code> for a couple weird cases with nested holes, nested-nested solid polygons.</p></li>
<li>
<p><code><a href="../reference/venndir.html">venndir()</a></code>, <code><a href="../reference/render_venndir.html">render_venndir()</a></code></p>
<ul><li>Now accepts incidence matrix input, sets as colnames, items as rows, and <code>c(-1, 0, 1)</code> values.</li>
<li>Added to metadata slot for persistence, though some might be added directly to <code>label_df</code> for persistence for each overlap label: <code>main</code>, <code>template</code>, <code>overlap_type</code>, <code>draw_legend</code>, <code>item_buffer</code>, <code>item_cex</code>, <code>item_style</code>, <code>item_degrees</code> <code>show_segments</code>, <code>segment_buffer</code>
</li>
<li>
<code><a href="../reference/render_venndir.html">render_venndir()</a></code> defaults are <code>NULL</code> so they will pull from the “metadata” slot, otherwise it assigns the previous defaults. It is now possible to make <code>Venndir</code> object, then render separately and use the original <code>show_segments</code> and <code>segment_buffer</code> values.</li>
</ul></li>
<li>
<p><code><a href="../reference/get_venn_polygon_shapes.html">get_venn_polygon_shapes()</a></code></p>
<ul><li>Very small nudge to default 4-way elliptical Venn shapes to prevent rounding error overlaps at the ends of sets 2 and 3, overlapping the side edge of sets 4 and 1, respectively. Same thing, nudging sets 1 and 4 to prevent rounding error overlaps at the bottom edge. Previously there were miniscule “unique” shapes where the cornered edges slightly criss-crossed, since the ellipses are drawn with N vertices, and not infinite number of vertices. Possible side effect is that item fill for sets 1 and 4 may now also use the tiny section at the bottom for item labels.</li>
</ul></li>
<li>
<p><code><a href="../reference/signed_overlaps.html">signed_overlaps()</a></code></p>
<ul><li>Slightly changed how <code>keep_item_order=TRUE</code> is implemented, making it markedly faster for larger lists.</li>
</ul></li>
<li>
<p><code><a href="../reference/labelr_JamPolygon.html">labelr_JamPolygon()</a></code></p>
<ul><li>For multi-part polygons, it now uses the largest disconnected polygon from the set, instead of using polygons in order. Apparently <code><a href="https://jolars.github.io/polylabelr//reference/poi.html" class="external-link">polylabelr::poi()</a></code> uses the first polygon provided, which is sometimes comically small.</li>
<li>The new method checks for multi-part polygons, then determines whether there are multiple parent polygons. For polygons with holes, the sub-part polygons (holes, or nested solid polygons within a hole) need to be maintained with the appropriate parent. If there is only one parent, use them all as-is, since <code><a href="https://jolars.github.io/polylabelr//reference/poi.html" class="external-link">polylabelr::poi()</a></code> works properly there. Otherwise, use the parent polygon with the largest net area.</li>
<li>This update is an improvement for most Venn diagrams, but may not be optimal for polygon purists, since the polygon with largest area may not be the “most labelable” polygon. That said, <code><a href="https://jolars.github.io/polylabelr//reference/poi.html" class="external-link">polylabelr::poi()</a></code> ignores all but the first polygon anyway.</li>
</ul></li>
<li>
<p><code><a href="../reference/label_fill_JamPolygon.html">label_fill_JamPolygon()</a></code></p>
<ul><li>improved default condition for item buffer adjustment, it now only uses the number of items to make the buffer more restrictive, no longer uses the relative polygon area. (That adjustment was conflicting with the item-shrinkage approach.)</li>
</ul></li>
<li>
<p><code><a href="../reference/nudge_JamPolygon.html">nudge_JamPolygon()</a></code></p>
<ul><li>New argument <code>scale</code> so this function accomplishes all manipulations: <code>nudge</code>, <code>rotate_degrees</code>, and <code>scale</code>.</li>
</ul></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.43.900" id="venndir-0043900">venndir 0.0.43.900<a class="anchor" aria-label="anchor" href="#venndir-0043900"></a></h2>
<div class="section level3">
<h3 id="changes-to-existing-functions-0-0-43-900">changes to existing functions<a class="anchor" aria-label="anchor" href="#changes-to-existing-functions-0-0-43-900"></a></h3>
<ul><li>
<p><code><a href="../reference/label_fill_JamPolygon.html">label_fill_JamPolygon()</a></code></p>
<ul><li>Minor adjustment to how the item buffer is determined with decreasing number of items. Slightly more centralized with 3 or fewer items.</li>
</ul></li>
<li>
<p><code><a href="../reference/render_venndir.html">render_venndir()</a></code> (and <code><a href="../reference/venndir.html">venndir()</a></code>)</p>
<ul><li>Now accepts <code>item_buffer</code> as a vector, recycled to all overlap sets.</li>
<li>No longer sorts item labels, instead they are expected to be sorted (or not) by <code><a href="../reference/signed_overlaps.html">signed_overlaps()</a></code>.</li>
</ul></li>
<li>
<p><code><a href="../reference/signed_overlaps.html">signed_overlaps()</a></code></p>
<ul><li>New argument <code>keep_item_order=FALSE</code> by default sorts all items using <code><a href="https://jmw86069.github.io/jamba/reference/mixedSort.html" class="external-link">jamba::mixedSort()</a></code> (proper alphanumeric sort). When <code>keep_item_order=TRUE</code> it will keep items in the same order they originally appeared, which allows a fixed item label order when displaying item labels.</li>
</ul></li>
<li>
<p><code><a href="../reference/venn_meme.html">venn_meme()</a></code></p>
<ul><li>New argument <code>keep_item_order=TRUE</code> whose default will keep each overlap label in the order they are provided. Usually there is only one label per overlap, but if it is provided as a <code>list</code> with multiple entries, they will be rendered in the order they are provided. Motivated by efforts to “reproduce the Venn diagram from a paper.”</li>
</ul></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.42.900" id="venndir-0042900">venndir 0.0.42.900<a class="anchor" aria-label="anchor" href="#venndir-0042900"></a></h2>
<div class="section level3">
<h3 id="changes-to-existing-functions-0-0-42-900">changes to existing functions<a class="anchor" aria-label="anchor" href="#changes-to-existing-functions-0-0-42-900"></a></h3>
<ul><li>
<p><code><a href="../reference/check_Venndir.html">check_Venndir()</a></code> - validation function for <code>Venndir</code> objects.</p>
<ul><li>Fixed error when validating <code>Venndir</code>, applying logical criteria to vector with size &gt; 1.</li>
</ul></li>
<li>
<p><code><a href="../reference/venn_meme.html">venn_meme()</a></code></p>
<ul><li>Changed default <code>item_cex=1</code> consistent with improvements to item label scaling by Venn overlap polygon size.</li>
</ul></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.41.950" id="venndir-0041950">venndir 0.0.41.950<a class="anchor" aria-label="anchor" href="#venndir-0041950"></a></h2>
<div class="section level3">
<h3 id="changes-to-existing-functions-0-0-41-950">changes to existing functions<a class="anchor" aria-label="anchor" href="#changes-to-existing-functions-0-0-41-950"></a></h3>
<ul><li>
<p><code><a href="../reference/render_venndir.html">render_venndir()</a></code></p>
<ul><li>now applies <code>halign=0.5</code> for main count labels, which helps display percentage labels centered under the main count.</li>
<li>Percentage labels are rounded to integer values, except that values between 0 and 1 will show one digit, excluding 0 and 1.</li>
</ul></li>
<li>
<p><code><a href="../reference/venndir_label_style.html">venndir_label_style()</a></code></p>
<ul><li>new argument <code>extra_styles</code> intended to customize the text style for different label types. Currently <code>extra_styles=list(percent=c("***", "***"))</code> will format percentage labels with bold,italic font.</li>
</ul></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.41.900" id="venndir-0041900">venndir 0.0.41.900<a class="anchor" aria-label="anchor" href="#venndir-0041900"></a></h2>
<div class="section level3">
<h3 id="overall-0-0-41-900">overall<a class="anchor" aria-label="anchor" href="#overall-0-0-41-900"></a></h3>
<ul><li>Add plot titles!</li>
<li>Arrange signed counts in single column, under main counts.</li>
<li>Outside Venn labels default slightly toward the top, rather than the sides.</li>
<li>
<code><a href="../reference/nudge_venndir_label.html">nudge_venndir_label()</a></code> is convenient for moving inside or outside labels.</li>
</ul></div>
<div class="section level3">
<h3 id="changes-to-existing-functions-0-0-41-900">changes to existing functions<a class="anchor" aria-label="anchor" href="#changes-to-existing-functions-0-0-41-900"></a></h3>
<ul><li>
<p><code>Venndir</code> S4 object changes.</p>
<ul><li>New slot name <code>"metadata"</code> to store miscellaneous settings. All efforts are made to accept older Venndir objects without this slot available.</li>
</ul></li>
<li>
<p><code><a href="../reference/venndir.html">venndir()</a></code></p>
<ul><li>New argument <code>main</code> to draw a plot title. It uses <code>gridtext</code> to enable custom Markdown font options. When provided, <code>main</code> is also stored in <code>Venndir@metadata$main</code> for persistence.</li>
<li>New argument <code>template="wide"</code> is used to arrange count and signed count labels together: <code>"wide"</code> places them side-by-side, <code>"tall"</code> places them in one column. When provided, <code>template</code> is also stored in <code>Venndir@metadata$template</code> for persistence.</li>
<li>New argument <code>center</code> passed to <code><a href="../reference/label_outside_JamPolygon.html">label_outside_JamPolygon()</a></code>. The default <code>center=c(0, -0.15)</code> tends to place labels at the top rather than the left/right sides by default. The default use case is improved.</li>
</ul></li>
<li>
<p><code><a href="../reference/render_venndir.html">render_venndir()</a></code></p>
<ul><li>Now properly converts set names with <code>"\n"</code> to use <code>"&lt;br&gt;"</code> as originally intended, so it “just works”.</li>
<li>New arguments <code>main</code> and <code>template</code> as above, except that when no argument is defined, it will use <code>Venndir@metadata$template</code> or <code>Venndir@metadata$main</code> if defined.</li>
</ul></li>
<li>
<p><code><a href="../reference/nudge_venndir_label.html">nudge_venndir_label()</a></code></p>
<ul><li>New argument <code>offset_list</code> to define a list of offsets to one or more sets, where set is defined by <code>names(offset_list)</code>.</li>
<li>New arguments <code>align_x</code>,<code>align_y</code> to apply uniform alignment of labels to the top/bottom/left/right of a set of labels. Useful to ensure labels are the same y-position and not slightly different heights.</li>
</ul></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.40.900" id="venndir-0040900">venndir 0.0.40.900<a class="anchor" aria-label="anchor" href="#venndir-0040900"></a></h2>
<ul><li>Updated label positioning logic, silenced some unintended verbose output from <code><a href="../reference/render_venndir.html">render_venndir()</a></code>.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.39.950" id="venndir-0039950">venndir 0.0.39.950<a class="anchor" aria-label="anchor" href="#venndir-0039950"></a></h2>
<ul><li>
<p>Small change to use <code>gridGeometry</code> 0.4.1 from Github until released to CRAN, this version fixes rare error caused by proportional diagram and innerborder, when the delta from two circles creates a small line with zero area. Will update again once it is available on CRAN. Thanks pmur002 for the rapid fix!</p>
<ul><li>Updated tests from 0.0.39.900 which skipped the innerborder to circumvent the bug in the tests that uncovered the error.</li>
</ul></li>
<li>
<p><code><a href="../reference/buffer_JamPolygon.html">buffer_JamPolygon()</a></code></p>
<ul><li>default argument <code>steps=20</code>, formerly <code>steps=200</code> which was (and is) the predominant rate-limiting step.</li>
</ul></li>
<li><p><code><a href="../reference/nudge_JamPolygon.html">nudge_JamPolygon()</a></code> now recognizes <code>rotate_degrees</code> fixing the bug that previously did not allow rotating the Venn diagram polygons.</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.39.900" id="venndir-0039900">venndir 0.0.39.900<a class="anchor" aria-label="anchor" href="#venndir-0039900"></a></h2>
<div class="section level3">
<h3 id="changes-to-existing-functions-0-0-39-900">changes to existing functions<a class="anchor" aria-label="anchor" href="#changes-to-existing-functions-0-0-39-900"></a></h3>
<ul><li>
<p><code><a href="../reference/render_venndir.html">render_venndir()</a></code></p>
<ul><li>Signed output now uses <code>":"</code> instead of <code>": "</code> between the directional arrow and the count, for example <code>"^^:20"</code> instead of <code>"^^: 20"</code>. Somehow the whitespace calculation is inconsistent, causing some labels to be wider than others with <code>gridtext::richtext_grob()</code>, with much wider whitespace than anticipated. The effect was inconsistent even on the same machine, between RStudio and R console, and differed across other machines also. Workarounds include choosing different fonts, apparently some provide more reliable whitespace calculations. The change only occurs during rendering when <code>grobs</code> are created. The underlying <code>Venndir</code> data is not changed.</li>
</ul></li>
<li>
<p><code><a href="../reference/plot.JamPolygon.html">plot.JamPolygon()</a></code>, affecting <code><a href="../reference/venndir.html">venndir()</a></code> and <code><a href="../reference/render_venndir.html">render_venndir()</a></code></p>
<ul><li><p>Now renders borders using <code>gridGeometry</code> thanks to suggestion from pmur002. Borders are more consistent, without small visual artifacts.</p></li>
<li><p>Added <code>"outerborder"</code> as a formal border type.</p></li>
<li>
<p>All three types of borders can be rendered, in order: outer, inner, border</p>
<ul><li>“outerborder” - begins at the outer edge of the boundary</li>
<li>“border” - is centered on the boundary itself</li>
<li>“innerborder” - begins at the inner edge of the boundary</li>
<li>when <code>border</code> is not drawn, either the innerborder or outerborder are drawn on the border itself to prevent a tiny artifact gap between the innerborder and outerborder.</li>
</ul></li>
</ul></li>
<li>
<p><code><a href="../reference/venndir.html">venndir()</a></code></p>
<ul><li>The <code>Venndir</code> object now uses <code>outerborder</code> instead of <code>border</code>, and sets <code>border</code> to <code>NA</code>.</li>
<li>New argument <code>lwd</code> controls default border line width.</li>
<li>
<code>unicode</code> (silent argument passed to <code><a href="../reference/curate_venn_labels.html">curate_venn_labels()</a></code> controls the Unicode character with up/down arrows, disagreement, etc. You can supply <code>unicode=2</code> for alternate symbols, though they are font-dependent, R-dependent, and terminal-dependent. All things must work well together (apparently). Use <code>unicode=FALSE</code> for simple text.</li>
<li>New default <code>poly_alpha=0.6</code> makes background less intense.</li>
<li>Now calls <code><a href="../reference/make_color_contrast.html">make_color_contrast()</a></code> properly without forcing saturation, previously caused blue to become cyan instead of light blue.</li>
</ul></li>
<li><p><code><a href="../reference/sample_JamPolygon.html">sample_JamPolygon()</a></code> changed <code>n_ratio=1</code> after testing and disliking the previous <code>n_ratio=4</code>.</p></li>
<li>
<p><code><a href="../reference/venndir_to_df.html">venndir_to_df()</a></code> gained some new features:</p>
<ul><li>
<p>new argument <code>df_format</code> with three formats:</p>
<ul><li>
<code>"hits"</code> - essentially a hit matrix with 1, 0, -1 indicating direction</li>
<li>
<code>"items"</code> - each column of a data.frame contains items for a Venn overlap.</li>
<li>
<code>"wide"</code> - intended as an RMarkdown summary - it uses grouped rows to display items in each Venn overlap. Not sure it works very well.</li>
</ul></li>
<li>
<p>argument <code>return_type</code>:</p>
<ul><li>
<code>"data.frame"</code> (default) - returns a data.frame</li>
<li>
<code>"kable"</code> - returns a colorized <code>kable</code> table for RMarkdown HTML</li>
</ul></li>
</ul></li>
<li>
<p><code><a href="../reference/textvenn.html">textvenn()</a></code></p>
<ul><li>now returns column <code>"color"</code> mainly used for <code><a href="../reference/venndir_to_df.html">venndir_to_df()</a></code>
</li>
<li>calls <code><a href="https://jmw86069.github.io/colorjam/reference/col_linear_xf.html" class="external-link">colorjam::col_linear_xf()</a></code> for better colorization of counts when <code>color_by_counts=TRUE</code>.</li>
</ul></li>
<li>
<p><code><a href="../reference/get_venn_polygon_shapes.html">get_venn_polygon_shapes()</a></code></p>
<ul><li>Changed default <code>return_type="JamPolygon"</code> since transition to JamPolygon, removed the option for <code>"polygon_list"</code>.</li>
</ul></li>
<li><p><code><a href="../reference/polygon_circles.html">polygon_circles()</a></code>, <code><a href="../reference/polygon_ellipses.html">polygon_ellipses()</a></code> both now return <code>JamPolygon</code>.</p></li>
</ul></div>
<div class="section level3">
<h3 id="new-functions-0-0-39-900">new functions<a class="anchor" aria-label="anchor" href="#new-functions-0-0-39-900"></a></h3>
<ul><li>
<code><a href="../reference/nudge_JamPolygon.html">nudge_JamPolygon()</a></code> - simple function to adjust <code>JamPolygon</code> polygons</li>
</ul></div>
<div class="section level3">
<h3 id="added-generic-functions-0-0-39-900">added generic functions<a class="anchor" aria-label="anchor" href="#added-generic-functions-0-0-39-900"></a></h3>
<ul><li><p>Cleaned up some generic function logic, probably more to do.</p></li>
<li>
<p><code>Venndir</code> objects</p>
<ul><li><code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code></li>
<li><code><a href="https://rdrr.io/r/base/length.html" class="external-link">length()</a></code></li>
</ul></li>
<li>
<p><code><a href="../reference/JamPolygon-methods.html">rbind2.JamPolygon()</a></code></p>
<ul><li>This function was enhanced to be able to combine multiple <code>JamPolygon</code> objects either in a single <code>list</code>, multiple <code>list</code>, and will now retain all colnames across all <code>JamPolygon</code> objects.</li>
</ul></li>
</ul></div>
<div class="section level3">
<h3 id="removed-deprecated-functions-mostly-related-to-polygon_list-data-format-0-0-39-900">removed deprecated functions, mostly related to polygon_list data format<a class="anchor" aria-label="anchor" href="#removed-deprecated-functions-mostly-related-to-polygon_list-data-format-0-0-39-900"></a></h3>
<p>The polygon_list format loosely conformed to <code>polyclip</code> data input/output, but had several exceptions that motivated me to use <code>JamPolygon</code>: simple polygons encoded as list, complex polygons encoded as nested list; solid polygon encoded as clockwise points, holes encoded counterclockwise.</p>
<ul><li><code>bbox_polygon_list()</code></li>
<li><code>get_largest_polygon_list()</code></li>
<li><code>intersect_polygon_list()</code></li>
<li><code>labelr_polygon_list()</code></li>
<li><code>minus_polygon_list()</code></li>
<li><code>plot_polygon_list()</code></li>
<li><code>polygon_list_labelr()</code></li>
<li><code>rescale_polygon_list()</code></li>
<li><code>union_polygon_list()</code></li>
<li><code>get_venn_shapes()</code></li>
<li><code>eulerr_to_polygon_list()</code></li>
<li><code>polygon_areas()</code></li>
<li><code>nudge_polygon_coords()</code></li>
<li><code>nudge_polygon_list()</code></li>
<li><code>polygon_list_to_xy_list()</code></li>
<li><code>xy_list_to_polygon_list()</code></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.38.900" id="venndir-0038900">venndir 0.0.38.900<a class="anchor" aria-label="anchor" href="#venndir-0038900"></a></h2>
<div class="section level3">
<h3 id="changes-to-existing-functions-0-0-38-900">changes to existing functions<a class="anchor" aria-label="anchor" href="#changes-to-existing-functions-0-0-38-900"></a></h3>
<ul><li>
<p><code><a href="../reference/sample_JamPolygon.html">sample_JamPolygon()</a></code></p>
<ul><li>default changed to <code>spread=TRUE</code> so that item labels are more evenly distributed by default</li>
<li>new argument <code>n_ratio</code> to control the target number of points, from which <code>spread=TRUE</code> will choose <code>n</code> evenly spaced. For now, the ratio is set <code>n_ratio=5</code> which seems to perform well.</li>
</ul></li>
<li>
<p><code><a href="../reference/label_fill_JamPolygon.html">label_fill_JamPolygon()</a></code></p>
<ul><li>used to display item labels inside the Venn diagram, passes <code>...</code> to <code><a href="../reference/sample_JamPolygon.html">sample_JamPolygon()</a></code>
</li>
</ul></li>
<li>
<p><code><a href="../reference/venndir.html">venndir()</a></code></p>
<ul><li>
<p>Change: <code>names(setlist)</code> will have any characters <code>":"</code> changed to <code>"."</code>.</p>
<ul><li>The <code>":"</code> character is used by <code>grid</code> as a delimited to name <code>grobs</code>, which means <code>names(setlist)</code> that also contain <code>":"</code> create confusion. Easiest workaround is to maintain <code>":"</code> characters in the <code>setlist_labels</code> and <code>legend_labels</code> (for display) but to remove the <code>":"</code> characters from the internal representation of these names.</li>
<li>In principle this should not create new bugs, however it is possible something else depends upon the internal names to match the original setlist names.</li>
</ul></li>
</ul></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.37.900" id="venndir-0037900">venndir 0.0.37.900<a class="anchor" aria-label="anchor" href="#venndir-0037900"></a></h2>
<div class="section level3">
<h3 id="changes-0-0-37-900">changes<a class="anchor" aria-label="anchor" href="#changes-0-0-37-900"></a></h3>
<ul><li>Added tests for hidden count labels, hidden signed count labels, and corresponding overlap counts for good measure.</li>
<li>Added laundry list of topics to document.</li>
<li>Removed <code>gridtext_richtext_grob()</code> and supporting functions.</li>
</ul></div>
<div class="section level3">
<h3 id="changes-to-existing-functions-0-0-37-900">changes to existing functions<a class="anchor" aria-label="anchor" href="#changes-to-existing-functions-0-0-37-900"></a></h3>
<ul><li>
<p><code><a href="../reference/plot.JamPolygon.html">plot.JamPolygon()</a></code></p>
<ul><li>New argument <code>render_thin_border</code> to control whether the thin line between inner and outer border is drawn. It may be hidden by default in future.</li>
<li>
<code>buffer</code> can now be vectorized, to shift the plot along each side in order: (bottom, left, top, right). The default applies buffer to all side, but sometimes it is useful to shift the plot away from one side, for example <code>buffer=c(0.1, 0, 0, 0, 0)</code>. It still maintains proper aspect ratio.</li>
<li>Added checks for line width 0, and empty <code>""</code> line colors, both are handled silently by drawing either line with width 0.01, or transparent color, respectively.</li>
</ul></li>
<li>
<p><code><a href="../reference/render_venndir.html">render_venndir()</a></code></p>
<ul><li>passes <code>expand_fraction</code> to <code>plot.JamPolygon</code> using argument <code>buffer</code> so it can shift the Venn diagram off-center.</li>
<li>now passes <code>...</code> to <code><a href="../reference/plot.JamPolygon.html">plot.JamPolygon()</a></code> so that optional arguments will be recognized.</li>
</ul></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.36.900" id="venndir-0036900">venndir 0.0.36.900<a class="anchor" aria-label="anchor" href="#venndir-0036900"></a></h2>
<p>Substantial changes.</p>
<p>The method of assembling labels now arranges labels adjacent to each other, removing an important dependency on internal <code>gridtext</code> functions (which are not permitted in CRAN/Bioconductor). It also allows more flexible labeling in future, e.g. different overlap metrics, optional overlap names.</p>
<p>Labels use a more aesthetic layout: * The main set label is always top-center of a group of labels. * Count labels are split into left/right columns, for main/signed counts, respectively. They are middle-aligned left-to-right. * Set label and count labels are arranged top/bottom, also centered. * One region is defined for the group of labels. * The previous arrangement can be see with <code>group_labels=FALSE</code>.</p>
<p>All graphics are returned as <code>grid</code> graphical objects (grobs), which enables flexible options for drawing the figure. For example it can be drawn inside a <code><a href="https://rdrr.io/r/grid/viewport.html" class="external-link">grid::viewport</a></code>, or included with <code>patchwork</code> or <code>cowplot</code> as a figure panel. Or, the <code>grobs</code> can be directly manipulated.</p>
<div class="section level3">
<h3 id="bug-fixes-0-0-36-900">Bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-0-0-36-900"></a></h3>
<ul><li>
<p><code><a href="../reference/venndir_label_style.html">venndir_label_style()</a></code></p>
<ul><li>Fixed issue that associated a count label to an interior overlap set, a rare occurrence. Caused by the method used to associate an orphan set label, where there is no “uniquely set_B” overlap polygon so it associates “set_B” to an overlap region that contains set_B. That method incorrectly also allowed an overlap count to appear for sets that do not have an overlap region - which occurs when proportional circles fail to find a solution that contains every overlap observed. The fix is to hide overlap count labels when the overlap is not represented, while still displaying the main set label when some overlap exists that contains that set.</li>
</ul></li>
</ul></div>
<div class="section level3">
<h3 id="changes-to-existing-functions-0-0-36-900">changes to existing functions<a class="anchor" aria-label="anchor" href="#changes-to-existing-functions-0-0-36-900"></a></h3>
<ul><li>
<p><code><a href="../reference/venndir.html">venndir()</a></code></p>
<ul><li>returns attributes <code>"gtree"</code>, <code>"grob_list"</code>, <code>"viewport"</code> when <code>do_plot=TRUE</code>
</li>
<li>assigns <code>padding</code> and <code>radius</code> using the same values.</li>
</ul></li>
<li>
<p><code><a href="../reference/render_venndir.html">render_venndir()</a></code></p>
<ul><li>Returns attributes <code>"gtree"</code>, <code>"grob_list"</code>, <code>"viewport"</code>
</li>
<li>The figure is rendered with one call to <code><a href="https://rdrr.io/r/grid/grid.draw.html" class="external-link">grid::grid.draw()</a></code> instead of being done piecemeal, making it appear faster.</li>
<li>No longer calls custom <code>gridtext_richtext_grob()</code>, since that also calls functions internal to the gridtext package. It was done in order to supply vector of different <code>padding</code> values.</li>
<li>Instead calls <code>gridtext::richtext_grob()</code> in a list.</li>
</ul></li>
<li>
<p><code><a href="../reference/venndir_legender.html">venndir_legender()</a></code></p>
<ul><li>Now left-aligns the text label columns, and right-aligns the count value column.</li>
<li>New argument <code>legend_padding</code> to control the table cell size.</li>
<li>A bug in <code><a href="https://rdrr.io/pkg/gridExtra/man/tableGrob.html" class="external-link">gridExtra::tableGrob()</a></code> calculation of padding caused left-aligned text to appear at the very left edge of the text box, without a padded region shown. The padding is only used to extend the box itself, but still allows the label to be aligned relative to the extended box, and not the inner region. This bug was sidestepped by enfocing leading/trailing whitespace.</li>
</ul></li>
<li>
<p><code><a href="../reference/plot.JamPolygon.html">plot.JamPolygon()</a></code></p>
<ul><li>Modified to return <code>grid</code> graphical objects, and the <code>viewport</code> defined.</li>
<li>New argument <code>do_draw</code> to control whether the figure is drawn, or only the graphical objects should be returned.</li>
</ul></li>
<li><p><code>draw_gridtext_groups()</code> - substantial changes, most all previous processing has been changed. It is used internally.</p></li>
</ul></div>
<div class="section level3">
<h3 id="new-internal-functions-0-0-36-900">New internal functions<a class="anchor" aria-label="anchor" href="#new-internal-functions-0-0-36-900"></a></h3>
<p>Not terribly exciting, but useful nonetheless. Several new functions were added to help manipulate <code>grid</code> grobs, to stack, tile, xalign, yalign grobs relative to each other, using units that keep them aligned even when the plot device is resized. These functions are probably dependent upon <code>gridtext</code> labels, since they are used to create individual overlap and count labels, and define <code>xext</code>,<code>yext</code> with the “true” <code>grid</code> dimensions for each label. These functions make it possible to center the grouped label on the original label point, or align the left column with the right column, etc.</p>
</div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.35.900" id="venndir-0035900">venndir 0.0.35.900<a class="anchor" aria-label="anchor" href="#venndir-0035900"></a></h2>
<ul><li>Added LICENSE and LICENSE.md.</li>
</ul><div class="section level3">
<h3 id="changes-to-existing-functions-0-0-35-900">changes to existing functions<a class="anchor" aria-label="anchor" href="#changes-to-existing-functions-0-0-35-900"></a></h3>
<ul><li>
<p><code><a href="../reference/venndir.html">venndir()</a></code> - relatively minor update, fixes unnamed <code>setlist</code> or <code>setlist</code> with duplicate or <code>NA</code> names.</p>
<ul><li>Validates that <code>names(setlist)</code> are defined, otherwise integer numbers are defined in order.</li>
<li>Validates that <code>names(setlist)</code> are unique, and not <code>NA</code>, otherwise it calls <code><a href="https://jmw86069.github.io/jamba/reference/makeNames.html" class="external-link">jamba::makeNames()</a></code> to create unique names.</li>
</ul></li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-0-0-35-900">bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-0-0-35-900"></a></h3>
<ul><li>
<p>Fixed bug in <code><a href="../reference/venndir.html">venndir()</a></code> when using <code>sets</code> to define a subset from <code>setlist</code> causing the colors to be out of sync.</p>
<ul><li>Added tests to confirm duplicated or <code>NA</code> for <code>names(setlist)</code> are handled.</li>
</ul></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.34.900" id="venndir-0034900">venndir 0.0.34.900<a class="anchor" aria-label="anchor" href="#venndir-0034900"></a></h2>
<div class="section level3">
<h3 id="changes-to-existing-functions-0-0-34-900">changes to existing functions<a class="anchor" aria-label="anchor" href="#changes-to-existing-functions-0-0-34-900"></a></h3>
<p>Main goal is to fix bug associated with empty or nested <code>setlist</code> entries when used with <code>proportional=TRUE</code>. This update is somewhat of a risk, several core components were updated in <code><a href="../reference/venndir.html">venndir()</a></code>, <code><a href="../reference/render_venndir.html">render_venndir()</a></code> and <code><a href="../reference/venndir_label_style.html">venndir_label_style()</a></code>, which could impact a number of downstream steps. Corresponding <code>testthis</code> entries have been added, hopefully to prevent occurrence of new bugs.</p>
<ul><li><p>Added <code>vdiffr</code> to R package Suggests.</p></li>
<li>
<p><code><a href="../reference/venndir.html">venndir()</a></code>, <code><a href="../reference/render_venndir.html">render_venndir()</a></code>, <code><a href="../reference/venndir_label_style.html">venndir_label_style()</a></code></p>
<ul><li>All three functions now recognize a new column in <code>Venndir</code> slot <code>jps</code> with column <code>"ref_polygon"</code>. This new column associates the set name with an overlap polygon, which points the set label to the appropriate part of a polygon. For example, by default “set_A” will point to the overlap_set “set_A” which has no overlaps with other sets. For proportional diagrams, sometimes “set_A” is fully encompassed by “set_B”, in which case the label “set_A” will point to the overlap polygon which is (1) not empty of course, and (2) has the fewest overlaps.</li>
<li>Without this association, the set label was not displayed, which was not intended.</li>
<li>Further, the previous implementation was incorrect, causing some labels to appear in the wrong position. The line segment from label to overlap polygon still pointed to the correct position, but it was awkwardly placed outside the circle.</li>
<li>It turns out that moving the set label affected other assumptions of the data model, namely that the set name “set_A” may be associated with <code>overlap_set</code> by a different name, for example <code>"set_A&amp;set_B"</code>. That change broke the label grouping logic, and needed to be resolved.</li>
</ul></li>
</ul></div>
<div class="section level3">
<h3 id="added-test-cases-0-0-34-900">Added test cases<a class="anchor" aria-label="anchor" href="#added-test-cases-0-0-34-900"></a></h3>
<ul><li>More <code>testthis</code> scenarios have been added, including the first examples that test consistent graphical output. Mainly these tests focus on proportional 2-, 3-, and 4-way Venn and Euler diagrams, with empty sets, or nested sets, or both.</li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-0-0-34-900">bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-0-0-34-900"></a></h3>
<ul><li>
<p><code><a href="../reference/venn_meme.html">venn_meme()</a></code></p>
<ul><li>Partial fix for a bug that caused <code>item_cex</code> to be ignored.</li>
</ul></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.33.900" id="venndir-0033900">venndir 0.0.33.900<a class="anchor" aria-label="anchor" href="#venndir-0033900"></a></h2>
<ul><li>Removed <code>matrixStats</code> from dependencies.</li>
</ul><div class="section level3">
<h3 id="changes-to-existing-functions-0-0-33-900">changes to existing functions<a class="anchor" aria-label="anchor" href="#changes-to-existing-functions-0-0-33-900"></a></h3>
<ul><li>
<p><code><a href="../reference/venndir.html">venndir()</a></code></p>
<ul><li>New arguments: <code>setlist_labels</code> and <code>legend_labels</code> that use <code>names(setlist)</code> by default, but can be adjusted to be display-friendly. The <code>setlist_labels</code> are displayed on the Venn diagram itself. The <code>legend_labels</code> are displayed only in the Venn legend via <code><a href="../reference/venndir_legender.html">venndir_legender()</a></code>.</li>
</ul></li>
<li>
<p><code><a href="../reference/list2im_opt.html">list2im_opt()</a></code> has a new default argument <code>do_sparse=FALSE</code>.</p>
<ul><li>Previously all incidence matrix output used compressed <code>Matrix</code> class when available. In almost all cases, I immediately converted back to <code>matrix</code> or used <code>do_sparse=FALSE</code> anyway. Before wider use of the package, best to improve the default condition.</li>
</ul></li>
<li><p>Added examples to <code><a href="../reference/rescale_coordinates.html">rescale_coordinates()</a></code>.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.32.900" id="venndir-0032900">venndir 0.0.32.900<a class="anchor" aria-label="anchor" href="#venndir-0032900"></a></h2>
<div class="section level3">
<h3 id="bug-fixes-0-0-32-900">Bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-0-0-32-900"></a></h3>
<ul><li>
<p><code><a href="../reference/render_venndir.html">render_venndir()</a></code></p>
<ul><li>Fixed regression that did not recognize updated output from <code><a href="../reference/venndir.html">venndir()</a></code>, addressing issues <a href="https://github.com/jmw86069/venndir/issues/7" class="external-link">#7</a> and <a href="https://github.com/jmw86069/venndir/issues/8" class="external-link">#8</a>.</li>
</ul></li>
</ul></div>
<div class="section level3">
<h3 id="changes-to-existing-functions-0-0-32-900">Changes to existing functions<a class="anchor" aria-label="anchor" href="#changes-to-existing-functions-0-0-32-900"></a></h3>
<ul><li>
<p><code><a href="../reference/venndir.html">venndir()</a></code> and <code><a href="../reference/render_venndir.html">render_venndir()</a></code></p>
<ul><li>Percent can now optionally be labeled for each overlap, with <code>show_labels</code> which includes the letter <code>"p"</code>. When <code>"c"</code> and <code>"p"</code> are both included, the two labels are included in the order they appear, separated using <code>percent_delimiter</code> which by default uses a newline. For now, percentage will always appear in the same location with counts <code>"c"</code>, unless counts are hidden. For example <code>show_labels="Ncp"</code> will place set names outside, and count and percent inside. Similarly <code>show_labels="Np"</code> will place set names outside, and only the percent will be displayed inside. Also, <code>show_labels="Npc"</code> will place the percentage first, then the overlap count.</li>
<li>New argument default <code>item_style="default"</code> will auto-detect Markdown and imposes <code>item_style="gridtext"</code> when found, otherwise uses the faster <code>item_style="text"</code>.</li>
<li>
<code>show_items=NA</code> default is changed when items should be displayed, defined when <code>show_labels</code> contains <code>"i"</code>. In that case the <code>overlap_type</code> helps determine eithr <code>show_items="item"</code> or <code>show_items="sign item"</code>.</li>
</ul></li>
<li><p><code>Venndir-class</code> - additional documentation.</p></li>
<li>
<p><code><a href="../reference/venndir_label_style.html">venndir_label_style()</a></code></p>
<ul><li>recognizes option to include (or hide) percent, in the same location as the overlap count label.</li>
<li>Argument <code>percent_delim</code> controls the delimiter between count and percent, and takes effect only when both are visible. The default <code>"&lt;br&gt;"</code> places the second value on a new line.</li>
</ul></li>
<li>
<p><code><a href="../reference/venn_meme.html">venn_meme()</a></code> change via hotfix:</p>
<ul><li>new argument <code>draw_legend=FALSE</code> to hide the Venn legend by default, a change from the default for <code><a href="../reference/venndir.html">venndir()</a></code> and <code><a href="../reference/render_venndir.html">render_venndir()</a></code>, since the legend is not relevant for <code><a href="../reference/venn_meme.html">venn_meme()</a></code>.</li>
</ul></li>
</ul></div>
<div class="section level3">
<h3 id="tests-0-0-32-900">tests<a class="anchor" aria-label="anchor" href="#tests-0-0-32-900"></a></h3>
<ul><li>A series of small, simple unit tests were added for Venn diagrams, nested-proportional Venn, Venn with an empty set, etc.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.31.900" id="venndir-0031900">venndir 0.0.31.900<a class="anchor" aria-label="anchor" href="#venndir-0031900"></a></h2>
<ul><li>All <code>sp</code> and <code>rgeos</code> references were removed!</li>
<li>More work to be done to improve the use of <code>Venndir</code> objects internally, with “convenience functions” to help access and manipulate its data.</li>
</ul><div class="section level3">
<h3 id="changes-to-existing-functions-0-0-31-900">changes to existing functions<a class="anchor" aria-label="anchor" href="#changes-to-existing-functions-0-0-31-900"></a></h3>
<ul><li>
<p><code><a href="../reference/add_orientation_JamPolygon.html">add_orientation_JamPolygon()</a></code>, <code><a href="../reference/area_JamPolygon.html">area_JamPolygon()</a></code>, <code><a href="../reference/plot.JamPolygon.html">plot.JamPolygon()</a></code>, <code><a href="../reference/union_JamPolygon.html">union_JamPolygon()</a></code></p>
<ul><li>updated to improve detection of empty polygons</li>
</ul></li>
</ul></div>
<div class="section level3">
<h3 id="removed-a-bunch-of-sprgeos-dependent-functions-0-0-31-900">REMOVED a bunch of sp/rgeos dependent functions<a class="anchor" aria-label="anchor" href="#removed-a-bunch-of-sprgeos-dependent-functions-0-0-31-900"></a></h3>
<ul><li>Note: These functions were not, uh, functional anyway.</li>
<li>Most functions were called internally, are were replaced with new functions that call polyclip-based functions.</li>
<li>Removed all references to <code>sp</code> and <code>rgeos</code> package prefix, even in help text.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.30.900" id="venndir-0030900">venndir 0.0.30.900<a class="anchor" aria-label="anchor" href="#venndir-0030900"></a></h2>
<p><strong>The polyclip update.</strong> Removing all remnants of <code>sp</code> and <code>rgeos</code>.</p>
<p>Major change, all functions ported or rewritten not to rely upon <code>sp</code>, <code>rgeos</code>, and <code>sf</code>, since the migration to <code>sf</code> would also incur heavy burden of installing <code>sf</code> and all its map/geography-related system libraries.</p>
<p>Backward compatibility is limited for pre-existing venndir output, since <code>rgeos</code> was removed from CRAN (ugh). In principle a pre-existing object could be re-run to produce the new object output.</p>
<p>Attempts were made for <code><a href="../reference/venndir.html">venndir()</a></code> to produce output equivalent to previous versions, but it is unclear how practical that may be.</p>
<p>All graphical output uses <code>grid</code>, no support for <code>base</code> or <code>ggplot2</code>. The <code>grid</code> output was chosen since it can be conveniently combined into panels using <code>patchwork</code> or <code>cowplot</code>, while offering more robust features to position graphical components, also keeping 1:1 aspect ratio so Venn circles remain circular.</p>
<p>New S4 objects:</p>
<ul><li>
<code>JamPolygon</code> - makeshift polygon <code>data.frame</code> to hold one polygon per row (where one “polygon” may be represented as a multi-part polygon with optional holes or nested holes.) This object makes calling <code>polyclip</code> and <code>grid</code> functions more reliable, since they recognize slightly different formats.</li>
<li>
<code>Venndir</code> - replacement for <code>list</code> output, with equivalent content. Will transition to function accessors to obtain content, removing need for direct list access.</li>
</ul><div class="section level3">
<h3 id="venndir-package-changes-0-0-30-900">venndir package changes<a class="anchor" aria-label="anchor" href="#venndir-package-changes-0-0-30-900"></a></h3>
<ul><li>added <code>pracma</code>, <code>polyclip</code>, <code>vwline</code> to Depends.</li>
<li>removed <code>sf</code>, <code>sp</code>, <code>rgeos</code> from Depends. (Ack)</li>
<li>removed <code>ggtext</code> from Depends, all output uses <code>gridtext</code> or <code>grid</code>.</li>
<li>replaced <code><a href="../reference/venndir.html">venndir()</a></code> and <code><a href="../reference/render_venndir.html">render_venndir()</a></code> with new versions, very temporarily moving previous functions to <code>venndir_OLD()</code> and <code>render_venndir_OLD()</code>.</li>
<li>new function for item label fill, previously called <code>spsample()</code>.</li>
</ul></div>
<div class="section level3">
<h3 id="new-jampolygon-object-and-functions-0-0-30-900">new <code>JamPolygon</code> object and functions<a class="anchor" aria-label="anchor" href="#new-jampolygon-object-and-functions-0-0-30-900"></a></h3>
<p>(It may eventually become its own R package.)</p>
<ul><li>
<p><code>JamPolygon</code> is intended to provide a very basic mechanism to store polygon coordinates with the following design:</p>
<ul><li>One “polygon” is stored on one row of a <code>data.frame</code>.</li>
<li>One “polygon” can include multiple parts, for example including holes, nested polygons (polygon inside the hole of the parent polygon), and disjoint/separate polygon components. For example one “polygon” could represent multiple separate shapes, each with or without holes and enclosed polygons. The driving reason is to handle proportional Venn diagrams, which sometimes have a set fully enclosed inside another set which creates a hole in the larger set; sometimes two elliptical polygons overlap in the middle at an angle, so the unique portion of one ellipse is split into two parts.</li>
<li>Multi-part polygons are assumed to be simplified, with no overlapping solid regions. (Polygons are combined with <code><a href="../reference/union_JamPolygon.html">union_JamPolygon()</a></code>.)</li>
<li>Multi-part polygons always use <code>"evenodd"</code> logic, so any inner polygon is assumed to be a hole, and any polygon inside a hole is assumed to be solid. This logic is applied regardless the clockwise/counterclockwise orientation of points for each polygon (polyclip convention: solid is clockwise, holes are counter-clockwise). Calls to <code>polyclip</code> functions will adjust the polygon orientation as needed for the purpose of using <code>polyclip</code>, but these details are not important for <code>JamPolygon</code> itself.</li>
<li>Other properties can be associated with the polygon row, to help maintain and view these associations in a convenient way: name, label, fill, border, border.lwd, fontsize, family, innerborder, innerborder.lwd.</li>
<li>Optional properties can be added to describe multi-polygon rows: orientation, polygon_holes, polygon_clockwise, polygon_parent. They are mostly useful for internal functions.</li>
<li>
<code>innerborder</code> is a new feature, my selfish desire to enable borders that are not overdrawn with adjacent polygons (which share the same border but on different sides). It requires a brilliant package <code>vwline</code> to draw variable-width lines (thanks Paul Murrell). It also requires knowledge of the direction lines are drawn, in order to define left/right border relative to the path taken when rendering the border.</li>
<li>All plot rendering uses <code>grid</code> graphics. All coordinates are encoded in the <code>JamPolygon</code> object, so they can be plotted separately, however <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code> and <code><a href="../reference/plot.JamPolygon.html">plot.JamPolygon()</a></code> use <code>grid</code>.</li>
</ul></li>
<li>
<p>Some supporting functions for <code>JamPolygon</code>:</p>
<ul><li>
<code><a href="../reference/plot.JamPolygon.html">plot.JamPolygon()</a></code> - <code>grid</code> draw function for <code>JamPolygon</code> objects</li>
<li>
<code>rbind2()</code> - generic function to combine multiple <code>JamPolygon</code> objects</li>
<li>
<code><a href="../reference/bbox_JamPolygon.html">bbox_JamPolygon()</a></code> - bounding box enclosing all polygons</li>
<li>
<code><a href="../reference/area_JamPolygon.html">area_JamPolygon()</a></code> - area for each row, accounting for holes and nested polygons.</li>
<li>
<code><a href="../reference/buffer_JamPolygon.html">buffer_JamPolygon()</a></code> - expand or shrink polygon borders</li>
<li>
<code><a href="../reference/point_in_JamPolygon.html">point_in_JamPolygon()</a></code> - test for point inside solid portion of polygons</li>
<li>
<code><a href="../reference/has_point_in_JamPolygon.html">has_point_in_JamPolygon()</a></code> - logical presence/absence of point in any solid polygon</li>
<li>
<code><a href="../reference/add_orientation_JamPolygon.html">add_orientation_JamPolygon()</a></code> - adds polygon/multipolygon orientation, including holes, clockwise, and parent enclosing polygon.</li>
<li>
<code><a href="../reference/labelr_JamPolygon.html">labelr_JamPolygon()</a></code> - define best label position within each polygon</li>
<li>
<code><a href="../reference/minus_JamPolygon.html">minus_JamPolygon()</a></code> - first polygon, removing subsequent polygons</li>
<li>
<code><a href="../reference/union_JamPolygon.html">union_JamPolygon()</a></code> - combine and simplify all polygons into one row</li>
<li>
<code><a href="../reference/intersect_JamPolygon.html">intersect_JamPolygon()</a></code> - first polygon, intersecting subsequent polygons</li>
<li>
<code><a href="../reference/sample_JamPolygon.html">sample_JamPolygon()</a></code> - define sample points within solid polygon</li>
<li>
<code><a href="../reference/split_JamPolygon.html">split_JamPolygon()</a></code> - split multi-part polygons onto separate rows. Note that holes become solid polygons during this step.</li>
<li>
<code><a href="../reference/polyclip_to_JamPolygon.html">polyclip_to_JamPolygon()</a></code> - convert <code><a href="https://rdrr.io/pkg/polyclip/man/polyclip.html" class="external-link">polyclip::polyclip()</a></code> output to <code>JamPolygon</code>.</li>
</ul></li>
</ul></div>
<div class="section level3">
<h3 id="new-object-venndir-for-venndir-output-0-0-30-900">New object <code>Venndir</code> for venndir output<a class="anchor" aria-label="anchor" href="#new-object-venndir-for-venndir-output-0-0-30-900"></a></h3>
<ul><li>Intended to replace previous <code>list</code> format, with data accessor functions instead of direct access to list components.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.29.900" id="venndir-0029900">venndir 0.0.29.900<a class="anchor" aria-label="anchor" href="#venndir-0029900"></a></h2>
<ul><li>bumped version dependency for colorjam (&gt;= 0.0.26.900)</li>
<li>added steps for plan to migrate from <code>sp</code> to <code>polyclip</code>, avoiding heavy dependencies on GDAL, GEOS, LWGEOM software libraries which are unrelated to venndir’s use of polygon geometry functions.</li>
</ul><div class="section level3">
<h3 id="new-functions-0-0-29-900">new functions<a class="anchor" aria-label="anchor" href="#new-functions-0-0-29-900"></a></h3>
<ul><li>
<p><code><a href="../reference/venndir_to_df.html">venndir_to_df()</a></code></p>
<ul><li>intended to convert Venn diagrams to <code>data.frame</code> or a user-friendly <code>kable</code> formatted table suitable in RMarkdown.</li>
<li>removes <code>"&lt;br&gt;"</code> from setlist names when relevant.</li>
</ul></li>
</ul></div>
<div class="section level3">
<h3 id="changes-to-existing-functions-0-0-29-900">changes to existing functions<a class="anchor" aria-label="anchor" href="#changes-to-existing-functions-0-0-29-900"></a></h3>
<ul><li>several functions have new argument <code>blend_preset</code> to enforce <code>colorjam::blend_preset()</code> using the RYB color preset.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.28.900" id="venndir-0028900">venndir 0.0.28.900<a class="anchor" aria-label="anchor" href="#venndir-0028900"></a></h2>
<div class="section level3">
<h3 id="bug-fixes-0-0-28-900">bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-0-0-28-900"></a></h3>
<ul><li>
<code>polygon_label_fill()</code> threw an error when supplied with an empty polygon, now returns <code>NULL</code> so the upstream function can deal with the lack of labels. The issue appears to arise from proportional diagrams that use item labels, where the item label has no suitable polygon to use. Presumably something from the updated <code>eulerr</code> package that creates overlap circles/ellipses to use in these diagrams.</li>
</ul></div>
<div class="section level3">
<h3 id="new-functions-0-0-28-900">new functions<a class="anchor" aria-label="anchor" href="#new-functions-0-0-28-900"></a></h3>
<ul><li>Not released: <code>reposition_venn_gridtext_labels()</code> intended to help adjust and re-position gridtext labels relative to optional incoming line segments, and with goal of enabling different layouts for combinations of labels.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.27.900" id="venndir-0027900">venndir 0.0.27.900<a class="anchor" aria-label="anchor" href="#venndir-0027900"></a></h2>
<div class="section level3">
<h3 id="changes-to-existing-functions-0-0-27-900">changes to existing functions<a class="anchor" aria-label="anchor" href="#changes-to-existing-functions-0-0-27-900"></a></h3>
<ul><li>
<p><code><a href="../reference/curate_venn_labels.html">curate_venn_labels()</a></code></p>
<ul><li>The pattern matching was improved so that it can handle replacement values that may contain patterns, without re-replacing resulting <code>character</code> strings. For example <code>from="1"</code> will no longer match the value <code>"-1"</code> when it is the first entry of <code>curate_df[,"from"]</code>. Similarly, an output string that contains <code>"1"</code> will no longer be re-replaced again by matching pattern <code>from="1"</code>. The use case was noticed when trying to specify a gridtext font size using <code>from=c("-1", "1")</code> and <code>sign=c("&lt;span style='font-size=18pt'&gt;Down&lt;/span&gt;", "&lt;span style='font-size=18pt'&gt;Up&lt;/span&gt;")</code> which caused the <code>"1"</code> to be re-replaced.</li>
</ul></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.26.900" id="venndir-0026900">venndir 0.0.26.900<a class="anchor" aria-label="anchor" href="#venndir-0026900"></a></h2>
<div class="section level3">
<h3 id="changes-to-existing-functions-0-0-26-900">changes to existing functions<a class="anchor" aria-label="anchor" href="#changes-to-existing-functions-0-0-26-900"></a></h3>
<ul><li>
<p><code><a href="../reference/render_venndir.html">render_venndir()</a></code></p>
<ul><li>
<code>plot_style="base"</code> now plots the <code>sf</code> form of data, rather than <code>SpatialPolygonsDataFrame</code>, the first step in transitioning from <code>sp</code> to <code>sf</code> prior to the deprecation of the <code>sp</code> package altogether. All plotting should be equivalent.</li>
<li>
<code>lwd</code> is now honored when plotting Venn circles and polygons, and <code>lwd=0</code> is silently replaced with <code>lwd=1</code> and <code>col="#00000000"</code> so the borders are hidden.</li>
<li>
<code>plot_style="gg"</code> honors <code>lwd</code> as <code>linewidth</code> using <code><a href="https://ggplot2.tidyverse.org/reference/scale_identity.html" class="external-link">ggplot2::scale_linewidth_identity()</a></code>, which unfortunately is slightly larger line width than corresponding values with base R plots. Ah well.</li>
<li>Default line width changed from <code>lwd=2</code> to <code>lwd=0.5</code>. The value is not configurable in function calls, but can be edited in the venndir output <code>list</code> object, in <code>venn_spdf</code>.</li>
</ul></li>
<li>
<p><code><a href="../reference/venndir_legender.html">venndir_legender()</a></code></p>
<ul><li>now properly matches subset <code>setlist</code> and order of the <code>venndir_out</code>, in case using a subset of <code>setlist</code> in <code>venndir(..., sets=c(1, 3, 4))</code>
</li>
<li>fixed issue with grid output when no <code>venndir_out</code> was supplied, now it defaults to white background with black text.</li>
<li>new argument <code>keep_newlines=FALSE</code> which by default removes newlines (line breaks) in the set labels. Use <code>keep_newlines=TRUE</code> to keep line breaks as-is.</li>
<li>new argument <code>set_colors</code> to specify optional colors to use in the table.</li>
<li>The <code>poly_alpha</code> value used to define transparency of Venn colors is honored in the color legend, using <code>venn_spdf$alpha</code>.</li>
<li>The border color <code>"border"</code> is now honored, as is <code>"lwd"</code>.</li>
</ul></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.25.900" id="venndir-0025900">venndir 0.0.25.900<a class="anchor" aria-label="anchor" href="#venndir-0025900"></a></h2>
<div class="section level3">
<h3 id="new-functions-0-0-25-900">new functions<a class="anchor" aria-label="anchor" href="#new-functions-0-0-25-900"></a></h3>
<ul><li>
<p><code>venndir_legend()</code></p>
<ul><li>option for grid or base style, works with base or ggplot2 venndir.</li>
<li>The recommended <code>style="grid"</code> as it offers a nicely organized style, with better positioning which works the same for <code>base</code> and <code>ggplot2</code> <code><a href="../reference/venndir.html">venndir()</a></code> output.</li>
</ul></li>
</ul></div>
<div class="section level3">
<h3 id="changes-to-dependencies-0-0-25-900">changes to dependencies<a class="anchor" aria-label="anchor" href="#changes-to-dependencies-0-0-25-900"></a></h3>
<ul><li>added <code>data.table</code> to dependencies, since it is used by <code><a href="../reference/shrink_df.html">shrink_df()</a></code>.</li>
<li>added <code>gridExtra</code> to enable optional legend <code><a href="https://rdrr.io/pkg/gridExtra/man/tableGrob.html" class="external-link">gridExtra::tableGrob()</a></code>.</li>
</ul></div>
<div class="section level3">
<h3 id="changes-to-existing-functions-0-0-25-900">changes to existing functions<a class="anchor" aria-label="anchor" href="#changes-to-existing-functions-0-0-25-900"></a></h3>
<ul><li>
<p><code><a href="../reference/venndir.html">venndir()</a></code></p>
<ul><li>argument default <code>overlap_type="concordance"</code> was changed to <code>overlap_type="detect"</code> to fix regression where all input data is assumed to be signed, thus showing up arrows even for non-directional input data. The function <code><a href="../reference/signed_overlaps.html">signed_overlaps()</a></code> will detect an appropriate type unless given a specific <code>overlap_type</code> value.</li>
</ul></li>
<li>
<p><code><a href="../reference/list2im_opt.html">list2im_opt()</a></code> and <code><a href="../reference/list2im_value.html">list2im_value()</a></code></p>
<ul><li>argument default <code>do_sparse=TRUE</code> was changed to <code>do_sparse=FALSE</code> because in almost all cases the most appropriate class is <code>matrix</code>. Only for very rare cases with extremely large matrices should sparse matrix objects be used, which makes it most appropriate as an option and not a default.</li>
</ul></li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-0-0-25-900">bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-0-0-25-900"></a></h3>
<ul><li>
<code><a href="../reference/counts2setlist.html">counts2setlist()</a></code> warnings regarding GEOS future retirement are silenced in the examples.</li>
<li>
<code><a href="../reference/list2im_opt.html">list2im_opt()</a></code> uses the updated non-deprecated coersion of <code>matrix</code> to <code>"ngCMatrix"</code>, although the end result is still an object with class <code>"ngCMatrix"</code>. It now uses three <code>as()</code> coersions, as instructed by the Matrix package. The Matrix <code>as()</code> is properly imported by using <code>importFrom(methods, as)</code> and placing <code>Matrix</code> into the <code>Suggests</code> list.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.24.900" id="venndir-0024900">venndir 0.0.24.900<a class="anchor" aria-label="anchor" href="#venndir-0024900"></a></h2>
<ul><li>
<code>jamba</code> now requires version 0.0.90.900 for <code>coordPresets()</code> to provide figure positioning rather than plot positioning. Used for <code>plot_warning</code> with proportional Venn diagrams that cannot display all possible overlaps.</li>
<li>Signed labels should now have padding appropriate to their font size, instead of inheriting padding used by other labels. The visual effect is small, but should improve the packing of signed labels, making the overall group of labels smaller and more cohesive.</li>
</ul><div class="section level3">
<h3 id="changes-to-existing-functions-0-0-24-900">changes to existing functions<a class="anchor" aria-label="anchor" href="#changes-to-existing-functions-0-0-24-900"></a></h3>
<ul><li>
<p><code><a href="../reference/venndir.html">venndir()</a></code></p>
<ul><li>new argument <code>padding</code> to customize the padding around Venn labels.</li>
<li>new behavior, <code>padding</code> is scaled relative to <code>font_cex</code>, for smaller padding when the font size is scaled down.</li>
<li>
<code>plot_warning</code> label is placed relative to the bottom of the plot figure, not the plot border, giving a bit more space below the typical proportional Venn diagram.</li>
</ul></li>
<li><p><code><a href="../reference/render_venndir.html">render_venndir()</a></code> calls <code>gridtext_richtext_grob()</code> instead of <code>gridtext::richtext_grob()</code> to enable vectorized <code>padding</code>.</p></li>
</ul></div>
<div class="section level3">
<h3 id="new-functions-0-0-24-900">new functions<a class="anchor" aria-label="anchor" href="#new-functions-0-0-24-900"></a></h3>
<p>Two temporary functions to customize gridtext. Both functions also call internel <code>gridtext</code> functions, so they cannot be maintained when <code>venndir</code> is prepared for CRAN. More likely these functions will become the basis for <code>gridtext</code> issue and/or pull request (PR).</p>
<ul><li>
<code>gridtext_richtext_grob()</code> - apply <code>padding</code> in vectorized form, to enable distinct <code>padding</code> to be applied to each label. This function is modified to extend <code>padding</code> and call custom <code>gridtext_make_outer_box()</code>.</li>
<li>
<code>gridtext_make_outer_box()</code> - apply <code>padding</code> in vectorized form, to enable distinct <code>padding</code> to be applied to each label.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.23.900" id="venndir-0023900">venndir 0.0.23.900<a class="anchor" aria-label="anchor" href="#venndir-0023900"></a></h2>
<div class="section level3">
<h3 id="change-in-defaults-0-0-23-900">change in defaults<a class="anchor" aria-label="anchor" href="#change-in-defaults-0-0-23-900"></a></h3>
<ul><li>The default <code><a href="../reference/venndir_label_style.html">venndir_label_style()</a></code> position for set names is now <code>"outside"</code>, changed from previous <code>"inside"</code>. There were too many cases where the set name was long, then pushed the numeric count labels too far away from the desired position at the center of the Venn polygon. The new challenge is getting adequate spacing around the Venn diagram to place labels that fit inside the plot window.</li>
<li>
<code><a href="../reference/make_color_contrast.html">make_color_contrast()</a></code> was adjusted to reduce the saturation/chroma of light text colors, the end result reduces the “cyan” appearance of “dodgerblue” when converted to a lighter contrasting color.</li>
</ul></div>
<div class="section level3">
<h3 id="changes-to-existing-functions-0-0-23-900">changes to existing functions<a class="anchor" aria-label="anchor" href="#changes-to-existing-functions-0-0-23-900"></a></h3>
<ul><li>
<code><a href="../reference/venndir.html">venndir()</a></code> new argument <code>sign_count_delim</code> allows customization of the delimiter between sign and numeric counts, for example <code>"^^: 12"</code> uses the default delimiter <code>": "</code>. In some cases it may be preferred to use <code>sign_count_delim=" "</code> to omit the colon <code>":"</code> character.</li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-0-0-23-900">bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-0-0-23-900"></a></h3>
<ul><li><p><code><a href="../reference/venndir.html">venndir()</a></code> and related functions were failing in RStudio when used under <code><a href="https://devtools.r-lib.org/reference/load_all.html" class="external-link">devtools::load_all()</a></code>, apparently because the <code>rgeos</code> package needs to be loaded with <code>@imports</code> before directly calling functions from the <code>rgeos</code> package. This issue appears to occur only when using <code>devtools</code>.</p></li>
<li>
<p>Corrected some warnings caused by argument overloading:</p>
<ul><li>
<code>label_preset</code> is now recognized by <code><a href="../reference/venndir.html">venndir()</a></code> and <code><a href="../reference/render_venndir.html">render_venndir()</a></code>, and is now passed formally from <code><a href="../reference/venndir.html">venndir()</a></code> to <code><a href="../reference/render_venndir.html">render_venndir()</a></code> to prevent it being passed to other internal functions, such as the <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code> function. The warning was: <code>"label_preset" is not a graphical parameter</code>
</li>
<li>
<code>display_counts</code> a developmental argument passed from <code><a href="../reference/venndir.html">venndir()</a></code> to <code><a href="../reference/render_venndir.html">render_venndir()</a></code>. The warning was: <code>"display_counts" is not a graphical parameter</code>
</li>
</ul></li>
</ul></div>
<div class="section level3">
<h3 id="new-branch-future-dev-0-0-23-900">new branch (future dev)<a class="anchor" aria-label="anchor" href="#new-branch-future-dev-0-0-23-900"></a></h3>
<ul><li>A new Github branch was created <code>"sp-to-sf"</code> to migrate away from the sp (Spatial Polygons) package, and toward the sf (Simple Features) package. This migration will remove dependencies on <code>sp</code> and <code>rgeos</code> which are being retired in 2023 anyway. It should also make the overall dependency footprint of <code>venndir</code> much smaller, since <code>sf</code> has few dependencies while also covering the functions required from other packages.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.22.900" id="venndir-0022900">venndir 0.0.22.900<a class="anchor" aria-label="anchor" href="#venndir-0022900"></a></h2>
<div class="section level3">
<h3 id="bug-fixes-0-0-22-900">bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-0-0-22-900"></a></h3>
<ul><li>
<code><a href="../reference/textvenn.html">textvenn()</a></code> was throwing an error with jamba version <code>0.0.83.900</code> caused by updates to <code><a href="https://jmw86069.github.io/jamba/reference/printDebug.html" class="external-link">jamba::printDebug()</a></code> used for printing colorized output. Dependency was bumped to <code>0.0.84.900</code> where the bug was fixed.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.21.900" id="venndir-0021900">venndir 0.0.21.900<a class="anchor" aria-label="anchor" href="#venndir-0021900"></a></h2>
<div class="section level3">
<h3 id="updates-to-existing-functions-0-0-21-900">updates to existing functions<a class="anchor" aria-label="anchor" href="#updates-to-existing-functions-0-0-21-900"></a></h3>
<ul><li>
<p><code><a href="../reference/venndir.html">venndir()</a></code> and <code><a href="../reference/render_venndir.html">render_venndir()</a></code> new argument <code>item_buffer</code></p>
<ul><li>goal is to make this option easier to modify</li>
<li>It is passed to <code>polygon_label_fill()</code> as argument <code>scale_width</code> which was otherwise very hard to find.</li>
</ul></li>
<li>
<p><code><a href="../reference/render_venndir.html">render_venndir()</a></code> will now auto-calculate an appropriate <code>item_cex</code></p>
<ul><li>when <code>item_cex=NULL</code> or <code>item_cex</code> has only one <code>numeric</code> value. The scaling is based upon the total number of items inside each polygon, and the relative area of each polygon.</li>
<li>When <code>item_cex</code> is supplied as a single <code>numeric</code> value, it is multipled by the auto-scaled adjustment, so the <code>item_cex</code> acts as a relative adjustment to the auto-scale font sizing.</li>
<li>
<code>item_cex_factor</code> helps control the magnitude of scaling for large numbers of items (which shouldn’t matter much since they are already not very legible.).</li>
</ul></li>
<li>
<p><code><a href="../reference/render_venndir.html">render_venndir()</a></code> default change <code>segment_buffer=-0.05</code></p>
<ul><li>smaller than previous <code>segment_buffer=-0.2</code>
</li>
<li>This change will cause most segments to end very near the outer border of the polygon.</li>
<li>For proportional euler diagrams, this change is also a stop-gap correction for having the segment line end too far inside the polygon, sometimes causing it to conflict with other polygons. That issue is caused by having the segment point inside the parent polygon (circle or ellipse) instead of an overlap polygon, and specifically the segment should point to the overlap polygon with the fewest overlaps, by default the polygon whose only overlap is to the set label itself.</li>
</ul></li>
<li><p><code><a href="../reference/venn_meme.html">venn_meme()</a></code> was updated to pass <code>item_cex</code> as a two-item <code>numeric</code> vector in order to prevent the auto-scaling described above.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.20.900" id="venndir-0020900">venndir 0.0.20.900<a class="anchor" aria-label="anchor" href="#venndir-0020900"></a></h2>
<div class="section level3">
<h3 id="bug-fixes-0-0-20-900">bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-0-0-20-900"></a></h3>
<p>Proportional Venn diagrams have been a bit of a challenge for labeling. Some edge cases were resolved finally, mostly relevant when certain Venn overlap wedges were razor thin, or when an overlap was represented by more than one polygon in the resulting geometry.</p>
<p>Also, label placement outside the Venn circle was inconsistent, some of the options in <code>polygon_label_outside()</code> appear to work poorly together. Its default values were adjusted to be more consistently “pleasing”.</p>
<ul><li>
<code><a href="../reference/render_venndir.html">render_venndir()</a></code> had a bug that caused proportional Venn labels for single-set overlaps to be assigned to the wrong set polygon when the label was being positioned outside. The line segment would sometimes be visibly ambiguous. It would point the setA line segment to the full setA instead of the smaller non-overlap polygon representing unique setA items. In most cases the workaround was to use <code>segment_buffer=0</code> so the label arrow is drawn to the edge of the circle. When the overall Venn diagram had reasonable proportions the visual effect was not that obvious. With extreme Venn diagrams (small sliver of unique items for some sets) the output was not as intended.</li>
<li>
<code>get_largest_polygon()</code> was updated to work with <code>SpatialPolygonsDataFrame</code>, previously it did not subset the polygons, returning the full set of polygons. It contributed to set labels being weirdly placed, specifically in rare cases where an overlap set (for example <code>setA&amp;setB</code>) was represented by two polygons where setA and setB uniquely overlap, and where one of those polygons was extremely small. In the weird test case, the smaller polygon had area 0.2, while the larger polygon had area 150. The label is intended to point to the largest available polygon for each overlap, however with objects <code>SpatialPolygonsDataFrame</code> it was returning all polygons for each overlap, and the first polygon was labeled. The issue showed up only when the first of multiple polygons happened to be the smaller one, and substantially smaller.</li>
</ul><p>Lightweight change: <code>polygon_label_outside()</code> was moved into a separate .R file. The <code>venndir-sp.R</code> file has too many functions, it will be split into pieces eventually.</p>
</div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.19.900" id="venndir-0019900">venndir 0.0.19.900<a class="anchor" aria-label="anchor" href="#venndir-0019900"></a></h2>
<div class="section level3">
<h3 id="bug-fixes-0-0-19-900">bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-0-0-19-900"></a></h3>
<ul><li>
<code>polygon_label_fill()</code>: At last fixed an elusive bug causing certain item label scenarios to throw an error, turned out to be caused by lack of rownames on a matrix sorted by <code><a href="https://jmw86069.github.io/jamba/reference/mixedSortDF.html" class="external-link">jamba::mixedSortDF()</a></code>. The error occurred in an internal function <code>get_poly_points()</code> that iterates different labeling conditions until at least <code>n</code> label coordinates are returned. Apparently the function <code>spsample()</code> does not guarantee returning the same number of coordinate points as requested. This error must have bitten someone else somewhere in the R world, requesting 15 sampled points, then receiving only 12.</li>
</ul></div>
<div class="section level3">
<h3 id="changes-to-existing-functions-0-0-19-900">changes to existing functions<a class="anchor" aria-label="anchor" href="#changes-to-existing-functions-0-0-19-900"></a></h3>
<ul><li>
<p><code>rescale_sp()</code> argument <code>rotate_degrees</code> will now recognized a named vector.</p>
<ul><li>names are expected to match polygon names stored in the <code>sp</code> object in the ID slotName of each individual <code>Polygons</code> object, for example the first polygon in a <code>SpatialPolygon</code> object would have name stored as: <code>sp@polygons[[1]]@ID</code>. When <code>rotate_degrees</code> contains names, only names that match the polygons will be applied, which allows rotating individual polygons within a <code>SpatialPolygons</code> object.</li>
<li>
<code>share_polygon_center=TRUE</code> new argument intended for multi-polygon <code>Polygons</code> objects, which happens when there are two disconnected parts inside one <code>Polygons</code> element. When this occurs, by default the two parts are rotated as if they were one unit, around their own local center, by default. When <code>share_polygon_center=FALSE</code> each polygon is rotated about its own personal center.</li>
</ul></li>
<li>
<p><code><a href="../reference/venn_meme.html">venn_meme()</a></code></p>
<ul><li>new argument <code>item_style="gridtext"</code> is a different default than <code><a href="../reference/venndir.html">venndir()</a></code> because memes are expected to have fewer labels, and are most likely to use fancy markdown text formatting. This argument is passed to <code><a href="../reference/venndir.html">venndir()</a></code>. When <code>item_style="text"</code> it will autocorrect <code>"&lt;br&gt;"</code> into newline; when <code>item_style="gridtext"</code> it will autocorrect newline into <code>"&lt;br&gt;"</code>.</li>
</ul></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.18.900" id="venndir-0018900">venndir 0.0.18.900<a class="anchor" aria-label="anchor" href="#venndir-0018900"></a></h2>
<div class="section level3">
<h3 id="bug-fixes-0-0-18-900">bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-0-0-18-900"></a></h3>
<p>To resolve issue <a href="https://github.com/jmw86069/venndir/issues/2" class="external-link">#2</a>, the <code>colorjam</code> package was updated to add prefix to call <code><a href="https://jmw86069.github.io/jamba/reference/tcount.html" class="external-link">jamba::tcount()</a></code> to function <code><a href="https://jmw86069.github.io/colorjam/reference/approx_degrees.html" class="external-link">colorjam::approx_degrees()</a></code>. When the <code>colorjam</code> package is loaded, using <code><a href="https://jmw86069.github.io/colorjam" class="external-link">library(colorjam)</a></code> or <code><a href="https://jmw86069.github.io/colorjam" class="external-link">require(colorjam)</a></code> it automatically also loads jamba so its functions are available. However, when <code><a href="https://jmw86069.github.io/colorjam/reference/approx_degrees.html" class="external-link">colorjam::approx_degrees()</a></code> is called directly, without formally loading the <code>colorjam</code> package, the <code>jamba</code> functions are <strong>not</strong> loaded. This issue caused the error, which unfortunately causes the <code><a href="../reference/venndir.html">venndir()</a></code> function to fail unless <code>jamba</code> or <code>colorjam</code> packages have been loaded previously.</p>
<p>All that said, the “fix” is to require the updated <code>colorjam(&gt;= 0.0.22.950)</code> package version that includes this fix.</p>
</div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.17.900" id="venndir-0017900">venndir 0.0.17.900<a class="anchor" aria-label="anchor" href="#venndir-0017900"></a></h2>
<div class="section level3">
<h3 id="updates-to-existing-functions-0-0-17-900">updates to existing functions<a class="anchor" aria-label="anchor" href="#updates-to-existing-functions-0-0-17-900"></a></h3>
<ul><li>
<code><a href="../reference/venndir.html">venndir()</a></code> was updated to change the priority of label placement for proportional Venn diagrams. It used to choose the full set circle for the main set label, now it chooses the unique overlap polygon for that set if it exists, then uses the full set circle only as a fallback.</li>
<li>
<code><a href="../reference/venndir_label_style.html">venndir_label_style()</a></code> was updated to fix longstanding weird glitch with proportional Venn diagrams sometimes displaying counts when one set is fully inside all other sets, but that set has non-zero items unique to that set - so there is nowhere appropriate to display them. Because the main set label was displayed, the count label was errantly placed at the center of the Venn circle. Now the bug is fixed, the value is not displayed - it is part of the optional warning message that lists any overlap counts that could not be displayed.</li>
<li>
<code><a href="../reference/render_venndir.html">render_venndir()</a></code> fixed type “bow_lwd” is now correctly “box_lwd”, only impacted box line width when the line width was changed from default.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.16.900" id="venndir-0016900">venndir 0.0.16.900<a class="anchor" aria-label="anchor" href="#venndir-0016900"></a></h2>
<div class="section level3">
<h3 id="bug-fix-0-0-16-900">bug fix<a class="anchor" aria-label="anchor" href="#bug-fix-0-0-16-900"></a></h3>
<ul><li>
<code><a href="../reference/counts2setlist.html">counts2setlist()</a></code> corrected an error when supplied with empty overlaps, which previously included at least one delimiter even for empty sets. Entries were added to the tests to confirm this behavior.</li>
<li>
<code>polygon_label_fill()</code> small bug in how label placement used rotation, the polygon center was not properly re-used when un-rotating labels to the original orientation. The default was -20 degrees, so the effect was subtle.</li>
</ul></div>
<div class="section level3">
<h3 id="changes-to-existing-functions-0-0-16-900">changes to existing functions<a class="anchor" aria-label="anchor" href="#changes-to-existing-functions-0-0-16-900"></a></h3>
<ul><li><p><code><a href="../reference/venndir_label_style.html">venndir_label_style()</a></code> was updated to change the logic used to place labels inside or outside each Venn overlap polygon, specifically to allow item labels to be inside, or hidden, and adjust the count label visibility accordingly.</p></li>
<li><p><code><a href="../reference/venndir_label_style.html">venndir_label_style()</a></code>, and <code><a href="../reference/venndir.html">venndir()</a></code> now properly hide item labels using <code>max_items</code>, instead displaying the overlap count.</p></li>
<li>
<p><code><a href="../reference/venndir_label_style.html">venndir_label_style()</a></code> arguments <code>count</code> and <code>signed</code> have new options:</p>
<ul><li>
<code>"ifneeded"</code> will display the overlap count when item labels are not being displayed, otherwise when item labels are displayed the count will be hidden.</li>
<li>
<code>"detect"</code> will display the overlap count inside when item labels are not being displayed, otherwise the overlap count is outside when item labels are displayed.</li>
</ul></li>
<li><p><code>polygon_label_fill()</code> new argument <code>ref_sp</code> used to know the relative size of the polygon being labeled, to account for the adjustment when <code>apply_n_scale=TRUE</code>: the buffer polygon is generally smaller for fewer labels, but the new adjustment prevents polygons from being shrunk when the polygon is already very small.</p></li>
<li><p><code><a href="../reference/signed_overlaps.html">signed_overlaps()</a></code> new default <code>overlap_type="default"</code> which attempts to choose a reasonable option. When all values are <code>c(0, 1)</code> it will choose <code>overlap_type="overlap"</code> which does not use directionality. When the input contains <code>numeric</code> or <code>integer</code> values it will enforce <code><a href="https://rdrr.io/r/base/sign.html" class="external-link">sign()</a></code> so the comparison is done with the sign and not decimal values by default.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.15.900" id="venndir-0015900">venndir 0.0.15.900<a class="anchor" aria-label="anchor" href="#venndir-0015900"></a></h2>
<div class="section level3">
<h3 id="bug-fixes-0-0-15-900">bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-0-0-15-900"></a></h3>
<ul><li>
<code><a href="../reference/signed_overlaps.html">signed_overlaps()</a></code> was not handling <code>factor</code> vectors as input, they were getting coerced to <code>integer</code> values instead of <code>character</code> values. This issue was caused by handling duplicate entries, in this case the duplicate entries were not renamed to unique entries by calling <code><a href="https://rdrr.io/r/base/c.html" class="external-link">c()</a></code> for the <code>makeNamesFunc</code> part of <code><a href="https://jmw86069.github.io/jamba/reference/makeNames.html" class="external-link">jamba::makeNames()</a></code>. The base R assignment <code>names(x) &lt;- c(y)</code> coerces <code>factor</code> values in <code>y</code> to <code>integer</code> values, which in this case breaks the expected behavior. This seems like an edge case, but certainly one that <code>venndir</code> should handle without issue - it is not always clear when values are stored as factors instead of character, and the expected behavior in all cases is for <code>venndir</code> to treat <code>factor</code> as <code>character</code> values. (Thank you Dr. Ashley Brooks for bringing my attention to this issue!)</li>
</ul></div>
<div class="section level3">
<h3 id="changes-to-existing-functions-0-0-15-900">changes to existing functions<a class="anchor" aria-label="anchor" href="#changes-to-existing-functions-0-0-15-900"></a></h3>
<ul><li>
<code><a href="../reference/list2im_value.html">list2im_value()</a></code> was also updated to handle <code>factor</code> values by coercing to <code>character</code> instead of allowing the base R <code>matrix</code> coersion which by default coerces to <code>integer</code>.</li>
<li>
<code><a href="../reference/list2im_value.html">list2im_value()</a></code> was also updated to handle <code>empty</code> which is a user-defined value to use in the resulting incidence matrix for empty entries. This argument is not used by <code>venndir</code> but is available for general conversion of value list to value incidence matrix.</li>
<li>
<code><a href="../reference/list2im_value.html">list2im_value()</a></code> was also updated to use a consistent default <code>empty</code> based upon whether the input <code>setlist</code> contains any <code>character</code> or <code>factor</code> values. The previous behavior handled each column independently. The rule is that when any column contains <code>character</code> or <code>factor</code> values, the default is <code>empty=""</code> across all columns; if all values are <code>numeric</code> the default is <code>empty=0</code>. The result is a consistently formatted value incidence matrix. This is a rare edge case that is not expected for common use of <code>venndir</code> but may arise from the conversion functions from value list to value incidence matrix.</li>
</ul></div>
<div class="section level3">
<h3 id="new-unit-tests-0-0-15-900">new unit tests<a class="anchor" aria-label="anchor" href="#new-unit-tests-0-0-15-900"></a></h3>
<ul><li>unit tests were added to confirm the behavior of <code><a href="../reference/signed_overlaps.html">signed_overlaps()</a></code> with named <code>factor</code> vectors as input.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.14.900" id="venndir-0014900">venndir 0.0.14.900<a class="anchor" aria-label="anchor" href="#venndir-0014900"></a></h2>
<div class="section level3">
<h3 id="new-function-0-0-14-900">new function<a class="anchor" aria-label="anchor" href="#new-function-0-0-14-900"></a></h3>
<ul><li>
<code><a href="../reference/venn_meme.html">venn_meme()</a></code> is a wrapper function to help create “Venn Memes” also known as “Concept Venns”. These have text inside each overlap but no other counts or labels. Input is expected to be an overlap list, which is converted to setlist using <code><a href="../reference/overlaplist2setlist.html">overlaplist2setlist()</a></code>. See examples.</li>
</ul></div>
<div class="section level3">
<h3 id="updates-0-0-14-900">updates<a class="anchor" aria-label="anchor" href="#updates-0-0-14-900"></a></h3>
<ul><li>
<code><a href="../reference/venndir.html">venndir()</a></code> argument <code>font_cex</code> was updated to accept length 3 which is applied to (1) main set labels, (2) main count labels, (3) directional count labels. It is sometimes useful to have main set labels larger than the main count labels, which prompted this change. Now it is possible to place main set labels outside the diagram, and have smaller count labels inside the diagram, for example to fit inside proportional Euler diagram shapes. This change adds <code>fontsize</code> to the <code>venn_spdf</code> output object, thus storing the set label font size separate from the count label font size.</li>
<li>
<code><a href="../reference/venndir_label_style.html">venndir_label_style()</a></code> new argument option <code>label_preset="custom"</code> will not modify any label position settings. This option is intended when labels are manually adjusted and should not be changed, and where the user wants to apply <code>label_style</code> to affect the label color, fill, and box outline.</li>
<li>Updated dependency on <code>colorjam</code> to version <code>0.0.18.900</code> to fix error with <code>rad2deg()</code> when blending colors.</li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixed-0-0-14-900">bug fixed<a class="anchor" aria-label="anchor" href="#bug-fixed-0-0-14-900"></a></h3>
<ul><li>
<code><a href="../reference/venndir_label_style.html">venndir_label_style()</a></code> now recognizes when items cannot be displayed inside proportional diagrams, and sets <code>show_items="none"</code> for those entries in <code>label_df</code>. This change prevents trying to place labels inside a NULL overlap polygon.</li>
</ul></div>
<div class="section level3">
<h3 id="testthat-0-0-14-900">testthat<a class="anchor" aria-label="anchor" href="#testthat-0-0-14-900"></a></h3>
<ul><li>Added more tests, covering <code>venndir converters</code> like <code>im2list_opt()</code>, <code>list2im()</code>, <code><a href="../reference/im_value2list.html">im_value2list()</a></code>, and <code><a href="../reference/list2im_value.html">list2im_value()</a></code>.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.13.900" id="venndir-0013900">venndir 0.0.13.900<a class="anchor" aria-label="anchor" href="#venndir-0013900"></a></h2>
<div class="section level3">
<h3 id="updates-to-existing-functions-0-0-13-900">updates to existing functions<a class="anchor" aria-label="anchor" href="#updates-to-existing-functions-0-0-13-900"></a></h3>
<ul><li>
<code>label_polygon_fill()</code> new argument <code>layout_degrees</code> allows rotating the label placement, relevant mostly for <code>label_method="regular"</code> which produces square point grid, and <code>label_method="hexagonal"</code> which produces a hexagonal point grid. It can be useful to rotate those points so text labels have less overlap. As a result <code>degrees=0</code> is the new default, as <code>layout_degrees=-22</code> is also the new default. See the new set of examples which includes visual representation of methods to reduce text label overlaps.</li>
<li>
<code><a href="../reference/render_venndir.html">render_venndir()</a></code> default is changed to <code>item_degrees=0</code>.</li>
<li>
<code><a href="../reference/match_list.html">match_list()</a></code> was updated to require both list elements to have the same length, to account for duplicate items.</li>
<li>Added more tests, still many more to add.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.12.900" id="venndir-0012900">venndir 0.0.12.900<a class="anchor" aria-label="anchor" href="#venndir-0012900"></a></h2>
<div class="section level3">
<h3 id="updates-to-existing-functions-0-0-12-900">updates to existing functions<a class="anchor" aria-label="anchor" href="#updates-to-existing-functions-0-0-12-900"></a></h3>
<ul><li>Added new function categories: “spatial”, “label”, “conversion”, “plotly”.</li>
<li>Several functions were updated with newer examples.</li>
<li>Renamed function <code>label_polygon_fill()</code> to <code>polygon_label_fill()</code> to be consistent with <code>polygon_label_outside()</code> and <code>polygon_label_segment()</code> – also before anyone happens to start using this function!</li>
<li>Fixed issue where <code>fontfamily</code> was not being used with item labels, breaking display of unicode characters in some sessions.</li>
</ul></div>
<div class="section level3">
<h3 id="new-functions-experimental-for-plotly-0-0-12-900">new functions (experimental for plotly)<a class="anchor" aria-label="anchor" href="#new-functions-experimental-for-plotly-0-0-12-900"></a></h3>
<ul><li>
<code><a href="../reference/to_basic.GeomRichText.html">to_basic.GeomRichText()</a></code> and <code><a href="../reference/to_basic.GeomTextBox.html">to_basic.GeomTextBox()</a></code> were added for rudimentary compatibility when using <code>plotly::ggplotly()</code> with <code>ggtext::geom_richtext()</code> and <code>ggtext::geom_textbox()</code>. These functions do display text inside plotly figure, however: (1) they do not cleanly use text positioning, even with <code>textposition</code>;</li>
</ul><ol start="2" style="list-style-type: decimal"><li>plotly does not interpret markdown, so any markdown text is displayed as-is. Ultimately plotly support will probably be added to <code><a href="../reference/render_venndir.html">render_venndir()</a></code> via <code>plot_style="plotly"</code> then using <code>plotly::plot_ly()</code> commands in native form.</li>
</ol></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.11.900" id="venndir-0011900">venndir 0.0.11.900<a class="anchor" aria-label="anchor" href="#venndir-0011900"></a></h2>
<div class="section level3">
<h3 id="bug-fixes-0-0-11-900">bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-0-0-11-900"></a></h3>
<ul><li>FIXED: <code>show_zero=TRUE</code> was not working, zeros were always hidden.</li>
<li>FIXED: <code>alpha_by_counts</code> appears to be mis-aligned.</li>
<li>FIXED: Fix issue where directional label colors apply <code><a href="../reference/make_color_contrast.html">make_color_contrast()</a></code> without using the correct <code>alpha</code> value. See with <code>venndir(make_venn_test(100, 3), poly_alpha=0)</code>
</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.10.900" id="venndir-0010900">venndir 0.0.10.900<a class="anchor" aria-label="anchor" href="#venndir-0010900"></a></h2>
<div class="section level3">
<h3 id="updates-to-existing-functions-0-0-10-900">updates to existing functions<a class="anchor" aria-label="anchor" href="#updates-to-existing-functions-0-0-10-900"></a></h3>
<ul><li>
<code><a href="../reference/render_venndir.html">render_venndir()</a></code> by default groups gridtext labels together, and draws one contiguous background and border around them all. It currently only works for R base plots, since it needs to know the grob sizes upfront. That said, at this point the base R plot looks substantially better than ggplot2 when labels are placed on the outside of the Venn circles. Hopefully I will figure out how to do the same for ggplot2 output.</li>
</ul></div>
<div class="section level3">
<h3 id="new-functions-0-0-10-900">new functions<a class="anchor" aria-label="anchor" href="#new-functions-0-0-10-900"></a></h3>
<ul><li>
<code>draw_gridtext_groups()</code> does the work for grouping multiple <code>gridtext::richtext_grob()</code> labels together, using <code>x, y, overlap_set</code> to define the grouping. This method also aligns text relative to a line segment if present, by using <code><a href="../reference/degrees_to_adj.html">degrees_to_adj()</a></code>. A by-product of the approach is that labels are now centered by the label width, instead of having left/right components which may differ in width.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.9.900" id="venndir-009900">venndir 0.0.9.900<a class="anchor" aria-label="anchor" href="#venndir-009900"></a></h2>
<p>Began adding <code>testthat</code> tests for various functions.</p>
<div class="section level3">
<h3 id="one-more-refactor-0-0-9-900">one more refactor<a class="anchor" aria-label="anchor" href="#one-more-refactor-0-0-9-900"></a></h3>
<p>Proportional Venn diagrams (Euler diagrams) warranted a refactor in order to label each set even when one set is fully contained inside another set.</p>
</div>
<div class="section level3">
<h3 id="new-functions-0-0-9-900">new functions<a class="anchor" aria-label="anchor" href="#new-functions-0-0-9-900"></a></h3>
<ul><li>
<code><a href="../reference/signed_counts2setlist.html">signed_counts2setlist()</a></code> is an import method similar to <code><a href="../reference/counts2setlist.html">counts2setlist()</a></code> but to allow importing directional overlaps.</li>
<li>
<code>get_sp_buffer()</code> applies a buffer width to the interior of a polygon, either with fixed width, or relative width based upon the minimum width required to make the polygon disappear. The relative value means <code>sp_buffer=0.5</code> can be used to create a buffer at half-width, for a polygon of any size. The purpose is to draw a line segment from outside the polygon to “just inside” the polygon, using an amount appropriate for the size and shape of the polygon. As “rgeos” <code>gBuffer()</code> has no ability to scale relative to the polygon size and shape, <code>get_sp_buffer()</code> quickly runs a sweep to determine the <code>width</code> where an internal polygon is just barely non-zero, and defines that as <code>sp_buffer=-1</code>.</li>
<li>
<code><a href="../reference/mean_degrees.html">mean_degrees()</a></code> takes a vector of angles in degrees and returns the mean angle based upon the sum of unit vectors. It adds a small random bit to prevent vectors from exactly cancelling out, and an argument <code>seed</code> that makes the randomness reproducible.</li>
<li>
<code><a href="../reference/mean_degree_arc.html">mean_degree_arc()</a></code> is similar to <code><a href="../reference/mean_degrees.html">mean_degrees()</a></code> except it takes an ordered set of angles that define an arc, and returns the mean position along that arc. Use argument <code>do_plot=TRUE</code> to see a visual representation of the options. It turns out that spreading text labels along an arc only worked when the mean angle was fixed inside the arc. Otherwise occassionally the mean angle could be exactly 180 degrees off, when the angles span more than 180 degrees, and if multiple labels were present at each end. You’d think that would be rare, but it happened enough to notice the bug and to implement better logic.</li>
<li>
<code><a href="../reference/degrees_to_adj.html">degrees_to_adj()</a></code> is a helper function that takes an angle in degrees, and returns the text <code>adjx</code> and <code>adjy</code> values so a text label will be positioned outside the angle.</li>
</ul></div>
<div class="section level3">
<h3 id="functions-removed-0-0-9-900">functions removed<a class="anchor" aria-label="anchor" href="#functions-removed-0-0-9-900"></a></h3>
<ul><li>
<code>ggrender_venndir()</code> was removed, use <code>render_venndir(plot_style="gg")</code> in its place. It made sense to keep the visualization logic inside one function.</li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-0-0-9-900">bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-0-0-9-900"></a></h3>
<ul><li>
<code><a href="../reference/spread_degrees.html">spread_degrees()</a></code> was not properly maintaining the initial order of angles when it iteratively spread out a series of angles. For example one group of angles could be spread wide enough to overlap another existing angle, in which case that angle should be kept outside the initial group, instead of being placed into the middle. The telltale sign is that line segments wildly criss-crossed inside the polygon.</li>
</ul></div>
<div class="section level3">
<h3 id="changes-to-existing-functions-0-0-9-900">changes to existing functions<a class="anchor" aria-label="anchor" href="#changes-to-existing-functions-0-0-9-900"></a></h3>
<ul><li><p>New argument <code>inside_percent_threshold</code> added to <code><a href="../reference/venndir.html">venndir()</a></code>, <code><a href="../reference/render_venndir.html">render_venndir()</a></code>, and <code><a href="../reference/venndir_label_style.html">venndir_label_style()</a></code> used to position labels outside a polygon when its size is below this percent of the total polygon size. It works as a reasonable alternative for determining if the label visually fits inside a polygon.</p></li>
<li><p><code><a href="../reference/venndir.html">venndir()</a></code> can accept polygon shapes to use as input, instead of defining its own or using those from <code><a href="https://jolars.github.io/eulerr/reference/euler.html" class="external-link">eulerr::euler()</a></code>. New argument <code>venn_sp</code> accepts any <code>SpatialPolygons</code> compatible object, which must have at least as many polygons as there are sets in <code>setlist</code>.</p></li>
<li><p><code><a href="../reference/venndir.html">venndir()</a></code> now adds the Venn shapes to the output <code>venn_spdf</code> with <code>type="set"</code>; all other polygons have <code>type="overlap"</code>. The shapes will serve as an anchor for set labels, in the event we want to label one or more circles – like when one circle is fully contained inside another.</p></li>
<li><p><code>polygon_label_outside()</code> now determines a reasonable text alignment <code>adj</code> based upon the angle offset, to help minimize label overlap with the line segment.</p></li>
<li><p><code>polygon_label_outside()</code> was updated to correct some internal use of coordinates. New argument <code>sp_buffer</code> to allow the line segment to end slightly inside each polygon.</p></li>
<li><p><code>get_venn_shapes()</code> default 4-way Venn ellipses were slightly adjusted so the middle ellipses broke the outer ellipses into two polygons. This change helps the automated position of labels by <code>polygon_label_outside()</code> with certain settings.</p></li>
<li><p><code><a href="../reference/venndir_label_style.html">venndir_label_style()</a></code> was refactored to be able to position labels inside or outside the polygon, for four types of labels:</p></li>
<li><p><code>"set"</code> - e.g. <code>"set_A"</code></p></li>
<li><p><code>"overlap"</code> - e.g. <code>"set_A&amp;set_B"</code> normally this label is not shown</p></li>
<li><p><code>"count"</code> - e.g. <code>10</code></p></li>
<li><p><code>"items"</code> - e.g. <code>c("item1", "item3", "item9")</code> for each overlap set.</p></li>
</ul><p>It has some <code>label_preset</code> options, which help position set and count labels inside or outside.</p>
</div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.8.900" id="venndir-008900">venndir 0.0.8.900<a class="anchor" aria-label="anchor" href="#venndir-008900"></a></h2>
<p>One more refactor is in progress. Label coordinates will be pre-calculated inside and outside each polygon, then labels can be toggled in or out (or moved to a custom location). The main driver is to be able to label the Venn circles on the perimeter of the diagram. For proportional circles, when a set is fully contained inside another set, there is no polygon with that set alone – thus the defaul labeling fails.</p>
<div class="section level3">
<h3 id="new-functions-0-0-8-900">new functions<a class="anchor" aria-label="anchor" href="#new-functions-0-0-8-900"></a></h3>
<ul><li>
<code>polygon_label_outside()</code> defines label placement outside a polygon, one of two methods: “label” positions outside using relative label positioning; “bbox” positions outside using relative polygon position within the bounding box.</li>
<li>
<code><a href="../reference/expand_range.html">expand_range()</a></code> is a simple function to expand a numeric range by <code>expand_fraction</code>, mainly for R plots to have space to render labels outside a central Venn diagram.</li>
<li>
<code><a href="../reference/spread_degrees.html">spread_degrees()</a></code> takes a vector of angles in degrees as input, and returns a vector where angles are separated by at least <code>min_degrees</code>.</li>
<li>
<code><a href="../reference/mean_degrees.html">mean_degrees()</a></code> calculates the mean angle in degrees for an input vector of angles.</li>
<li>
<code><a href="../reference/diff_degrees.html">diff_degrees()</a></code> takes a vector of angles in degrees, and returns the angular difference. Suitable for cases with angles like <code>c(355, 2, 12)</code> where the difference between <code>355</code> and <code>2</code> is <code>7</code>.</li>
<li>
<code>sp_polylabelr()</code> is a simple wrapper function to <code><a href="https://jolars.github.io/polylabelr//reference/poi.html" class="external-link">polylabelr::poi()</a></code> for <code>SpatialPolygons</code> objects.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.7.900" id="venndir-007900">venndir 0.0.7.900<a class="anchor" aria-label="anchor" href="#venndir-007900"></a></h2>
<p>Several refactoring processes being implemented, some further updates ad bugfixes may be necessary. Pushed this version for more testing on CentOS where the <code>gridtext</code> package was hard to install for GCC below version 5.3, but was installed with GCC 5.3.</p>
<div class="section level3">
<h3 id="new-dependencies-0-0-7-900">new dependencies<a class="anchor" aria-label="anchor" href="#new-dependencies-0-0-7-900"></a></h3>
<ul><li>
<p>Added dependencies:</p>
<ul><li>
<code>sf</code> package dependency for ggplot2 output</li>
<li>
<code>gridtext</code> and <code>ggtext</code> for label output</li>
<li>
<code>gridBase</code> for base R plotting</li>
</ul></li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-0-0-7-900">bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-0-0-7-900"></a></h3>
<ul><li>
<code><a href="../reference/render_venndir.html">render_venndir()</a></code> added <code>sp</code> prefix to <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code> for base R plotting.</li>
<li>
<code><a href="../reference/signed_overlaps.html">signed_overlaps()</a></code> was updated to allow using <code>sep="|"</code>. Previous this delimited was used to make unique rownames, and needed to be parsed properly to prevent errors.</li>
<li>
<code><a href="../reference/venndir.html">venndir()</a></code> new argument <code>sep</code> which is now properly passed to <code><a href="../reference/signed_overlaps.html">signed_overlaps()</a></code> and <code>get_venn_shapes()</code>.</li>
<li>
<code>find_vennpoly_overlaps()</code>, <code><a href="../reference/overlaplist2setlist.html">overlaplist2setlist()</a></code>, <code><a href="../reference/counts2setlist.html">counts2setlist()</a></code> now call <code>strsplit(..., fixed=TRUE)</code> so the <code>sep</code> character is not treated like a regular expression, thus allowing delimiter <code>sep="|"</code> if specified.</li>
</ul></div>
<div class="section level3">
<h3 id="changes-to-existing-functions-0-0-7-900">changes to existing functions<a class="anchor" aria-label="anchor" href="#changes-to-existing-functions-0-0-7-900"></a></h3>
<ul><li><p><code><a href="../reference/textvenn.html">textvenn()</a></code> new argument <code>sep</code> to allow customizing the delimiter between set names, for example the default <code>sep="&amp;"</code> creates overlap names like <code>set_A&amp;set_B</code>; but <code>sep=" | "</code> creates overlap names like <code>set_A | set_B</code>.</p></li>
<li>
<p><code><a href="../reference/venndir.html">venndir()</a></code> new argument <code>show_set</code> to customize display of each set name.</p>
<ul><li>
<code>show_set="main"</code> displays only the set name for main sets</li>
<li>
<code>show_set="all"</code> displays all set names in each overlap</li>
<li>
<code>show_set="none"</code> displays no set name</li>
<li>
<code>show_set="boundary"</code> <em>not yet implemented</em> will display the set label for each circle/ellipse boundary</li>
</ul></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.6.900" id="venndir-006900">venndir 0.0.6.900<a class="anchor" aria-label="anchor" href="#venndir-006900"></a></h2>
<p>Much closer to a release-ready form. It needs the ggplot2 option enabled with the newest <code><a href="../reference/render_venndir.html">render_venndir()</a></code> logic.</p>
<div class="section level3">
<h3 id="bug-fixes--changes-0-0-6-900">bug fixes / changes<a class="anchor" aria-label="anchor" href="#bug-fixes--changes-0-0-6-900"></a></h3>
<ul><li>Fixed obscure bug where set names could fail if not provided in alphabetic order.</li>
<li>Changed <code><a href="../reference/venndir.html">venndir()</a></code> default <code>show_zero=FALSE</code> to hide empty labels.</li>
<li>Removed <code>ggrender_venndir()</code> from the exported functions list, this function needs to be included inside <code><a href="../reference/render_venndir.html">render_venndir()</a></code>.</li>
</ul></div>
<div class="section level3">
<h3 id="refactoring-the-details-0-0-6-900">refactoring the details<a class="anchor" aria-label="anchor" href="#refactoring-the-details-0-0-6-900"></a></h3>
<p>More refactoring may take place to simplify the workflow, until the package is publicized.</p>
<ul><li>
<code>label_df$col</code> renamed to <code>label_df$color</code> for consistency, and preparing for use by others.</li>
<li>
<code>ggrender_vendir()</code> will be retired, or will be converted to a simple wrapper function which calls <code><a href="../reference/render_venndir.html">render_venndir()</a></code>.</li>
</ul></div>
<div class="section level3">
<h3 id="new-features-0-0-6-900">new features<a class="anchor" aria-label="anchor" href="#new-features-0-0-6-900"></a></h3>
<ul><li>
<code>label_polygon_fill()</code> new arguments <code>dither_cex</code> and <code>dither_color</code> which slightly adjust the <code>cex</code> and <code>color</code> values. The <code>cex</code> is uniformly distributed +/- the <code>dither_cex</code> value, as a fraction of the <code>cex</code>, the default is roughly 4% variation in <code>cex</code>. The <code>dither_color</code> is similar, it adds some heterogeneity to <code>darkFactor</code> and <code>sFactor</code> and calls <code><a href="https://jmw86069.github.io/jamba/reference/makeColorDarker.html" class="external-link">jamba::makeColorDarker()</a></code> to adjust brightness and saturation.</li>
<li>
<code>label_polygon_fill()</code> can plot the polygon buffer behind the labels, to review the effect of adjusting <code>scale_width</code> for each polygon.</li>
<li>
<code>label_df</code> uses <code>show_label</code> and <code>show_items</code> to control visibility of the count label, and item labels, respectively. When the values are <code>NA</code> it applied default rules, which favors showing count label, unless the count label is moved outside the polygon.</li>
<li>
<code>label_df</code> recognizes <code>x_offset,y_offset</code> to nudge count labels somewhere else. Currently manual, this adjustment may be automated at some point. When a label is moved outside its parent polygon, a line segment is drawn from the label to just inside the polygon boundary. When no items are displayed, the segment is drawn more toward the center.</li>
<li>
<code><a href="../reference/venndir_label_style.html">venndir_label_style()</a></code> new function to control the visual style of count labels, with option to fill and draw a border around labels.</li>
<li>
<code>polygon_label_segment()</code> is used when moving a label from inside a polygon to somewhere that may or may not be inside that polygon. When it is moved outside, it returns the point on the polygon boundary along that line segment. It can be used with <code>sp_buffer</code> so the line can be drawn slightly inside the polygon boundary.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.5.900" id="venndir-005900">venndir 0.0.5.900<a class="anchor" aria-label="anchor" href="#venndir-005900"></a></h2>
<div class="section level3">
<h3 id="bug-fixes-0-0-5-900">bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-0-0-5-900"></a></h3>
<ul><li>
<code>sp_ellipses()</code> argument renamed from <code>radius</code> to <code>xradius</code> and <code>yradius</code>.</li>
</ul></div>
<div class="section level3">
<h3 id="display-item-labels-inside-venn-polygons-0-0-5-900">display item labels inside Venn polygons<a class="anchor" aria-label="anchor" href="#display-item-labels-inside-venn-polygons-0-0-5-900"></a></h3>
<ul><li>
<code>ggrender_venndir()</code> and <code><a href="../reference/render_venndir.html">render_venndir()</a></code> both allow optional display of items inside the Venn polygons. For relatively small sets (&lt;500) this works fairly well. You can configure the label to include the <code>"sign"</code>, and/or <code>"item"</code>. It works as an alternative or supplement to using proportional Venn diagrams.</li>
</ul></div>
<div class="section level3">
<h3 id="new-render-functions-0-0-5-900">new render functions<a class="anchor" aria-label="anchor" href="#new-render-functions-0-0-5-900"></a></h3>
<ul><li>
<code>ggrender_venndir()</code> renders a venndir diagram using ggplot2. Note that this function requires the package <code>sf</code>, and in future other objects internal to venndir may be converted from <code>sp</code> to <code>sf</code>.</li>
<li>
<code>label_polyogn_fill()</code> takes a <code>SpatialPolygons</code> object, a vector of labels, and returns coordinates to place labels inside the polygon. It has some adjustments to add buffer around polygon boundaries, but does not directly detect label overlaps. It either plots labels in base R graphics, or returns coordinates suitable for ggplot2.</li>
</ul></div>
<div class="section level3">
<h3 id="new-rescale_-functions-0-0-5-900">new <code>rescale_*()</code> functions<a class="anchor" aria-label="anchor" href="#new-rescale_-functions-0-0-5-900"></a></h3>
<p>The <code>rescale_*()</code> functions are intended to allow manipulation of numeric coordinates in each relevant object type, aimed at <code>SpatialPolygons</code> and the various sub-types.</p>
<ul><li>
<code>rescale_sp()</code> manipulates <code>SpatialPolygons</code> which contains one or more <code>Polygons</code> objects, and therefore calls:</li>
<li>
<code>rescale_ps()</code> manipulates <code>Polygons</code> which contains one or more <code>Polygon</code> objects, and therefore calls:</li>
<li>
<code>rescale_p()</code> manipulates <code>Polygon</code> which contains numeric <code>matrix</code> coordinates, and therefore calls:</li>
<li>
<code><a href="../reference/rescale_coordinates.html">rescale_coordinates()</a></code> manipulates numeric <code>matrix</code> coordinates.</li>
</ul><p>The <code>rescale_*()</code> operations enable three types of manipulations:</p>
<ol style="list-style-type: decimal"><li>
<code>scale</code> - multiplies coordinates for each axis</li>
<li>
<code>rotate_degrees</code> - rotates points in degrees</li>
<li>
<code>shift</code> - shifts coordinates by adding a constant to each axis</li>
<li>
<code>center</code> - the <code>scale</code> and <code>rotate_degree</code> are applied relative to the <code>center</code>, which by default uses the mean bounding box.</li>
</ol></div>
<div class="section level3">
<h3 id="new-conversion-functions-0-0-5-900">new conversion functions<a class="anchor" aria-label="anchor" href="#new-conversion-functions-0-0-5-900"></a></h3>
<ul><li>
<code><a href="../reference/list2im_opt.html">list2im_opt()</a></code> - optimized method to convert a list of character vectors to a logical incidence matrix. The <code>list</code> names become colnames, which represent the names of each set. The rownames represent items.</li>
<li>
<code><a href="../reference/list2im_value.html">list2im_value()</a></code> - convert list of named vectors to a value incidence matrix. The list vectors are named by item, and the vector values are stored in the matrix.</li>
<li>
<code><a href="../reference/im2list.html">im2list()</a></code> - convert incidence matrix to list of character vectors.</li>
<li>
<code><a href="../reference/im_value2list.html">im_value2list()</a></code> - convert value incidence matrix to a list of vectors. Vectors are named by item, and values are from the incidence matrix.</li>
<li>
<code><a href="../reference/counts2setlist.html">counts2setlist()</a></code> - convert vector of overlap counts to setlist, intended for compatibility with other packages like <code>eulerr</code>, <code>upsetr</code>, and <code>VennDiagram</code>.</li>
</ul></div>
<div class="section level3">
<h3 id="changes-to-existing-functions-0-0-5-900">changes to existing functions<a class="anchor" aria-label="anchor" href="#changes-to-existing-functions-0-0-5-900"></a></h3>
<ul><li>
<code><a href="../reference/venndir.html">venndir()</a></code> new argument <code>alpha_by_counts</code> adjusts alpha transparency of each overlap based upon the number of counts. Implemented to evaluate the visual effect for now.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.4.900" id="venndir-004900">venndir 0.0.4.900<a class="anchor" aria-label="anchor" href="#venndir-004900"></a></h2>
<div class="section level3">
<h3 id="changes-to-existing-functions-0-0-4-900">changes to existing functions<a class="anchor" aria-label="anchor" href="#changes-to-existing-functions-0-0-4-900"></a></h3>
<ul><li>
<code><a href="../reference/venndir.html">venndir()</a></code> no longer renders the plot, but calls <code><a href="../reference/render_venndir.html">render_venndir()</a></code> in order to offer more customized options. It also allows editing the source data as needed, like adjusting individual overlap settings.</li>
<li>
<code><a href="../reference/textvenn.html">textvenn()</a></code> now supports directional Venn counts, even with <code>"each"</code> it uses two columns for all possible directions for the central 3-way overlaps.</li>
</ul></div>
<div class="section level3">
<h3 id="new-functions-0-0-4-900">new functions<a class="anchor" aria-label="anchor" href="#new-functions-0-0-4-900"></a></h3>
<ul><li>
<code><a href="../reference/render_venndir.html">render_venndir()</a></code> renders a Venn or Euler diagram using the output format from <code><a href="../reference/venndir.html">venndir()</a></code>. It displays a warning at the bottom of the plot whenever a Venn overlap cannot be displayed, for example with proportional Venn (Euler) diagrams when an overlap cannot be represented. This label can be hidden, but by default is displayed so the information is not lost.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.3.900" id="venndir-003900">venndir 0.0.3.900<a class="anchor" aria-label="anchor" href="#venndir-003900"></a></h2>
<div class="section level3">
<h3 id="new-functions-0-0-3-900">new functions<a class="anchor" aria-label="anchor" href="#new-functions-0-0-3-900"></a></h3>
<ul><li>
<code><a href="../reference/venndir.html">venndir()</a></code> the core visual function that displays either Venn diagram or a Euler diagram for proportional diagrams.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.2.900" id="venndir-002900">venndir 0.0.2.900<a class="anchor" aria-label="anchor" href="#venndir-002900"></a></h2>
<p>The <code>venndir</code> package is intended for analyses where direction is encoded alongside each item in a set. The driving example is for gene expression analysis, which results in a subset of differentially expressed genes, where the expression can either by “up-regulation” or “down-regulation.” When comparing two sets of differentially expressed genes, it is helpful if not essential to recognize when any overlaps also share the same direction of change (or opposite direction.)</p>
<p>Although there are some 40,000 gene loci in human (give or take), it is common to see many of the same few hundred genes differentially regulated across a very diverse array of experiments. For two experiments to identify 800 genes each, with overlap of 400, these outcomes illustrate the utility of venndir:</p>
<ul><li>400 genes overlap, 200 share the same direction, 200 are opposite. In this case, the overlap may represent response by similar functional set of genes, but with different biological drivers.</li>
<li>400 genes overlap, 396 genes share the same direction. In this case, the overlap could be seen as highly similar between the two sets.</li>
<li>400 genes overlap, only 4 genes share the same direction. In this case, the overlap could be see as nearly exactly opposite.</li>
</ul><div class="section level3">
<h3 id="new-functions-0-0-2-900">new functions<a class="anchor" aria-label="anchor" href="#new-functions-0-0-2-900"></a></h3>
<ul><li>
<code><a href="../reference/textvenn.html">textvenn()</a></code> prints a Venn diagram using console text output. It also supports directionality, the formatting is still being adjusted for best visual appeal.</li>
<li>
<code><a href="../reference/signed_overlaps.html">signed_overlaps()</a></code> is the core overlap function for venndir, it performs directional and direct overlap, with configurable output. It returns a <code>data.frame</code> with counts for each Venn overlap set, and optionally includes items. The exact output format may be adjusted in future, currently it returns one row per overlap. For directional overlaps, it returns one row per combination of up/down.</li>
<li>
<code><a href="../reference/make_venn_test.html">make_venn_test()</a></code> is a convenience function to generate test sets for Venn diagrams. It can return simple sets, or sets with directionality. It is mainly intended to help create very large sets to test efficiency of the process.</li>
</ul></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by James M. Ward.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer></div>





  </body></html>

