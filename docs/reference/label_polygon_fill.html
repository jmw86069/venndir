<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Arrange text labels inside a polygon — label_polygon_fill • venndir</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Arrange text labels inside a polygon — label_polygon_fill" />
<meta property="og:description" content="Arrange text labels inside a polygon" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">venndir</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.5.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="http://github.com/jmw86069/venndir/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Arrange text labels inside a polygon</h1>
    <small class="dont-index">Source: <a href='http://github.com/jmw86069/venndir/blob/master/R/venndir-sp.R'><code>R/venndir-sp.R</code></a></small>
    <div class="hidden name"><code>label_polygon_fill.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Arrange text labels inside a polygon</p>
    </div>

    <pre class="usage"><span class='fu'>label_polygon_fill</span><span class='op'>(</span>
  <span class='va'>sp</span>,
  <span class='va'>labels</span>,
  color <span class='op'>=</span> <span class='st'>"black"</span>,
  border <span class='op'>=</span> <span class='cn'>NA</span>,
  cex <span class='op'>=</span> <span class='fl'>1</span>,
  fontsize <span class='op'>=</span> <span class='fl'>10</span>,
  angle <span class='op'>=</span> <span class='op'>-</span><span class='fl'>20</span>,
  scale_width <span class='op'>=</span> <span class='op'>-</span><span class='fl'>0.1</span>,
  apply_n_scale <span class='op'>=</span> <span class='cn'>TRUE</span>,
  buffer_w <span class='op'>=</span> <span class='fl'>0</span>,
  buffer_h <span class='op'>=</span> <span class='fl'>0</span>,
  label_method <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"hexagonal"</span>, <span class='st'>"nonaligned"</span>, <span class='st'>"regular"</span>, <span class='st'>"random"</span>, <span class='st'>"stratified"</span>,
    <span class='st'>"clustered"</span><span class='op'>)</span>,
  draw_buffer <span class='op'>=</span> <span class='cn'>FALSE</span>,
  buffer_fill <span class='op'>=</span> <span class='st'>"#FFFFFF77"</span>,
  buffer_border <span class='op'>=</span> <span class='st'>"red"</span>,
  draw_points <span class='op'>=</span> <span class='cn'>FALSE</span>,
  draw_labels <span class='op'>=</span> <span class='cn'>TRUE</span>,
  verbose <span class='op'>=</span> <span class='cn'>FALSE</span>,
  <span class='va'>...</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>sp</th>
      <td><p>object <code><a href='https://rdrr.io/pkg/sp/man/SpatialPolygons.html'>sp::SpatialPolygons</a></code></p></td>
    </tr>
    <tr>
      <th>labels</th>
      <td><p><code>character</code> vector of labels, the length defines
the number of coordinate positions to return.</p></td>
    </tr>
    <tr>
      <th>color</th>
      <td><p><code>vector</code> of R compatible colors which defines the
color of each label.</p></td>
    </tr>
    <tr>
      <th>border</th>
      <td><p><code>vector</code> or <code>NA</code> with colors to define the border around
each label.</p></td>
    </tr>
    <tr>
      <th>cex</th>
      <td><p><code>numeric</code> value used to resize all text labels by
multiplying the font size.</p></td>
    </tr>
    <tr>
      <th>fontsize</th>
      <td><p><code>numeric</code> value indicating the font size in points.</p></td>
    </tr>
    <tr>
      <th>angle</th>
      <td><p><code>numeric</code> <code>vector</code> indicating the angle in degrees
to rotate each text label, where positive values rotate
in clockwise direction.</p></td>
    </tr>
    <tr>
      <th>scale_width</th>
      <td><p><code>numeric</code> value or <code>NULL</code>, where a numeric
value indicates the relative size of the polygon to use as
a buffer around the polygon, and should be given as
negative values. For example <code>scale_width=-0.1</code> will create
a buffer at 10% the size of the polygon.</p></td>
    </tr>
    <tr>
      <th>apply_n_scale</th>
      <td><p><code>logical</code> indicating whether to adjust the
polygon buffer based upon the number of labels, specifically
so that few labels (1, 2, or 3 labels) have much higher buffer
and therefore are positioned more central inside the polygon.</p></td>
    </tr>
    <tr>
      <th>buffer_w, buffer_h</th>
      <td><p><code>numeric</code> width and height, respectively,
used for additional buffer inside each polygon. These values
are appropriate when the width of text label is known. The
buffer polygon derived from <code>scale_width</code> and <code>apply_n_scale</code>
is moved left, right, up, down, and the intersection of these
operations is used with <code><a href='https://rdrr.io/pkg/sp/man/spsample.html'>sp::spsample()</a></code> to define label
positions. In this way, labels should fit inside the original
polygon without overlapping the boundary. This function does
not define default values, because the actual text label width
is dependent upon the diplay device properties at the time
the plot is drawn, and this device may not even be open when
this function is called.</p></td>
    </tr>
    <tr>
      <th>label_method</th>
      <td><p><code>character</code> string indicating the layout type
used by <code><a href='https://rdrr.io/pkg/sp/man/spsample.html'>sp::spsample()</a></code>.</p></td>
    </tr>
    <tr>
      <th>draw_buffer</th>
      <td><p><code>logical</code> indicating whether the buffer polygon
should be drawn, intended for visual review of the processing.</p></td>
    </tr>
    <tr>
      <th>buffer_fill, buffer_border</th>
      <td><p>color values used when <code>draw_buffer=TRUE</code>.</p></td>
    </tr>
    <tr>
      <th>draw_points</th>
      <td><p><code>logical</code> indicating whether to draw points at
each coordinate position, intended for visual review of the processing.</p></td>
    </tr>
    <tr>
      <th>draw_labels</th>
      <td><p><code>logical</code> indicating whether to draw text labels
which is performed using <code><a href='https://wilkelab.org/gridtext/reference/richtext_grob.html'>gridtext::richtext_grob()</a></code> inside
a base R plot.</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p><code>logical</code> indicating whether to print verbose output.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p><code>list</code> that contains: <code>items_df</code> as a <code>data.frame</code> of item
label coordinates; and <code>g_labels</code> as output from
<code><a href='https://wilkelab.org/gridtext/reference/richtext_grob.html'>gridtext::richtext_grob()</a></code> whose coordinates are defined
as <code>"native"</code>.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This function takes a vector of text labels, and will
arrange those labels to fill the inside of a polygon.
Currently the method uses <code><a href='https://rdrr.io/pkg/sp/man/spsample.html'>sp::spsample()</a></code> which
has a few algorithms to generate point positions
inside a polygon, and these positions are used to
anchor text labels. Currently this method does no
overlap detection.</p>
<p>The primary method to avoid overlap is to use
<code>label_method="hexagon"</code> and <code>angle=20</code>, since hexagonal
layout tends to have points at roughly 0 and 60 degrees
from one another, and 20 degree rotation tends to allow
text labels to nestle beside each other without much
overlap.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>Other venndir utility: 
<code><a href='curate_venn_labels.html'>curate_venn_labels</a>()</code>,
<code><a href='eulerr2polys.html'>eulerr2polys</a>()</code>,
<code><a href='find_vennpoly_overlaps.html'>find_vennpoly_overlaps</a>()</code>,
<code><a href='get_largest_polygon.html'>get_largest_polygon</a>()</code>,
<code><a href='get_venn_shapes.html'>get_venn_shapes</a>()</code>,
<code><a href='intersect_polygons.html'>intersect_polygons</a>()</code>,
<code><a href='make_color_contrast.html'>make_color_contrast</a>()</code>,
<code><a href='make_venn_combn_df.html'>make_venn_combn_df</a>()</code>,
<code><a href='make_venn_test.html'>make_venn_test</a>()</code>,
<code><a href='match_list.html'>match_list</a>()</code>,
<code><a href='nudge_sp.html'>nudge_sp</a>()</code>,
<code><a href='print_color_df.html'>print_color_df</a>()</code>,
<code><a href='rescale_coordinates.html'>rescale_coordinates</a>()</code>,
<code><a href='rescale_ps.html'>rescale_ps</a>()</code>,
<code><a href='rescale_p.html'>rescale_p</a>()</code>,
<code><a href='rescale_sp.html'>rescale_sp</a>()</code>,
<code><a href='shrink_df.html'>shrink_df</a>()</code>,
<code><a href='sp_circles.html'>sp_circles</a>()</code>,
<code><a href='sp_ellipses.html'>sp_ellipses</a>()</code>,
<code><a href='union_polygons.html'>union_polygons</a>()</code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='va'>setlist</span> <span class='op'>&lt;-</span> <span class='fu'><a href='make_venn_test.html'>make_venn_test</a></span><span class='op'>(</span><span class='fl'>100</span>, <span class='fl'>3</span><span class='op'>)</span>;
<span class='va'>vo</span> <span class='op'>&lt;-</span> <span class='fu'><a href='venndir.html'>venndir</a></span><span class='op'>(</span><span class='va'>setlist</span>, return_items<span class='op'>=</span><span class='cn'>TRUE</span>, font_cex<span class='op'>=</span><span class='fl'>0.01</span>, proportional<span class='op'>=</span><span class='cn'>FALSE</span><span class='op'>)</span>;
</div><div class='input'>
<span class='co'># labels inside each venn overlap polygon</span>
<span class='va'>venn_spdf</span> <span class='op'>&lt;-</span> <span class='va'>vo</span><span class='op'>$</span><span class='va'>venn_spdf</span>;
<span class='va'>label_df</span> <span class='op'>&lt;-</span> <span class='va'>vo</span><span class='op'>$</span><span class='va'>label_df</span>;
<span class='kw'>for</span> <span class='op'>(</span><span class='va'>i</span> <span class='kw'>in</span> <span class='fu'><a href='https://rdrr.io/r/base/seq.html'>seq_len</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='va'>venn_spdf</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>{</span>
   <span class='va'>j</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/match.html'>match</a></span><span class='op'>(</span><span class='va'>venn_spdf</span><span class='op'>$</span><span class='va'>label</span><span class='op'>[</span><span class='va'>i</span><span class='op'>]</span>, <span class='va'>label_df</span><span class='op'>$</span><span class='va'>overlap_set</span><span class='op'>)</span>;
   <span class='kw'>if</span> <span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/unlist.html'>unlist</a></span><span class='op'>(</span><span class='va'>label_df</span><span class='op'>[</span><span class='va'>j</span>,<span class='st'>"items"</span><span class='op'>]</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>&gt;</span> <span class='fl'>0</span><span class='op'>)</span> <span class='op'>{</span>
   <span class='fu'>label_polygon_fill</span><span class='op'>(</span>sp<span class='op'>=</span><span class='va'>venn_spdf</span><span class='op'>[</span><span class='va'>i</span>,<span class='op'>]</span>,
      ref_sp<span class='op'>=</span><span class='va'>venn_spdf</span>,
      color<span class='op'>=</span><span class='va'>venn_spdf</span><span class='op'>$</span><span class='va'>border</span><span class='op'>[</span><span class='va'>i</span><span class='op'>]</span>,
      scale_width<span class='op'>=</span><span class='op'>-</span><span class='fl'>0.1</span>,
      draw_buffer<span class='op'>=</span><span class='cn'>TRUE</span>,
      labels<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/unlist.html'>unlist</a></span><span class='op'>(</span><span class='va'>label_df</span><span class='op'>[</span><span class='va'>j</span>,<span class='st'>"items"</span><span class='op'>]</span><span class='op'>)</span><span class='op'>)</span>;
   <span class='op'>}</span>
<span class='op'>}</span>
</div><div class='img'><img src='label_polygon_fill-1.png' alt='' width='768' height='768' /></div><div class='input'>
<span class='co'># same example as above but using proportional circles</span>
<span class='va'>vo</span> <span class='op'>&lt;-</span> <span class='fu'><a href='venndir.html'>venndir</a></span><span class='op'>(</span><span class='va'>setlist</span>, return_items<span class='op'>=</span><span class='cn'>TRUE</span>, font_cex<span class='op'>=</span><span class='fl'>0.01</span>, proportional<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span>;
</div><div class='input'>
<span class='co'># labels inside each venn overlap polygon</span>
<span class='va'>venn_spdf</span> <span class='op'>&lt;-</span> <span class='va'>vo</span><span class='op'>$</span><span class='va'>venn_spdf</span>;
<span class='va'>label_df</span> <span class='op'>&lt;-</span> <span class='va'>vo</span><span class='op'>$</span><span class='va'>label_df</span>;
<span class='kw'>for</span> <span class='op'>(</span><span class='va'>i</span> <span class='kw'>in</span> <span class='fu'><a href='https://rdrr.io/r/base/seq.html'>seq_len</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='va'>venn_spdf</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>{</span>
   <span class='va'>j</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/match.html'>match</a></span><span class='op'>(</span><span class='va'>venn_spdf</span><span class='op'>$</span><span class='va'>label</span><span class='op'>[</span><span class='va'>i</span><span class='op'>]</span>, <span class='va'>label_df</span><span class='op'>$</span><span class='va'>overlap_set</span><span class='op'>)</span>;
   <span class='kw'>if</span> <span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/unlist.html'>unlist</a></span><span class='op'>(</span><span class='va'>label_df</span><span class='op'>[</span><span class='va'>j</span>,<span class='st'>"items"</span><span class='op'>]</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>&gt;</span> <span class='fl'>0</span><span class='op'>)</span> <span class='op'>{</span>
   <span class='fu'>label_polygon_fill</span><span class='op'>(</span>sp<span class='op'>=</span><span class='va'>venn_spdf</span><span class='op'>[</span><span class='va'>i</span>,<span class='op'>]</span>,
      ref_sp<span class='op'>=</span><span class='va'>venn_spdf</span>,
      color<span class='op'>=</span><span class='va'>venn_spdf</span><span class='op'>$</span><span class='va'>border</span><span class='op'>[</span><span class='va'>i</span><span class='op'>]</span>,
      scale_width<span class='op'>=</span><span class='op'>-</span><span class='fl'>0.1</span>,
      draw_buffer<span class='op'>=</span><span class='cn'>TRUE</span>,
      labels<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/unlist.html'>unlist</a></span><span class='op'>(</span><span class='va'>label_df</span><span class='op'>[</span><span class='va'>j</span>,<span class='st'>"items"</span><span class='op'>]</span><span class='op'>)</span><span class='op'>)</span>;
   <span class='op'>}</span>
<span class='op'>}</span>
</div><div class='img'><img src='label_polygon_fill-2.png' alt='' width='768' height='768' /></div><div class='input'>

</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by James M. Ward.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


