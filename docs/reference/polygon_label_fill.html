<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Arrange text labels inside a polygon — polygon_label_fill • venndir</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Arrange text labels inside a polygon — polygon_label_fill"><meta property="og:description" content="Arrange text labels inside a polygon"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">venndir</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.27.900</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/venndir_gene_expression.html">Venndir with Gene Expression Data</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="http://github.com/jmw86069/venndir/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Arrange text labels inside a polygon</h1>
    <small class="dont-index">Source: <a href="http://github.com/jmw86069/venndir/blob/HEAD/R/venndir-polygon-label-fill.R" class="external-link"><code>R/venndir-polygon-label-fill.R</code></a></small>
    <div class="hidden name"><code>polygon_label_fill.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Arrange text labels inside a polygon</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">polygon_label_fill</span><span class="op">(</span></span>
<span>  <span class="va">sp</span>,</span>
<span>  <span class="va">labels</span>,</span>
<span>  color <span class="op">=</span> <span class="st">"black"</span>,</span>
<span>  border <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  ref_sp <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  fontsize <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  cex <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  degrees <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  dither_cex <span class="op">=</span> <span class="fl">0.04</span>,</span>
<span>  dither_color <span class="op">=</span> <span class="fl">0.07</span>,</span>
<span>  dither_degrees <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  scale_width <span class="op">=</span> <span class="op">-</span><span class="fl">0.15</span>,</span>
<span>  apply_n_scale <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  buffer_w <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  buffer_h <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  label_method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"hexagonal"</span>, <span class="st">"nonaligned"</span>, <span class="st">"regular"</span>, <span class="st">"random"</span>, <span class="st">"stratified"</span>,</span>
<span>    <span class="st">"clustered"</span><span class="op">)</span>,</span>
<span>  layout_degrees <span class="op">=</span> <span class="op">-</span><span class="fl">20</span>,</span>
<span>  draw_buffer <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  buffer_fill <span class="op">=</span> <span class="st">"#FFFFFF77"</span>,</span>
<span>  buffer_border <span class="op">=</span> <span class="st">"red"</span>,</span>
<span>  draw_points <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  draw_labels <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  seed <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  plot_style <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"base"</span>, <span class="st">"gg"</span>, <span class="st">"none"</span><span class="op">)</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>sp</dt>
<dd><p>object <code><a href="https://rdrr.io/pkg/sp/man/SpatialPolygons.html" class="external-link">sp::SpatialPolygons</a></code></p></dd>


<dt>labels</dt>
<dd><p><code>character</code> vector of labels, the length defines
the number of coordinate positions to return.</p></dd>


<dt>color</dt>
<dd><p><code>vector</code> of R compatible colors which defines the
color of each label.</p></dd>


<dt>border</dt>
<dd><p><code>vector</code> or <code>NA</code> with colors to define the border around
each label.</p></dd>


<dt>ref_sp</dt>
<dd><p>object <code><a href="https://rdrr.io/pkg/sp/man/SpatialPolygons.html" class="external-link">sp::SpatialPolygons</a></code> used as a reference to
compare the size of <code>sp</code> when <code>apply_n_scale=TRUE</code>. In general,
fewer labels are placed more toward the center; also in general,
this effect is applied less for smaller polygons.</p></dd>


<dt>fontsize</dt>
<dd><p><code>numeric</code> value indicating the font size in points.</p></dd>


<dt>cex</dt>
<dd><p><code>numeric</code> value used to resize all text labels by
multiplying the font size.</p></dd>


<dt>degrees</dt>
<dd><p><code>numeric</code> <code>vector</code> indicating the angle in degrees
to rotate each text label, where positive values rotate
in clockwise direction.</p></dd>


<dt>dither_cex</dt>
<dd><p><code>numeric</code> or <code>NULL</code>, where a numeric value
is applied to <code>cex</code> in random fashion to provide some
visual heterogeneity in the <code>cex</code> for item labels. When
<code>dither_cex=0</code> or <code>dither_cex=NULL</code> then no adjustment
is performed.</p></dd>


<dt>dither_color</dt>
<dd><p><code>numeric</code> or <code>NULL</code>, where a numeric value
is use to adjust each <code>color</code> slightly lighter or darker
via <code><a href="https://rdrr.io/pkg/jamba/man/makeColorDarker.html" class="external-link">jamba::makeColorDarker()</a></code>. The effect is to make adjacent
labels visibly different but in a subtle way.</p></dd>


<dt>dither_degrees</dt>
<dd><p><code>numeric</code> or <code>NULL</code>, where a numeric value
is used to adjust the text angle slightly more or less that
the <code>degrees</code> value.</p></dd>


<dt>scale_width</dt>
<dd><p><code>numeric</code> value or <code>NULL</code>, where a numeric
value indicates the relative size of the polygon to use as
a buffer around the polygon, and should be given as
negative values. For example <code>scale_width=-0.1</code> will create
a buffer at 10% the size of the polygon.</p></dd>


<dt>apply_n_scale</dt>
<dd><p><code>logical</code> indicating whether to adjust the
polygon buffer based upon the number of labels, specifically
so that few labels (1, 2, or 3 labels) have much higher buffer
and therefore are positioned more central inside the polygon.</p></dd>


<dt>buffer_w, buffer_h</dt>
<dd><p><code>numeric</code> width and height, respectively,
used for additional buffer inside each polygon. These values
are appropriate when the width of text label is known. The
buffer polygon derived from <code>scale_width</code> and <code>apply_n_scale</code>
is moved left, right, up, down, and the intersection of these
operations is used with <code><a href="https://rdrr.io/pkg/sp/man/spsample.html" class="external-link">sp::spsample()</a></code> to define label
positions. In this way, labels should fit inside the original
polygon without overlapping the boundary. This function does
not define default values, because the actual text label width
is dependent upon the diplay device properties at the time
the plot is drawn, and this device may not even be open when
this function is called.</p></dd>


<dt>label_method</dt>
<dd><p><code>character</code> string indicating the layout type
used by <code><a href="https://rdrr.io/pkg/sp/man/spsample.html" class="external-link">sp::spsample()</a></code>.</p></dd>


<dt>draw_buffer</dt>
<dd><p><code>logical</code> indicating whether the buffer polygon
should be drawn, intended for visual review of the processing.</p></dd>


<dt>buffer_fill, buffer_border</dt>
<dd><p>color values used when <code>draw_buffer=TRUE</code>.</p></dd>


<dt>draw_points</dt>
<dd><p><code>logical</code> indicating whether to draw points at
each coordinate position, intended for visual review of the processing.</p></dd>


<dt>draw_labels</dt>
<dd><p><code>logical</code> indicating whether to draw text labels
which is performed using <code><a href="https://wilkelab.org/gridtext/reference/richtext_grob.html" class="external-link">gridtext::richtext_grob()</a></code> inside
a base R plot.</p></dd>


<dt>seed</dt>
<dd><p><code>numeric</code> or <code>NULL</code>, where a <code>numeric</code> value is
passed to <code><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed()</a></code> to make the <code>dither_cex</code> process reproducible.
Set <code>seed=NULL</code> to disable this step.</p></dd>


<dt>plot_style</dt>
<dd><p><code>character</code> string indicating the expected output
plot style: <code>"base"</code> uses base R graphics, <code><a href="https://wilkelab.org/gridtext/reference/richtext_grob.html" class="external-link">gridtext::richtext_grob()</a></code>;
<code>"gg"</code> uses <code>ggplot2</code> style; <code>"none"</code> does not plot anything.</p></dd>


<dt>verbose</dt>
<dd><p><code>logical</code> indicating whether to print verbose output.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p><code>list</code> that contains: <code>items_df</code> as a <code>data.frame</code> of item
label coordinates; and <code>g_labels</code> as output from
<code><a href="https://wilkelab.org/gridtext/reference/richtext_grob.html" class="external-link">gridtext::richtext_grob()</a></code> whose coordinates are defined
as <code>"native"</code>, or <code>g_labels=NULL</code> when <code>plot_style="gg"</code>;
<code>scale_width</code> with the <code>numeric</code> value used; and
<code>sp_buffer</code> with the <code><a href="https://rdrr.io/pkg/sp/man/SpatialPolygons.html" class="external-link">sp::SpatialPolygons</a></code> object representing
the buffer region used for item labels.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>This function takes a vector of text labels, and will
arrange those labels to fill the inside of a polygon.
Currently the method uses <code><a href="https://rdrr.io/pkg/sp/man/spsample.html" class="external-link">sp::spsample()</a></code> which
has a few algorithms to generate point positions
inside a polygon, and these positions are used to
anchor text labels. Currently this method does no
overlap detection.</p>
<p>The primary method to avoid overlap is to use
<code>label_method="hexagon"</code> and <code>degrees=20</code>, since hexagonal
layout tends to have points at roughly 0 and 60 degrees
from one another, and 20 degree rotation tends to allow
text labels to nestle beside each other without much
overlap.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p>Other venndir label: 
<code><a href="draw_gridtext_groups.html">draw_gridtext_groups</a>()</code>,
<code><a href="polygon_label_outside.html">polygon_label_outside</a>()</code>,
<code><a href="polygon_label_segment.html">polygon_label_segment</a>()</code>,
<code><a href="sp_polylabelr.html">sp_polylabelr</a>()</code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">sp</span> <span class="op">&lt;-</span> <span class="fu"><a href="sp_ellipses.html">sp_ellipses</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">3</span>, xradius<span class="op">=</span><span class="fl">1.2</span>, yradius<span class="op">=</span><span class="fl">3</span>, rotation_degrees<span class="op">=</span><span class="fl">15</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">words</span> <span class="op">&lt;-</span> <span class="fu">jamba</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/jamba/man/unvigrep.html" class="external-link">unvigrep</a></span><span class="op">(</span><span class="st">"[0-9]"</span>,</span></span>
<span class="r-in"><span>   <span class="fu">jamba</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/jamba/man/vigrep.html" class="external-link">vigrep</a></span><span class="op">(</span><span class="st">"[a-zA-Z]"</span>, </span></span>
<span class="r-in"><span>      <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>      <span class="fu"><a href="https://rdrr.io/r/base/strsplit.html" class="external-link">strsplit</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/packageDescription.html" class="external-link">packageDescription</a></span><span class="op">(</span><span class="st">"venndir"</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>      <span class="st">'[", _()&lt;&gt;:;/\n\t.@&amp;=]+'</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>;</span></span>
<span class="r-in"><span><span class="va">words</span> <span class="op">&lt;-</span> <span class="va">words</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/nchar.html" class="external-link">nchar</a></span><span class="op">(</span><span class="va">words</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">2</span><span class="op">]</span>;</span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">sp</span>, col<span class="op">=</span><span class="st">"gold"</span>, border<span class="op">=</span><span class="st">"gold4"</span>, lwd<span class="op">=</span><span class="fl">2</span><span class="op">)</span>;</span></span>
<span class="r-in"><span><span class="fu">polygon_label_fill</span><span class="op">(</span>sp<span class="op">=</span><span class="va">sp</span>,</span></span>
<span class="r-in"><span>   degrees<span class="op">=</span><span class="op">-</span><span class="fl">10</span>,</span></span>
<span class="r-in"><span>   labels<span class="op">=</span><span class="va">words</span>,</span></span>
<span class="r-in"><span>   dither_color<span class="op">=</span><span class="fl">0.2</span>,</span></span>
<span class="r-in"><span>   color<span class="op">=</span><span class="st">"red2"</span>,</span></span>
<span class="r-in"><span>   cex<span class="op">=</span><span class="fl">1.2</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="polygon_label_fill-1.png" alt="" width="768" height="768"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">sp</span>, col<span class="op">=</span><span class="st">"gold"</span>, border<span class="op">=</span><span class="st">"gold4"</span>, lwd<span class="op">=</span><span class="fl">2</span><span class="op">)</span>;</span></span>
<span class="r-in"><span><span class="fu">polygon_label_fill</span><span class="op">(</span>sp<span class="op">=</span><span class="va">sp</span>,</span></span>
<span class="r-in"><span>   degrees<span class="op">=</span><span class="fl">0</span>,</span></span>
<span class="r-in"><span>   draw_buffer<span class="op">=</span><span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>   layout_degrees<span class="op">=</span><span class="fl">45</span><span class="op">/</span><span class="fl">2</span>,</span></span>
<span class="r-in"><span>   buffer_w<span class="op">=</span><span class="fl">0.4</span>,</span></span>
<span class="r-in"><span>   label_method<span class="op">=</span><span class="st">"regular"</span>,</span></span>
<span class="r-in"><span>   labels<span class="op">=</span><span class="fu">jamba</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/jamba/man/mixedSort.html" class="external-link">mixedSort</a></span><span class="op">(</span><span class="va">words</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>   dither_color<span class="op">=</span><span class="fl">0.2</span>,</span></span>
<span class="r-in"><span>   dither_cex<span class="op">=</span><span class="fl">0.2</span>,</span></span>
<span class="r-in"><span>   dither_degrees<span class="op">=</span><span class="fl">0</span>,</span></span>
<span class="r-in"><span>   color<span class="op">=</span><span class="st">"red2"</span>,</span></span>
<span class="r-in"><span>   cex<span class="op">=</span><span class="fl">1.2</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="polygon_label_fill-2.png" alt="" width="768" height="768"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># iterate various options for reducing label overlap</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span><span class="st">"mfrow"</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span>;</span></span>
<span class="r-in"><span><span class="kw">for</span> <span class="op">(</span><span class="va">lm</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"hexagonal"</span>, <span class="st">"regular"</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="kw">for</span> <span class="op">(</span><span class="va">ld</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="op">-</span><span class="fl">45</span><span class="op">/</span><span class="fl">2</span>, <span class="op">-</span><span class="fl">30</span>, <span class="op">-</span><span class="fl">45</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">sp</span>, col<span class="op">=</span><span class="st">"gold"</span>, border<span class="op">=</span><span class="st">"gold4"</span>, lwd<span class="op">=</span><span class="fl">2</span><span class="op">)</span>;</span></span>
<span class="r-in"><span><span class="va">id</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">ld</span> <span class="op">==</span> <span class="fl">0</span>, <span class="op">-</span><span class="fl">20</span>,</span></span>
<span class="r-in"><span>   <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">ld</span> <span class="op">==</span> <span class="op">-</span><span class="fl">45</span>, <span class="fl">15</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span>;</span></span>
<span class="r-in"><span><span class="fu">polygon_label_fill</span><span class="op">(</span>sp<span class="op">=</span><span class="va">sp</span>,</span></span>
<span class="r-in"><span>   degrees<span class="op">=</span><span class="va">id</span>,</span></span>
<span class="r-in"><span>   layout_degrees<span class="op">=</span><span class="va">ld</span>,</span></span>
<span class="r-in"><span>   buffer_w<span class="op">=</span><span class="fl">0.4</span>,</span></span>
<span class="r-in"><span>   label_method<span class="op">=</span><span class="va">lm</span>,</span></span>
<span class="r-in"><span>   <span class="co">#labels=seq_along(words),</span></span></span>
<span class="r-in"><span>   <span class="co">#labels=rep("word", length(words)),</span></span></span>
<span class="r-in"><span>   labels<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"word"</span>, <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_along</a></span><span class="op">(</span><span class="va">words</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>   dither_color<span class="op">=</span><span class="fl">0</span>,</span></span>
<span class="r-in"><span>   dither_cex<span class="op">=</span><span class="fl">0</span>,</span></span>
<span class="r-in"><span>   dither_degrees<span class="op">=</span><span class="fl">0</span>,</span></span>
<span class="r-in"><span>   color<span class="op">=</span><span class="st">"navy"</span>,</span></span>
<span class="r-in"><span>   cex<span class="op">=</span><span class="fl">0.7</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/title.html" class="external-link">title</a></span><span class="op">(</span>main<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"layout_degrees="</span>,</span></span>
<span class="r-in"><span>   <span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="va">ld</span>, digits<span class="op">=</span><span class="fl">2</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>   <span class="st">"\nlabel_method='"</span>, <span class="va">lm</span>, <span class="st">"'"</span>,</span></span>
<span class="r-in"><span>   <span class="st">"\ndegrees="</span>, <span class="va">id</span><span class="op">)</span><span class="op">)</span>;</span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-plt img"><img src="polygon_label_fill-3.png" alt="" width="768" height="768"></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span><span class="st">"mfrow"</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span>;</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">sp</span>, col<span class="op">=</span><span class="st">"gold"</span>, border<span class="op">=</span><span class="st">"gold4"</span>, lwd<span class="op">=</span><span class="fl">2</span><span class="op">)</span>;</span></span>
<span class="r-in"><span><span class="fu">polygon_label_fill</span><span class="op">(</span>sp<span class="op">=</span><span class="va">sp</span>,</span></span>
<span class="r-in"><span>   degrees<span class="op">=</span><span class="op">-</span><span class="fl">10</span>,</span></span>
<span class="r-in"><span>   scale_width<span class="op">=</span><span class="op">-</span><span class="fl">0.3</span>,</span></span>
<span class="r-in"><span>   draw_buffer<span class="op">=</span><span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>   labels<span class="op">=</span><span class="va">words</span>, dither_color<span class="op">=</span><span class="fl">0.2</span>, color<span class="op">=</span><span class="st">"red2"</span>, cex<span class="op">=</span><span class="fl">1.2</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="polygon_label_fill-4.png" alt="" width="768" height="768"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">setlist</span> <span class="op">&lt;-</span> <span class="fu"><a href="make_venn_test.html">make_venn_test</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">3</span><span class="op">)</span>;</span></span>
<span class="r-in"><span><span class="va">vo</span> <span class="op">&lt;-</span> <span class="fu"><a href="venndir.html">venndir</a></span><span class="op">(</span><span class="va">setlist</span>, return_items<span class="op">=</span><span class="cn">TRUE</span>, font_cex<span class="op">=</span><span class="fl">0.01</span>, proportional<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span>;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ##  (<span style="color: #00FFFF; font-weight: bold;">18:06:55</span>) 07Jul2023:   <span style="color: #FF8700;">draw_gridtext_groups(): </span><span style="color: #00AFFF;">grob_group_roundrect(),  k:</span><span style="color: #FF8700;">9</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         overlap_set text        x        y vjust hjust halign rot padding    r</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9 set_A&amp;set_B&amp;set_C    1 4.999814 5.248994   0.5   0.5    0.5   0    0.03 0.03</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   r_unit label_col fontsize border_col box_fill box_lty box_lwd padding_unit</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9     pt #262626FF     0.14         NA       NA       1       1           pt</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   num</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9   9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ##  (<span style="color: #00FFFF; font-weight: bold;">18:06:55</span>) 07Jul2023:   <span style="color: #FF8700;">draw_gridtext_groups(): </span><span style="color: #00AFFF;">grob_group_roundrect(),  k:</span><span style="color: #FF8700;">7</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   overlap_set text        x        y vjust hjust halign rot padding    r r_unit</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7 set_A&amp;set_B    8 4.999106 6.748495   0.5   0.5    0.5   0    0.03 0.03     pt</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   label_col fontsize border_col box_fill box_lty box_lwd padding_unit num</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7 #262626FF     0.14         NA       NA       1       1           pt   7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ##  (<span style="color: #00FFFF; font-weight: bold;">18:06:55</span>) 07Jul2023:   <span style="color: #FF8700;">draw_gridtext_groups(): </span><span style="color: #00AFFF;">grob_group_roundrect(),  k:</span><span style="color: #FF8700;">8</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   overlap_set text        x        y vjust hjust halign rot padding    r r_unit</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8 set_A&amp;set_C    7 3.773922 4.632696   0.5   0.5    0.5   0    0.03 0.03     pt</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   label_col fontsize border_col box_fill box_lty box_lwd padding_unit num</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8 #262626FF     0.14         NA       NA       1       1           pt   8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ##  (<span style="color: #00FFFF; font-weight: bold;">18:06:55</span>) 07Jul2023:   <span style="color: #FF8700;">draw_gridtext_groups(): </span><span style="color: #00AFFF;">grob_group_roundrect(),  k:</span><span style="color: #FF8700;">1</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   overlap_set      text       x        y vjust hjust halign rot padding    r</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1       set_A **set_A** 1.90869 6.955722   0.5   0.5    0.5   0    0.03 0.03</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   r_unit label_col fontsize border_col box_fill box_lty box_lwd padding_unit</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     pt #262626FF     0.14         NA       NA       1       2           pt</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   num</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ##  (<span style="color: #00FFFF; font-weight: bold;">18:06:55</span>) 07Jul2023:   <span style="color: #FF8700;">draw_gridtext_groups(): </span><span style="color: #00AFFF;">grob_group_roundrect(),  k:</span><span style="color: #FF8700;">4</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   overlap_set text        x        y vjust hjust halign rot padding    r r_unit</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4       set_A   16 3.019531 6.238855   0.5   0.5    0.5   0    0.03 0.03     pt</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   label_col fontsize border_col box_fill box_lty box_lwd padding_unit num</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 #262626FF     0.14         NA       NA       1       1           pt   4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ##  (<span style="color: #00FFFF; font-weight: bold;">18:06:55</span>) 07Jul2023:   <span style="color: #FF8700;">draw_gridtext_groups(): </span><span style="color: #00AFFF;">grob_group_roundrect(),  k:</span><span style="color: #FF8700;">5</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   overlap_set text        x        y vjust hjust halign rot padding    r r_unit</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5       set_B    7 6.980469 6.238855   0.5   0.5    0.5   0    0.03 0.03     pt</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   label_col fontsize border_col box_fill box_lty box_lwd padding_unit num</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 #262626FF     0.14         NA       NA       1       1           pt   5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ##  (<span style="color: #00FFFF; font-weight: bold;">18:06:55</span>) 07Jul2023:   <span style="color: #FF8700;">draw_gridtext_groups(): </span><span style="color: #00AFFF;">grob_group_roundrect(),  k:</span><span style="color: #FF8700;">2</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   overlap_set      text        x        y vjust hjust halign rot padding    r</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2       set_B **set_B** 8.091055 6.956222   0.5   0.5    0.5   0    0.03 0.03</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   r_unit label_col fontsize border_col box_fill box_lty box_lwd padding_unit</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     pt #262626FF     0.14         NA       NA       1       2           pt</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   num</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ##  (<span style="color: #00FFFF; font-weight: bold;">18:06:55</span>) 07Jul2023:   <span style="color: #FF8700;">draw_gridtext_groups(): </span><span style="color: #00AFFF;">grob_group_roundrect(),  k:</span><span style="color: #FF8700;">6</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   overlap_set text        x       y vjust hjust halign rot padding    r r_unit</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6       set_C    7 5.002174 3.08082   0.5   0.5    0.5   0    0.03 0.03     pt</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   label_col fontsize border_col box_fill box_lty box_lwd padding_unit num</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 #262626FF     0.14         NA       NA       1       1           pt   6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ##  (<span style="color: #00FFFF; font-weight: bold;">18:06:55</span>) 07Jul2023:   <span style="color: #FF8700;">draw_gridtext_groups(): </span><span style="color: #00AFFF;">grob_group_roundrect(),  k:</span><span style="color: #FF8700;">3</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   overlap_set      text        x        y vjust hjust halign rot padding    r</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3       set_C **set_C** 5.003101 1.700411   0.5   0.5    0.5   0    0.03 0.03</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   r_unit label_col fontsize border_col box_fill box_lty box_lwd padding_unit</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3     pt #262626FF     0.14         NA       NA       1       2           pt</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   num</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   3</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># labels inside each venn overlap polygon</span></span></span>
<span class="r-in"><span><span class="va">venn_spdf</span> <span class="op">&lt;-</span> <span class="va">vo</span><span class="op">$</span><span class="va">venn_spdf</span>;</span></span>
<span class="r-in"><span><span class="va">label_df</span> <span class="op">&lt;-</span> <span class="va">vo</span><span class="op">$</span><span class="va">label_df</span>;</span></span>
<span class="r-in"><span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_len</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">venn_spdf</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>   <span class="va">j</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/match.html" class="external-link">match</a></span><span class="op">(</span><span class="va">venn_spdf</span><span class="op">$</span><span class="va">label</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>, <span class="va">label_df</span><span class="op">$</span><span class="va">overlap_set</span><span class="op">)</span>;</span></span>
<span class="r-in"><span>   <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="va">label_df</span><span class="op">[</span><span class="va">j</span>,<span class="st">"items"</span><span class="op">]</span><span class="op">)</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>   <span class="fu">polygon_label_fill</span><span class="op">(</span>sp<span class="op">=</span><span class="va">venn_spdf</span><span class="op">[</span><span class="va">i</span>,<span class="op">]</span>,</span></span>
<span class="r-in"><span>      ref_sp<span class="op">=</span><span class="va">venn_spdf</span>,</span></span>
<span class="r-in"><span>      color<span class="op">=</span><span class="va">venn_spdf</span><span class="op">$</span><span class="va">border</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>      scale_width<span class="op">=</span><span class="op">-</span><span class="fl">0.1</span>,</span></span>
<span class="r-in"><span>      draw_buffer<span class="op">=</span><span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>      labels<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="va">label_df</span><span class="op">[</span><span class="va">j</span>,<span class="st">"items"</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>;</span></span>
<span class="r-in"><span>   <span class="op">}</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-plt img"><img src="polygon_label_fill-5.png" alt="" width="768" height="768"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># same example as above but using proportional circles</span></span></span>
<span class="r-in"><span><span class="va">vo</span> <span class="op">&lt;-</span> <span class="fu"><a href="venndir.html">venndir</a></span><span class="op">(</span><span class="va">setlist</span>, font_cex<span class="op">=</span><span class="fl">0.01</span>, proportional<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span>;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ##  (<span style="color: #00FFFF; font-weight: bold;">18:06:56</span>) 07Jul2023:   <span style="color: #FF8700;">draw_gridtext_groups(): </span><span style="color: #00AFFF;">grob_group_roundrect(),  k:</span><span style="color: #FF8700;">9</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         overlap_set text         x         y vjust hjust halign rot padding</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9 set_A&amp;set_B&amp;set_C    1 0.1564435 0.5133692   0.5   0.5    0.5   0    0.03</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      r r_unit label_col fontsize border_col box_fill box_lty box_lwd</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9 0.03     pt #262626FF     0.14         NA       NA       1       1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   padding_unit num</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9           pt   9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ##  (<span style="color: #00FFFF; font-weight: bold;">18:06:56</span>) 07Jul2023:   <span style="color: #FF8700;">draw_gridtext_groups(): </span><span style="color: #00AFFF;">grob_group_roundrect(),  k:</span><span style="color: #FF8700;">7</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   overlap_set text         x         y vjust hjust halign rot padding    r</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7 set_A&amp;set_B    8 0.5991818 -1.205417   0.5   0.5    0.5   0    0.03 0.03</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   r_unit label_col fontsize border_col box_fill box_lty box_lwd padding_unit</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7     pt #262626FF     0.14         NA       NA       1       1           pt</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   num</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7   7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ##  (<span style="color: #00FFFF; font-weight: bold;">18:06:56</span>) 07Jul2023:   <span style="color: #FF8700;">draw_gridtext_groups(): </span><span style="color: #00AFFF;">grob_group_roundrect(),  k:</span><span style="color: #FF8700;">8</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   overlap_set text         x        y vjust hjust halign rot padding    r</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8 set_A&amp;set_C    7 -1.454183 1.014376   0.5   0.5    0.5   0    0.03 0.03</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   r_unit label_col fontsize border_col box_fill box_lty box_lwd padding_unit</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8     pt #262626FF     0.14         NA       NA       1       1           pt</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   num</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8   8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ##  (<span style="color: #00FFFF; font-weight: bold;">18:06:56</span>) 07Jul2023:   <span style="color: #FF8700;">draw_gridtext_groups(): </span><span style="color: #00AFFF;">grob_group_roundrect(),  k:</span><span style="color: #FF8700;">4</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   overlap_set text         x         y vjust hjust halign rot padding    r</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4       set_A   16 -2.414462 -1.780493   0.5   0.5    0.5   0    0.03 0.03</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   r_unit label_col fontsize border_col box_fill box_lty box_lwd padding_unit</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4     pt #262626FF     0.14         NA       NA       1       1           pt</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   num</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ##  (<span style="color: #00FFFF; font-weight: bold;">18:06:56</span>) 07Jul2023:   <span style="color: #FF8700;">draw_gridtext_groups(): </span><span style="color: #00AFFF;">grob_group_roundrect(),  k:</span><span style="color: #FF8700;">1</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   overlap_set      text         x         y vjust hjust halign rot padding    r</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1       set_A **set_A** -4.163439 -2.986351   0.5   0.5    0.5   0    0.03 0.03</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   r_unit label_col fontsize border_col box_fill box_lty box_lwd padding_unit</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     pt #262626FF     0.14         NA       NA       1       2           pt</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   num</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ##  (<span style="color: #00FFFF; font-weight: bold;">18:06:56</span>) 07Jul2023:   <span style="color: #FF8700;">draw_gridtext_groups(): </span><span style="color: #00AFFF;">grob_group_roundrect(),  k:</span><span style="color: #FF8700;">5</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   overlap_set text        x          y vjust hjust halign rot padding    r</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5       set_B    7 2.844281 -0.8726355   0.5   0.5    0.5   0    0.03 0.03</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   r_unit label_col fontsize border_col box_fill box_lty box_lwd padding_unit</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5     pt #262626FF     0.14         NA       NA       1       1           pt</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   num</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5   5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ##  (<span style="color: #00FFFF; font-weight: bold;">18:06:56</span>) 07Jul2023:   <span style="color: #FF8700;">draw_gridtext_groups(): </span><span style="color: #00AFFF;">grob_group_roundrect(),  k:</span><span style="color: #FF8700;">2</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   overlap_set      text        x         y vjust hjust halign rot padding    r</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2       set_B **set_B** 4.116615 -1.123098   0.5   0.5    0.5   0    0.03 0.03</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   r_unit label_col fontsize border_col box_fill box_lty box_lwd padding_unit</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     pt #262626FF     0.14         NA       NA       1       2           pt</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   num</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ##  (<span style="color: #00FFFF; font-weight: bold;">18:06:56</span>) 07Jul2023:   <span style="color: #FF8700;">draw_gridtext_groups(): </span><span style="color: #00AFFF;">grob_group_roundrect(),  k:</span><span style="color: #FF8700;">6</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   overlap_set text         x        y vjust hjust halign rot padding    r</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6       set_C    7 -1.064277 3.172044   0.5   0.5    0.5   0    0.03 0.03</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   r_unit label_col fontsize border_col box_fill box_lty box_lwd padding_unit</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6     pt #262626FF     0.14         NA       NA       1       1           pt</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   num</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6   6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ##  (<span style="color: #00FFFF; font-weight: bold;">18:06:56</span>) 07Jul2023:   <span style="color: #FF8700;">draw_gridtext_groups(): </span><span style="color: #00AFFF;">grob_group_roundrect(),  k:</span><span style="color: #FF8700;">3</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   overlap_set      text         x        y vjust hjust halign rot padding    r</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3       set_C **set_C** -1.380893 4.465791   0.5   0.5    0.5   0    0.03 0.03</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   r_unit label_col fontsize border_col box_fill box_lty box_lwd padding_unit</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3     pt #262626FF     0.14         NA       NA       1       2           pt</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   num</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   3</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># labels inside each venn overlap polygon</span></span></span>
<span class="r-in"><span><span class="va">venn_spdf</span> <span class="op">&lt;-</span> <span class="va">vo</span><span class="op">$</span><span class="va">venn_spdf</span>;</span></span>
<span class="r-in"><span><span class="va">label_df</span> <span class="op">&lt;-</span> <span class="va">vo</span><span class="op">$</span><span class="va">label_df</span>;</span></span>
<span class="r-in"><span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_len</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">venn_spdf</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>   <span class="va">j</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/match.html" class="external-link">match</a></span><span class="op">(</span><span class="va">venn_spdf</span><span class="op">$</span><span class="va">label</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>, <span class="va">label_df</span><span class="op">$</span><span class="va">overlap_set</span><span class="op">)</span>;</span></span>
<span class="r-in"><span>   <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="va">label_df</span><span class="op">[</span><span class="va">j</span>,<span class="st">"items"</span><span class="op">]</span><span class="op">)</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>   <span class="fu">polygon_label_fill</span><span class="op">(</span>sp<span class="op">=</span><span class="va">venn_spdf</span><span class="op">[</span><span class="va">i</span>,<span class="op">]</span>,</span></span>
<span class="r-in"><span>      ref_sp<span class="op">=</span><span class="va">venn_spdf</span>,</span></span>
<span class="r-in"><span>      color<span class="op">=</span><span class="va">venn_spdf</span><span class="op">$</span><span class="va">border</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>      scale_width<span class="op">=</span><span class="op">-</span><span class="fl">0.1</span>,</span></span>
<span class="r-in"><span>      draw_buffer<span class="op">=</span><span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>      labels<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="va">label_df</span><span class="op">[</span><span class="va">j</span>,<span class="st">"items"</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>;</span></span>
<span class="r-in"><span>   <span class="op">}</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-plt img"><img src="polygon_label_fill-6.png" alt="" width="768" height="768"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by James M. Ward.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

